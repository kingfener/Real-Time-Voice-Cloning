<mxfile host="app.diagrams.net" modified="2020-12-08T10:04:55.462Z" agent="5.0 (X11)" etag="7L3OAJBMxqiUIJc9lFb_" version="13.10.9" type="github">
  <diagram id="kgpKYQtTHZ0yAKxKKP6v" name="syn">
    <mxGraphModel dx="2557" dy="2040" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-1" value="synthesizer-RTVC" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="340" y="-240" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-142" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-3" target="5ah7Fh8-n24Y0VrOONyn-6">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="-40" y="100" />
              <mxPoint x="-40" y="90" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-138" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-4" target="5ah7Fh8-n24Y0VrOONyn-137">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="-40" y="630" />
              <mxPoint x="-175" y="630" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-4" value="&lt;div&gt;psk-Embbed&lt;/div&gt;&lt;div&gt;tiled_embed_targets&lt;br&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffff88;strokeColor=#36393d;" vertex="1" parent="1">
          <mxGeometry x="-40" y="600" width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-194" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-5" target="5ah7Fh8-n24Y0VrOONyn-8">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-5" value="TacotronDecoderCell" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="550" y="20" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-14" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fillColor=#ffe6cc;strokeColor=#d79b00;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-6" target="5ah7Fh8-n24Y0VrOONyn-15">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="200" y="260" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-274" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=16;shape=flexArrow;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-6" target="5ah7Fh8-n24Y0VrOONyn-7">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-6" value="EncoderConvlutions" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry y="60" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-32" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-7" target="5ah7Fh8-n24Y0VrOONyn-25">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="60" y="230" />
              <mxPoint x="-40" y="230" />
              <mxPoint x="-40" y="200" />
              <mxPoint x="-367" y="200" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-7" value="EncoderRNN" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry y="150" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-195" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-8" target="5ah7Fh8-n24Y0VrOONyn-9">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-8" value="PreNet" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#99FFCC;" vertex="1" parent="1">
          <mxGeometry x="550" y="90" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-196" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-9" target="5ah7Fh8-n24Y0VrOONyn-10">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-9" value="LocalsensitiveAttention" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="520" y="180" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-256" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=16;fillColor=#ffe6cc;strokeColor=#d79b00;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-10" target="5ah7Fh8-n24Y0VrOONyn-35">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-10" value="DecoderRNN" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#CC6600;" vertex="1" parent="1">
          <mxGeometry x="550" y="270" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-40" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-11" target="5ah7Fh8-n24Y0VrOONyn-39">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-11" value="FrameProjection" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FF99FF;" vertex="1" parent="1">
          <mxGeometry x="550" y="370" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-42" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fillColor=#ffe6cc;strokeColor=#d79b00;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-12" target="5ah7Fh8-n24Y0VrOONyn-41">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-12" value="stopProjection" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFB366;" vertex="1" parent="1">
          <mxGeometry x="550" y="470" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-17" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-15" target="5ah7Fh8-n24Y0VrOONyn-16">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-15" value="conv1d" style="shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;" vertex="1" parent="1">
          <mxGeometry x="160" y="60" width="70" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-22" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-16" target="5ah7Fh8-n24Y0VrOONyn-19">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-16" value="&lt;div&gt;tf.compat.&lt;/div&gt;&lt;div&gt;v1.layers.&lt;/div&gt;&lt;div&gt;conv1d()&lt;/div&gt;" style="shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;" vertex="1" parent="1">
          <mxGeometry x="250" y="60" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-23" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-19" target="5ah7Fh8-n24Y0VrOONyn-20">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-19" value="&lt;div&gt;tf.batch_normalize()&lt;/div&gt;" style="shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;" vertex="1" parent="1">
          <mxGeometry x="250" y="140" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-24" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-20" target="5ah7Fh8-n24Y0VrOONyn-21">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-20" value="activation" style="shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;" vertex="1" parent="1">
          <mxGeometry x="250" y="230" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-272" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;fontSize=16;fillColor=#ffe6cc;strokeColor=#d79b00;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-21" target="5ah7Fh8-n24Y0VrOONyn-271">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-21" value="tf.dropout()" style="shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;" vertex="1" parent="1">
          <mxGeometry x="250" y="310" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-268" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=16;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-25">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-367" y="315" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-25" value="&lt;div&gt;_fw_cell=zoneoutLSTMCell()&lt;/div&gt;&lt;div&gt;_bw_cell = ZoneoutLSTMCell&lt;/div&gt;" style="shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;" vertex="1" parent="1">
          <mxGeometry x="-510" y="230" width="285" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-31" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-27" target="5ah7Fh8-n24Y0VrOONyn-28">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-367.5" y="412" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-27" value="&lt;div&gt;outputs, (fw_state, bw_state) = tf.compat.v1.nn.bidirectional_dynamic_rnn(&lt;/div&gt;" style="shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;" vertex="1" parent="1">
          <mxGeometry x="-515" y="320" width="295" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-269" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=16;fillColor=#ffe6cc;strokeColor=#d79b00;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-28" target="5ah7Fh8-n24Y0VrOONyn-192">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-28" value="tf.concat(outputs,axis=2)" style="shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;" vertex="1" parent="1">
          <mxGeometry x="-475" y="400" width="215" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-267" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=16;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-33" target="5ah7Fh8-n24Y0VrOONyn-258">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-33" value="self._cell()=&lt;div&gt;tf.compat.v1&lt;/div&gt;&lt;div&gt;rnn.rnn_cell.&lt;/div&gt;MultiRNNCell([ZoneoutLSTMCell(size)])" style="shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;" vertex="1" parent="1">
          <mxGeometry x="971.5" y="270" width="270" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-257" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=16;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-35">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="971" y="300" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-35" value="self._cell(input,state)" style="shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;" vertex="1" parent="1">
          <mxGeometry x="750" y="270" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-39" value="slef.dense(inputs)" style="shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;" vertex="1" parent="1">
          <mxGeometry x="780" y="370" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-199" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.75;entryDx=0;entryDy=0;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-41" target="5ah7Fh8-n24Y0VrOONyn-43">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-200" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-41" target="5ah7Fh8-n24Y0VrOONyn-44">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-41" value="tf.layers.dense(inputs)" style="shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;" vertex="1" parent="1">
          <mxGeometry x="730" y="470" width="240" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-43" value="train:output" style="shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;" vertex="1" parent="1">
          <mxGeometry x="1010" y="430" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-44" value="&lt;div&gt;not train:&lt;/div&gt;&lt;div&gt;tf.nn,sigmod(output)&lt;br&gt;&lt;/div&gt;" style="shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;" vertex="1" parent="1">
          <mxGeometry x="1010" y="510" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-46" value="TacotronDecoderCell()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="-320" y="1000" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-62" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-48" target="5ah7Fh8-n24Y0VrOONyn-50">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-48" value="inputs" style="ellipse;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-145" y="1000" width="90" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-49" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-46" target="5ah7Fh8-n24Y0VrOONyn-48">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-154" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-50" target="5ah7Fh8-n24Y0VrOONyn-152">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-50" value="Prenet" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#99FFCC;" vertex="1" parent="1">
          <mxGeometry x="-35" y="1000" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-163" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-65" target="5ah7Fh8-n24Y0VrOONyn-161">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-164" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-65" target="5ah7Fh8-n24Y0VrOONyn-162">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-65" value="DecoderRNN" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#CC6600;" vertex="1" parent="1">
          <mxGeometry x="440" y="950" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-76" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-73" target="5ah7Fh8-n24Y0VrOONyn-74">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="810" y="990" as="targetPoint" />
            <Array as="points">
              <mxPoint x="760" y="970" />
              <mxPoint x="810" y="970" />
              <mxPoint x="810" y="990" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-73" value="&amp;nbsp;previous_ali = state.ali" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;gradientColor=#97d077;" vertex="1" parent="1">
          <mxGeometry x="590" y="940" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-110" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.75;exitY=0;exitDx=0;exitDy=0;gradientColor=#ffa500;fillColor=#ffcd28;strokeColor=#d79b00;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-74" target="5ah7Fh8-n24Y0VrOONyn-108">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="950" y="680" as="sourcePoint" />
            <mxPoint x="1677.5" y="860" as="targetPoint" />
            <Array as="points">
              <mxPoint x="920" y="750" />
              <mxPoint x="-380" y="750" />
              <mxPoint x="-380" y="1690" />
              <mxPoint x="-125" y="1690" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-174" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.75;entryDx=0;entryDy=0;exitX=1;exitY=0;exitDx=0;exitDy=0;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-74" target="5ah7Fh8-n24Y0VrOONyn-172">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="950" y="980" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-175" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-74" target="5ah7Fh8-n24Y0VrOONyn-171">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="940" y="865" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-176" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.75;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-74" target="5ah7Fh8-n24Y0VrOONyn-173">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-74" value="_compute_attention()" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="830" y="960" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-87" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-83" target="5ah7Fh8-n24Y0VrOONyn-86">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-97" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.25;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-83" target="5ah7Fh8-n24Y0VrOONyn-91">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-83" value="projections_input = tf.concat(LSTM_output,context_vector,axis=-1)" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="755" y="1090" width="325" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-181" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-86" target="5ah7Fh8-n24Y0VrOONyn-180">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-86" value="FrameProjection" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FF99FF;" vertex="1" parent="1">
          <mxGeometry x="857.5" y="1180" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-96" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-91" target="5ah7Fh8-n24Y0VrOONyn-183">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1050" y="1320" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-91" value="stopProjection" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFB366;" vertex="1" parent="1">
          <mxGeometry x="870" y="1290" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-100" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-98" target="5ah7Fh8-n24Y0VrOONyn-201">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1140" y="1450" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-102" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-98" target="5ah7Fh8-n24Y0VrOONyn-101">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-98" value="next_state = TacotronDecoderCellState()" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="857.5" y="1420" width="232.5" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-101" value="&lt;div&gt;output:&lt;/div&gt;&lt;div&gt;cell_outputs,&lt;/div&gt;&lt;div&gt;stop_tokens,&lt;/div&gt;&lt;div&gt;next_state&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="530" y="1330" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-225" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=16;gradientColor=#ffd966;fillColor=#fff2cc;strokeColor=#d6b656;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-108" target="5ah7Fh8-n24Y0VrOONyn-202">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-108" value="_compute_attention()" style="shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;rounded=1;shadow=1;glass=1;" vertex="1" parent="1">
          <mxGeometry x="-240" y="2075" width="230" height="30" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-191" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-137" target="5ah7Fh8-n24Y0VrOONyn-165">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="50" y="1410" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-137" value="tf.concat(axis=2)&lt;br&gt;&lt;div&gt;encoder_cond_output&lt;/div&gt;==就是 attention 的 memory" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;glass=1;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="-270" y="820" width="190" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-275" style="edgeStyle=orthogonalEdgeStyle;shape=flexArrow;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=16;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-140" target="5ah7Fh8-n24Y0VrOONyn-3">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-140" value="embedded_inputs = tf.nn.embedding_lookup(self.embedding_table, tower_inputs[i])" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;glass=1;" vertex="1" parent="1">
          <mxGeometry x="-400" y="-50" width="440" height="50" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-143" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-141" target="5ah7Fh8-n24Y0VrOONyn-140">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-141" value="tower_inputs" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;glass=1;fillColor=#ffff88;strokeColor=#36393d;" vertex="1" parent="1">
          <mxGeometry x="-250" y="-130" width="140" height="40" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-3" value="TacotronEncoderCell" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="-225" y="70" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-146" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-145" target="5ah7Fh8-n24Y0VrOONyn-7">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-180.00000000000023" y="80" as="targetPoint" />
            <Array as="points">
              <mxPoint x="-290" y="110" />
              <mxPoint x="-290" y="175" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-145" value="&lt;div&gt;tower_input_lengths=length&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;glass=1;fillColor=#ffff88;strokeColor=#36393d;" vertex="1" parent="1">
          <mxGeometry x="-550" y="80" width="190" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-148" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-192" target="5ah7Fh8-n24Y0VrOONyn-137">
          <mxGeometry relative="1" as="geometry">
            <mxPoint y="530" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="-175" y="460" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-197" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-150">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="180" y="1020" as="targetPoint" />
            <Array as="points">
              <mxPoint x="190" y="1095" />
              <mxPoint x="180" y="1095" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-198" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-150" target="5ah7Fh8-n24Y0VrOONyn-153">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-150" value="&lt;div&gt;decoder_init_state = &lt;br&gt;&lt;/div&gt;&lt;div&gt;decoder_cell.zero_state&lt;/div&gt;&lt;div&gt;(batch_size=batch_size,&amp;nbsp; dtype=tf.float32)&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;glass=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="65" y="1170" width="250" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-157" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-152" target="5ah7Fh8-n24Y0VrOONyn-156">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-152" value="prenet_output" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;glass=1;" vertex="1" parent="1">
          <mxGeometry x="130" y="870" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-160" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.75;entryDx=0;entryDy=0;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-153" target="5ah7Fh8-n24Y0VrOONyn-65">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-153" value="state.cell_state" style="whiteSpace=wrap;html=1;rounded=1;shadow=1;glass=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="280" y="1030" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-158" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-155" target="5ah7Fh8-n24Y0VrOONyn-156">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-155" value="state.attention" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;glass=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="130" y="960" width="90" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-159" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-156" target="5ah7Fh8-n24Y0VrOONyn-65">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-156" value="LSTM_input" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;glass=1;" vertex="1" parent="1">
          <mxGeometry x="280" y="930" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-166" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-161" target="5ah7Fh8-n24Y0VrOONyn-74">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-179" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-161" target="5ah7Fh8-n24Y0VrOONyn-83">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="675" y="920" />
              <mxPoint x="780" y="920" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-161" value="LSTM_output" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;glass=1;fillColor=#b0e3e6;strokeColor=#0e8088;" vertex="1" parent="1">
          <mxGeometry x="600" y="860" width="150" height="40" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-177" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-162" target="5ah7Fh8-n24Y0VrOONyn-98">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="730" y="1120" />
              <mxPoint x="730" y="1530" />
              <mxPoint x="974" y="1530" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-162" value="&lt;div&gt;next_cell_state&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;glass=1;" vertex="1" parent="1">
          <mxGeometry x="550" y="1090" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-170" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.25;entryY=0;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-165" target="5ah7Fh8-n24Y0VrOONyn-74">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="830" y="970" as="targetPoint" />
            <Array as="points">
              <mxPoint x="860" y="830" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-165" value="LocallSensitiveAttention" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;glass=1;arcSize=0;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="100" y="800" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-178" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.75;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-171" target="5ah7Fh8-n24Y0VrOONyn-83">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1040" y="960" />
              <mxPoint x="1150" y="960" />
              <mxPoint x="1150" y="1060" />
              <mxPoint x="999" y="1060" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-186" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.75;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-171" target="5ah7Fh8-n24Y0VrOONyn-98">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1040" y="945" />
              <mxPoint x="1200" y="945" />
              <mxPoint x="1200" y="1380" />
              <mxPoint x="1032" y="1380" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-171" value="&lt;div&gt;content_vector = &lt;br&gt;&lt;/div&gt;&lt;div&gt;attention&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;glass=1;gradientColor=#d5739d;fillColor=#e6d0de;strokeColor=#996185;" vertex="1" parent="1">
          <mxGeometry x="1030" y="850" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-189" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-172" target="5ah7Fh8-n24Y0VrOONyn-188">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1310" y="990" />
              <mxPoint x="1310" y="990" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-172" value="alignments " style="rounded=1;whiteSpace=wrap;html=1;shadow=1;glass=1;gradientColor=#ffd966;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="1250" y="885" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-173" value="&lt;div&gt;cumulated_alignments = &lt;br&gt;&lt;/div&gt;&lt;div&gt;next_attention_state&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;glass=1;gradientColor=#ea6b66;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="990" y="970" width="150" height="50" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-182" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-180" target="5ah7Fh8-n24Y0VrOONyn-101">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1065" y="1260" />
              <mxPoint x="590" y="1260" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-180" value="cell_outputs" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;glass=1;" vertex="1" parent="1">
          <mxGeometry x="1005" y="1180" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-185" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-183" target="5ah7Fh8-n24Y0VrOONyn-101">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="660" y="1370" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1090" y="1360" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-183" value="stop_tokens" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;glass=1;" vertex="1" parent="1">
          <mxGeometry x="1030" y="1290" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-190" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.75;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-188" target="5ah7Fh8-n24Y0VrOONyn-98">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1425" y="1590" />
              <mxPoint x="1032" y="1590" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-188" value="alignment_history = previous_alignment_history.write(state.time, alignments)" style="whiteSpace=wrap;html=1;rounded=1;shadow=1;glass=1;" vertex="1" parent="1">
          <mxGeometry x="1270" y="1200" width="310" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-192" value="encoder_outputs" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;glass=1;" vertex="1" parent="1">
          <mxGeometry x="-200" y="400" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-201" value="&lt;div align=&quot;left&quot;&gt;&lt;ol&gt;&lt;li&gt;state_time+1&lt;br&gt;&lt;/li&gt;&lt;li&gt;next_cell_state&lt;br&gt;&lt;/li&gt;&lt;li&gt;context_vector&lt;/li&gt;&lt;li&gt;cummulated_alignments&lt;/li&gt;&lt;li&gt;alignments_history&lt;br&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;glass=1;align=left;" vertex="1" parent="1">
          <mxGeometry x="1150" y="1395" width="200" height="110" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-213" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-202" target="5ah7Fh8-n24Y0VrOONyn-211">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-214" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-202" target="5ah7Fh8-n24Y0VrOONyn-212">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-215" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;gradientColor=#ffa500;fillColor=#ffcd28;strokeColor=#d79b00;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-202" target="5ah7Fh8-n24Y0VrOONyn-230">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="587.5" y="1885" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-220" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-202" target="5ah7Fh8-n24Y0VrOONyn-218">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="195.5" y="1925" />
              <mxPoint x="557.5" y="1925" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-221" value="attention_mechanism.values = Memory=hj" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=16;" vertex="1" connectable="0" parent="5ah7Fh8-n24Y0VrOONyn-220">
          <mxGeometry x="0.6796" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-243" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=16;gradientColor=#ffa500;fillColor=#ffcd28;strokeColor=#d79b00;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-202" target="5ah7Fh8-n24Y0VrOONyn-229">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-202" value="&lt;div&gt;LocalSensitiveAttention&lt;/div&gt;&lt;div&gt;(query=LSTM_output,state = pre_align)&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;glass=1;" vertex="1" parent="1">
          <mxGeometry x="47.5" y="1855" width="295" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-206" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-203" target="5ah7Fh8-n24Y0VrOONyn-202">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="102.5" y="1830" />
              <mxPoint x="102.5" y="1830" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-203" value="LSTM_output" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;glass=1;fillColor=#b1ddf0;strokeColor=#10739e;" vertex="1" parent="1">
          <mxGeometry x="27.5" y="1750" width="150" height="40" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-209" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.75;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-205" target="5ah7Fh8-n24Y0VrOONyn-202">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-205" value="&lt;div&gt;&amp;nbsp;previous_ali = state.ali&lt;/div&gt;&lt;div&gt;:&amp;nbsp; state&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;gradientColor=#97d077;" vertex="1" parent="1">
          <mxGeometry x="227.5" y="1740" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-217" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-211" target="5ah7Fh8-n24Y0VrOONyn-216">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-211" value="alignments" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;glass=1;fillColor=#fff2cc;gradientColor=#ffd966;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="107.5" y="1985" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-212" value="next_attention_state" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;glass=1;fillColor=#f8cecc;gradientColor=#ea6b66;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="267.5" y="1985" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-219" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-216" target="5ah7Fh8-n24Y0VrOONyn-218">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-222" value="aij" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=20;" vertex="1" connectable="0" parent="5ah7Fh8-n24Y0VrOONyn-219">
          <mxGeometry x="-0.3894" y="-6" relative="1" as="geometry">
            <mxPoint x="1" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-216" value="&lt;div&gt;expanded_alignments&lt;/div&gt;&lt;div&gt;[batch_size, 1, memory_time]&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;glass=1;" vertex="1" parent="1">
          <mxGeometry x="97.5" y="2090" width="195" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-224" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=16;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-218" target="5ah7Fh8-n24Y0VrOONyn-223">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-218" value="context=exp-ali*LSA.values" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;glass=1;" vertex="1" parent="1">
          <mxGeometry x="437.5" y="2120" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-228" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=16;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-223" target="5ah7Fh8-n24Y0VrOONyn-227">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-223" value="&lt;div&gt;context = array_ops.squeeze(context, [1])&amp;nbsp; &lt;br&gt;&lt;/div&gt;&lt;div&gt;# [batch_size, memory_size].&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=1;shadow=1;glass=1;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="262.5" y="2205" width="470" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-227" value="attention = context" style="whiteSpace=wrap;html=1;rounded=1;shadow=1;glass=1;fontSize=16;fillColor=#e6d0de;gradientColor=#d5739d;strokeColor=#996185;" vertex="1" parent="1">
          <mxGeometry x="437.5" y="2295" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-239" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.75;entryY=0;entryDx=0;entryDy=0;fontSize=16;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-229" target="5ah7Fh8-n24Y0VrOONyn-237">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1386.5" y="2435" />
              <mxPoint x="1314.5" y="2435" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-229" value="processed_query:&lt;br&gt;&lt;div&gt;[batch_size, 1, attention_dim]&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=1;shadow=1;glass=1;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="1261.5" y="1935" width="270" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-232" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=16;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-230" target="5ah7Fh8-n24Y0VrOONyn-231">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-241" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=16;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-230" target="5ah7Fh8-n24Y0VrOONyn-240">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="861.5" y="1965" />
              <mxPoint x="861.5" y="2768" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-248" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=16;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-230" target="5ah7Fh8-n24Y0VrOONyn-244">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1227.5" y="2815" as="targetPoint" />
            <Array as="points">
              <mxPoint x="837.5" y="1965" />
              <mxPoint x="837.5" y="2935" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-230" value="previous_alignments = state" style="whiteSpace=wrap;html=1;rounded=1;shadow=1;glass=1;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="881.5" y="1935" width="320" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-236" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=16;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-231" target="5ah7Fh8-n24Y0VrOONyn-233">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-231" value="expanded_alignments" style="whiteSpace=wrap;html=1;rounded=1;shadow=1;glass=1;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="941.5" y="2060" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-235" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=16;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-233" target="5ah7Fh8-n24Y0VrOONyn-234">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-252" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=16;gradientColor=#ffa500;fillColor=#ffcd28;strokeColor=#d79b00;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-233" target="5ah7Fh8-n24Y0VrOONyn-251">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1527.5" y="2245" />
              <mxPoint x="1527.5" y="2075" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-233" value="&lt;div&gt;f = &lt;br&gt;&lt;/div&gt;&lt;div&gt;self.location_convolution(expanded_alignments)&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=1;shadow=1;glass=1;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="881.5" y="2215" width="450" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-238" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=16;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-234" target="5ah7Fh8-n24Y0VrOONyn-237">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1106.5" y="2445" />
              <mxPoint x="1151.5" y="2445" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-254" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=16;gradientColor=#ffa500;fillColor=#ffcd28;strokeColor=#d79b00;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-234" target="5ah7Fh8-n24Y0VrOONyn-253">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-234" value="&lt;div&gt;processed_location_features &lt;br&gt;&lt;/div&gt;&lt;div&gt;= self.location_layer(f)&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=1;shadow=1;glass=1;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="926.5" y="2335" width="360" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-242" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=16;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-237" target="5ah7Fh8-n24Y0VrOONyn-240">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-250" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;fontSize=16;gradientColor=#ffa500;fillColor=#ffcd28;strokeColor=#d79b00;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-237" target="5ah7Fh8-n24Y0VrOONyn-249">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-237" value="&lt;div&gt;energy =&lt;/div&gt;&lt;div&gt; _location_sensitive_score&lt;/div&gt;&lt;div&gt;(processed_query, processed_location_features, self.keys)&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;energy = dot(v_a, tanh(W_keys(h_enc) + W_query(h_dec) + W_fil(f) + b_a))&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=1;shadow=1;glass=1;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="1051.5" y="2475" width="350" height="140" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-240" value="&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;#alignments shape = energy shape = [batch_size, max_time]&lt;/div&gt;&lt;div&gt;alignments = &lt;br&gt;&lt;/div&gt;&lt;div&gt;self._probability_fn&lt;/div&gt;&lt;div&gt;(energy, previous_alignments)&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=1;shadow=1;glass=1;fontSize=16;gradientColor=#ffd966;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="1029.5" y="2695" width="394" height="150" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-244" value="&lt;div&gt;next_state = &lt;br&gt;&lt;/div&gt;&lt;div&gt;alignments + previous_alignments&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=1;shadow=1;glass=1;fontSize=16;gradientColor=#ea6b66;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="1091.5" y="2905" width="240" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-249" value="tf.reduce_sum(v_a * tf.tanh(W_keys + W_query + W_fil + b_a), [2])" style="whiteSpace=wrap;html=1;rounded=1;shadow=1;glass=1;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="1547.5" y="2515" width="320" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-251" value="&lt;div&gt;self.location_convolution =&lt;/div&gt;&lt;div&gt; tf.compat.v1.layers.Conv1D&lt;/div&gt;&lt;div&gt;(filters=hparams.attention_filters,&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; kernel_size=hparams.attention_kernel, &lt;br&gt;&lt;/div&gt;&lt;div&gt;padding=&quot;same&quot;, use_bias=True,&lt;/div&gt;&lt;div&gt;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; &amp;nbsp;&amp;nbsp;&amp;nbsp; bias_initializer=tf.zeros_initializer(), &lt;br&gt;&lt;/div&gt;&lt;div&gt;name=&quot;location_features_convolution&quot;)&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=1;shadow=1;glass=1;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="1647.5" y="1975" width="350" height="200" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-253" value="&lt;div&gt;self.location_layer =&lt;/div&gt;&lt;div&gt; tf.compat.v1.layers.Dense&lt;/div&gt;&lt;div&gt;(units=num_units, &lt;br&gt;&lt;/div&gt;&lt;div&gt;use_bias=False,&lt;/div&gt;&lt;div&gt;dtype=tf.float32, name=&quot;location_features_layer&quot;)&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=1;shadow=1;glass=1;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="1617.5" y="2291" width="340" height="148" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-262" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=16;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-258" target="5ah7Fh8-n24Y0VrOONyn-260">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-263" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=16;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-258" target="5ah7Fh8-n24Y0VrOONyn-261">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-258" value="output, new_state = self._cell(inputs, state, scope)" style="whiteSpace=wrap;html=1;rounded=1;shadow=1;glass=1;fontSize=16;fillColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="1286.5" y="265" width="230" height="70" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-259" value="new_state = tf.compat.v1.nn.rnn_cell.LSTMStateTuple(c, h) if self.state_is_tuple else tf.concat(1, [c,&lt;br&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; h])" style="whiteSpace=wrap;html=1;rounded=1;shadow=1;glass=1;fillColor=#FFFFFF;fontSize=16;strokeWidth=6;" vertex="1" parent="1">
          <mxGeometry x="1540" y="485" width="390" height="140" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-260" value="output" style="whiteSpace=wrap;html=1;rounded=1;shadow=1;glass=1;fillColor=#FFFFFF;fontSize=16;strokeWidth=5;" vertex="1" parent="1">
          <mxGeometry x="1596.5" y="270" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-265" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=16;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-261" target="5ah7Fh8-n24Y0VrOONyn-264">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-261" value="new_state" style="whiteSpace=wrap;html=1;rounded=1;shadow=1;glass=1;fillColor=#FFFFFF;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="1341.5" y="395" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-266" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=16;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-264" target="5ah7Fh8-n24Y0VrOONyn-259">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-264" value="&lt;div&gt;prev_c&lt;/div&gt;&lt;div&gt;prev_h&lt;/div&gt;&lt;div&gt;new_c&lt;br&gt;&lt;/div&gt;&lt;div&gt;new_h&lt;/div&gt;&lt;div&gt;h,c&lt;br&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=1;shadow=1;glass=1;fillColor=#FFFFFF;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="1313.25" y="490" width="176.5" height="130" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-273" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;fontSize=16;" edge="1" parent="1" source="5ah7Fh8-n24Y0VrOONyn-271" target="5ah7Fh8-n24Y0VrOONyn-7">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="5ah7Fh8-n24Y0VrOONyn-271" value="input = conv_output" style="whiteSpace=wrap;html=1;rounded=1;shadow=1;glass=1;strokeWidth=6;fillColor=#FFFFFF;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="65" y="310" width="120" height="60" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
