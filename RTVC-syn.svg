<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" style="background-color: rgb(255, 255, 255);" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="4392px" height="6947px" viewBox="-0.5 -0.5 4392 6947"><defs><linearGradient x1="0%" y1="0%" x2="0%" y2="100%" id="mx-gradient-d5e8d4-1-97d077-1-s-0"><stop offset="0%" style="stop-color:#d5e8d4"/><stop offset="100%" style="stop-color:#97d077"/></linearGradient><linearGradient x1="0%" y1="0%" x2="0%" y2="100%" id="mx-gradient-ffffff-0.9-ffffff-0.1-s-0"><stop offset="0%" style="stop-color:#ffffff;stop-opacity:0.9"/><stop offset="100%" style="stop-color:#ffffff;stop-opacity:0.1"/></linearGradient><linearGradient x1="0%" y1="0%" x2="0%" y2="100%" id="mx-gradient-e6d0de-1-d5739d-1-s-0"><stop offset="0%" style="stop-color:#e6d0de"/><stop offset="100%" style="stop-color:#d5739d"/></linearGradient><linearGradient x1="0%" y1="0%" x2="0%" y2="100%" id="mx-gradient-fff2cc-1-ffd966-1-s-0"><stop offset="0%" style="stop-color:#fff2cc"/><stop offset="100%" style="stop-color:#ffd966"/></linearGradient><linearGradient x1="0%" y1="0%" x2="0%" y2="100%" id="mx-gradient-f8cecc-1-ea6b66-1-s-0"><stop offset="0%" style="stop-color:#f8cecc"/><stop offset="100%" style="stop-color:#ea6b66"/></linearGradient><clipPath id="mx-clip-4-1701-852-26-0"><rect x="4" y="1701" width="852" height="26"/></clipPath><clipPath id="mx-clip-4-1727-852-26-0"><rect x="4" y="1727" width="852" height="26"/></clipPath><clipPath id="mx-clip-4-1753-852-26-0"><rect x="4" y="1753" width="852" height="26"/></clipPath><clipPath id="mx-clip-4-1779-852-26-0"><rect x="4" y="1779" width="852" height="26"/></clipPath><clipPath id="mx-clip-4-1805-852-26-0"><rect x="4" y="1805" width="852" height="26"/></clipPath><clipPath id="mx-clip-4-1831-852-26-0"><rect x="4" y="1831" width="852" height="26"/></clipPath><clipPath id="mx-clip-4-1857-852-26-0"><rect x="4" y="1857" width="852" height="26"/></clipPath><clipPath id="mx-clip-4-1883-852-402-0"><rect x="4" y="1883" width="852" height="402"/></clipPath><clipPath id="mx-clip-4-2285-852-26-0"><rect x="4" y="2285" width="852" height="26"/></clipPath><clipPath id="mx-clip-4-2311-852-232-0"><rect x="4" y="2311" width="852" height="232"/></clipPath><clipPath id="mx-clip-4-2543-852-134-0"><rect x="4" y="2543" width="852" height="134"/></clipPath><clipPath id="mx-clip-4-2677-852-134-0"><rect x="4" y="2677" width="852" height="134"/></clipPath><clipPath id="mx-clip-4-2811-852-134-0"><rect x="4" y="2811" width="852" height="134"/></clipPath><clipPath id="mx-clip-4-2945-852-134-0"><rect x="4" y="2945" width="852" height="134"/></clipPath></defs><g><rect x="2890" y="20" width="120" height="60" fill="#e1d5e7" stroke="#9673a6" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 50px; margin-left: 2891px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">synthesizer-RTVC</div></div></div></foreignObject><text x="2950" y="54" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">synthesizer-RTVC</text></switch></g><path d="M 2465 350 L 2490 350 L 2543.63 350" fill="none" stroke="#d79b00" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2548.88 350 L 2541.88 353.5 L 2543.63 350 L 2541.88 346.5 Z" fill="#d79b00" stroke="#d79b00" stroke-miterlimit="10" pointer-events="all"/><path d="M 2637.5 800 L 2375 800 L 2375 1060 L 2372 1060 L 2372 1073.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2372 1078.88 L 2368.5 1071.88 L 2372 1073.63 L 2375.5 1071.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2637.5" y="770" width="160" height="60" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 158px; height: 1px; padding-top: 800px; margin-left: 2639px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>psk-Embbed</div><div>tiled_embed_targets<br /></div></div></div></div></foreignObject><text x="2718" y="804" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">psk-Embbed...</text></switch></g><path d="M 3065 330 L 3065 350 L 3065 340 L 3065 353.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3065 358.88 L 3061.5 351.88 L 3065 353.63 L 3068.5 351.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="3005" y="290" width="120" height="40" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 310px; margin-left: 3006px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">TacotronDecoderCell</div></div></div></foreignObject><text x="3065" y="314" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">TacotronDecoderCell</text></switch></g><path d="M 2670 345 L 2690 345 L 2690 350 L 2703.63 350" fill="none" stroke="#d79b00" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2708.88 350 L 2701.88 353.5 L 2703.63 350 L 2701.88 346.5 Z" fill="#d79b00" stroke="#d79b00" stroke-miterlimit="10" pointer-events="all"/><path d="M 2605 370.5 L 2615 370.5 L 2615 390.5 L 2625.5 390.5 L 2610 409.5 L 2594.5 390.5 L 2605 390.5 Z" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2550" y="320" width="120" height="50" rx="7.5" ry="7.5" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 345px; margin-left: 2551px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">EncoderConvlutions</div></div></div></foreignObject><text x="2610" y="349" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">EncoderConvlutions</text></switch></g><path d="M 2610 460 L 2610 490 L 2287.5 490 L 2287.5 523.63" fill="none" stroke="#d79b00" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2287.5 528.88 L 2284 521.88 L 2287.5 523.63 L 2291 521.88 Z" fill="#d79b00" stroke="#d79b00" stroke-miterlimit="10" pointer-events="all"/><rect x="2550" y="410" width="120" height="50" rx="7.5" ry="7.5" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 435px; margin-left: 2551px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">EncoderRNN</div></div></div></foreignObject><text x="2610" y="439" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">EncoderRNN</text></switch></g><path d="M 3065 420 L 3065 440 L 3065 430 L 3065 443.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3065 448.88 L 3061.5 441.88 L 3065 443.63 L 3068.5 441.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="3005" y="360" width="120" height="60" rx="9" ry="9" fill="#99ffcc" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 390px; margin-left: 3006px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">PreNet</div></div></div></foreignObject><text x="3065" y="394" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">PreNet</text></switch></g><path d="M 3065 510 L 3065 530 L 3065 520 L 3065 533.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3065 538.88 L 3061.5 531.88 L 3065 533.63 L 3068.5 531.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2975" y="450" width="180" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 178px; height: 1px; padding-top: 480px; margin-left: 2976px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">LocalsensitiveAttention</div></div></div></foreignObject><text x="3065" y="484" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">LocalsensitiveAttention</text></switch></g><path d="M 3125 570 L 3198.63 570" fill="none" stroke="#d79b00" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3203.88 570 L 3196.88 573.5 L 3198.63 570 L 3196.88 566.5 Z" fill="#d79b00" stroke="#d79b00" stroke-miterlimit="10" pointer-events="all"/><rect x="3005" y="540" width="120" height="60" rx="9" ry="9" fill="#cc6600" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 570px; margin-left: 3006px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">DecoderRNN</div></div></div></foreignObject><text x="3065" y="574" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">DecoderRNN</text></switch></g><path d="M 3125 670 L 3228.63 670" fill="none" stroke="#d79b00" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3233.88 670 L 3226.88 673.5 L 3228.63 670 L 3226.88 666.5 Z" fill="#d79b00" stroke="#d79b00" stroke-miterlimit="10" pointer-events="all"/><rect x="3005" y="640" width="120" height="60" rx="9" ry="9" fill="#ff99ff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 670px; margin-left: 3006px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">FrameProjection</div></div></div></foreignObject><text x="3065" y="674" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">FrameProjection</text></switch></g><path d="M 3130 840 L 3183.63 840" fill="none" stroke="#d79b00" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3188.88 840 L 3181.88 843.5 L 3183.63 840 L 3181.88 836.5 Z" fill="#d79b00" stroke="#d79b00" stroke-miterlimit="10" pointer-events="all"/><rect x="3010" y="810" width="120" height="60" rx="9" ry="9" fill="#ffb366" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 840px; margin-left: 3011px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">stopProjection</div></div></div></foreignObject><text x="3070" y="844" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">stopProjection</text></switch></g><path d="M 2780 350 L 2793.63 350" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2798.88 350 L 2791.88 353.5 L 2793.63 350 L 2791.88 346.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2710" y="320" width="70" height="60" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 2717 320 L 2717 380 M 2773 320 L 2773 380" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 55px; height: 1px; padding-top: 350px; margin-left: 2718px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">conv1d</div></div></div></foreignObject><text x="2745" y="354" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">conv1d</text></switch></g><path d="M 2860 380 L 2860 393.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2860 398.88 L 2856.5 391.88 L 2860 393.63 L 2863.5 391.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2800" y="320" width="120" height="60" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 2812 320 L 2812 380 M 2908 320 L 2908 380" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 95px; height: 1px; padding-top: 350px; margin-left: 2813px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>tf.compat.</div><div>v1.layers.</div><div>conv1d()</div></div></div></div></foreignObject><text x="2860" y="354" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">tf.compat....</text></switch></g><path d="M 2860 460 L 2860 483.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2860 488.88 L 2856.5 481.88 L 2860 483.63 L 2863.5 481.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2800" y="400" width="120" height="60" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 2812 400 L 2812 460 M 2908 400 L 2908 460" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 95px; height: 1px; padding-top: 430px; margin-left: 2813px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>tf.batch_normalize()</div></div></div></div></foreignObject><text x="2860" y="434" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">tf.batch_normali...</text></switch></g><path d="M 2860 550 L 2860 570 L 2860 550 L 2860 563.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2860 568.88 L 2856.5 561.88 L 2860 563.63 L 2863.5 561.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2800" y="490" width="120" height="60" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 2812 490 L 2812 550 M 2908 490 L 2908 550" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 95px; height: 1px; padding-top: 520px; margin-left: 2813px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">activation</div></div></div></foreignObject><text x="2860" y="524" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">activation</text></switch></g><path d="M 2800 600 L 2741.37 600" fill="none" stroke="#d79b00" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2736.12 600 L 2743.12 596.5 L 2741.37 600 L 2743.12 603.5 Z" fill="#d79b00" stroke="#d79b00" stroke-miterlimit="10" pointer-events="all"/><rect x="2800" y="570" width="120" height="60" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 2812 570 L 2812 630 M 2908 570 L 2908 630" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 95px; height: 1px; padding-top: 600px; margin-left: 2813px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">tf.dropout()</div></div></div></foreignObject><text x="2860" y="604" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">tf.dropout()</text></switch></g><path d="M 2287.5 590 L 2287.5 610 L 2288 610 L 2288 608.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2288 613.88 L 2284.5 606.88 L 2288 608.63 L 2291.5 606.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2145" y="530" width="285" height="60" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 2174 530 L 2174 590 M 2401 530 L 2401 590" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 226px; height: 1px; padding-top: 560px; margin-left: 2174px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>_fw_cell=zoneoutLSTMCell()</div><div>_bw_cell = ZoneoutLSTMCell</div></div></div></div></foreignObject><text x="2288" y="564" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">_fw_cell=zoneoutLSTMCell()...</text></switch></g><path d="M 2287.5 680 L 2287.5 693.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2287.5 698.88 L 2284 691.88 L 2287.5 693.63 L 2291 691.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 2140 650 L 1960 650 L 1960 576.37" fill="none" stroke="#d79b00" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1960 571.12 L 1963.5 578.12 L 1960 576.37 L 1956.5 578.12 Z" fill="#d79b00" stroke="#d79b00" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 656px; margin-left: 1983px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; "><div>bidirectional_dynamic_rnn</div></div></div></div></foreignObject><text x="1983" y="660" fill="#000000" font-family="Helvetica" font-size="14px" text-anchor="middle">bidirectional_dynamic_rnn</text></switch></g><rect x="2140" y="620" width="295" height="60" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 2170 620 L 2170 680 M 2405 620 L 2405 680" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 235px; height: 1px; padding-top: 650px; margin-left: 2171px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>outputs, (fw_state, bw_state) = tf.compat.v1.nn.bidirectional_dynamic_rnn(</div></div></div></div></foreignObject><text x="2288" y="654" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">outputs, (fw_state, bw_state) = tf.comp...</text></switch></g><path d="M 2287.5 760 L 2287.5 800 L 2273.5 800 L 2273.5 833.63" fill="none" stroke="#d79b00" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2273.5 838.88 L 2270 831.88 L 2273.5 833.63 L 2277 831.88 Z" fill="#d79b00" stroke="#d79b00" stroke-miterlimit="10" pointer-events="all"/><rect x="2180" y="700" width="215" height="60" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 2202 700 L 2202 760 M 2373 700 L 2373 760" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 170px; height: 1px; padding-top: 730px; margin-left: 2203px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">tf.concat(outputs,axis=2)</div></div></div></foreignObject><text x="2288" y="734" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">tf.concat(outputs,axis=2)</text></switch></g><path d="M 3696.5 570 L 3735.13 570" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3740.38 570 L 3733.38 573.5 L 3735.13 570 L 3733.38 566.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="3426.5" y="540" width="270" height="60" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 3453.5 540 L 3453.5 600 M 3669.5 540 L 3669.5 600" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 215px; height: 1px; padding-top: 570px; margin-left: 3454px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">self._cell()=<div>tf.compat.v1</div><div>rnn.rnn_cell.</div>MultiRNNCell([ZoneoutLSTMCell(size)])</div></div></div></foreignObject><text x="3562" y="574" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">self._cell()=...</text></switch></g><path d="M 3360 570 L 3419.63 570" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3424.88 570 L 3417.88 573.5 L 3419.63 570 L 3417.88 566.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="3205" y="540" width="155" height="60" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 3221 540 L 3221 600 M 3344 540 L 3344 600" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 121px; height: 1px; padding-top: 570px; margin-left: 3221px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">self._cell(input,state)</div></div></div></foreignObject><text x="3282" y="574" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">self._cell(input,sta...</text></switch></g><rect x="3235" y="640" width="385" height="60" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 3274 640 L 3274 700 M 3581 640 L 3581 700" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 306px; height: 1px; padding-top: 670px; margin-left: 3274px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">output_per_steps*num_mels=slef.dense(inputs)</div></div></div></foreignObject><text x="3428" y="674" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">output_per_steps*num_mels=slef.dense(inputs)</text></switch></g><path d="M 3430 840 L 3450 840 L 3450 815 L 3463.63 815" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3468.88 815 L 3461.88 818.5 L 3463.63 815 L 3461.88 811.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 3430 840 L 3450 840 L 3450 880 L 3463.63 880" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3468.88 880 L 3461.88 883.5 L 3463.63 880 L 3461.88 876.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="3190" y="810" width="240" height="60" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 3214 810 L 3214 870 M 3406 810 L 3406 870" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 190px; height: 1px; padding-top: 840px; margin-left: 3214px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">tf.layers.dense(inputs)</div></div></div></foreignObject><text x="3309" y="844" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">tf.layers.dense(inputs)</text></switch></g><rect x="3470" y="770" width="120" height="60" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 3482 770 L 3482 830 M 3578 770 L 3578 830" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 95px; height: 1px; padding-top: 800px; margin-left: 3483px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">train:output</div></div></div></foreignObject><text x="3530" y="804" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">train:output</text></switch></g><rect x="3470" y="850" width="120" height="60" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 3482 850 L 3482 910 M 3578 850 L 3578 910" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 95px; height: 1px; padding-top: 880px; margin-left: 3483px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>not train:</div><div>tf.nn,sigmod(output)<br /></div></div></div></div></foreignObject><text x="3530" y="884" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">not train:...</text></switch></g><path d="M 2260 1320 L 2260 1348 L 2245 1348 L 2245 1368.63" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="stroke"/><path d="M 2245 1373.88 L 2241.5 1366.88 L 2245 1368.63 L 2248.5 1366.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 2300 1320.5 L 2310 1320.5 L 2310 1335 L 2555 1335 L 2555 1540.5 L 2565.5 1540.5 L 2550 1559.5 L 2534.5 1540.5 L 2545 1540.5 L 2545 1345 L 2300 1345 Z" fill="none" stroke="#000000" stroke-miterlimit="1.42" pointer-events="all"/><path d="M 2555 1540.5 L 2565.5 1540.5 L 2550 1559.5 L 2534.5 1540.5 L 2545 1540.5" fill="none" stroke="#000000" stroke-miterlimit="4" pointer-events="all"/><rect x="2230" y="1260" width="150" height="60" fill="#dae8fc" stroke="#6c8ebf" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 148px; height: 1px; padding-top: 1290px; margin-left: 2231px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">TacotronDecoderCell()</div></div></div></foreignObject><text x="2305" y="1294" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">TacotronDecoderCell()</text></switch></g><path d="M 2495 1290 L 2515 1290 L 2495 1290 L 2508.63 1290" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2513.88 1290 L 2506.88 1293.5 L 2508.63 1290 L 2506.88 1286.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><ellipse cx="2450" cy="1290" rx="45" ry="30" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 88px; height: 1px; padding-top: 1290px; margin-left: 2406px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">inputs</div></div></div></foreignObject><text x="2450" y="1294" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">inputs</text></switch></g><path d="M 2380 1290 L 2400 1290 L 2385 1290 L 2398.63 1290" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2403.88 1290 L 2396.88 1293.5 L 2398.63 1290 L 2396.88 1286.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 2635 1290 L 2657.5 1290 L 2657.5 1160 L 2673.63 1160" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2678.88 1160 L 2671.88 1163.5 L 2673.63 1160 L 2671.88 1156.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2515" y="1260" width="120" height="60" rx="9" ry="9" fill="#99ffcc" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 1290px; margin-left: 2516px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">Prenet</div></div></div></foreignObject><text x="2575" y="1294" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Prenet</text></switch></g><path d="M 3110 1240 L 3130 1240 L 3130 1140 L 3143.63 1140" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3148.88 1140 L 3141.88 1143.5 L 3143.63 1140 L 3141.88 1136.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 3050 1270 L 3050 1380 L 3093.63 1380" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3098.88 1380 L 3091.88 1383.5 L 3093.63 1380 L 3091.88 1376.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2990" y="1210" width="120" height="60" rx="9" ry="9" fill="#cc6600" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 1240px; margin-left: 2991px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">DecoderRNN</div></div></div></foreignObject><text x="3050" y="1244" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">DecoderRNN</text></switch></g><path d="M 3310 1230 L 3360 1230 L 3360 1250 L 3373.63 1250" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3378.88 1250 L 3371.88 1253.5 L 3373.63 1250 L 3371.88 1246.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="3140" y="1200" width="170" height="60" rx="9" ry="9" fill="url(#mx-gradient-d5e8d4-1-97d077-1-s-0)" stroke="#82b366" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 168px; height: 1px; padding-top: 1230px; margin-left: 3141px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "> previous_ali = state.ali</div></div></div></foreignObject><text x="3225" y="1234" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle"> previous_ali = state.ali</text></switch></g><path d="M 3470 1220 L 3470 1010 L 2080 1010 L 2080 2220 L 2170 2220 L 2170 2280 L 2171.37 2280" fill="none" stroke="#d79b00" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2166.12 2280 L 2173.12 2276.5 L 2171.37 2280 L 2173.12 2283.5 Z" fill="#d79b00" stroke="#d79b00" stroke-miterlimit="10" pointer-events="all"/><path d="M 3500 1220 L 3500 1167.5 L 3793.63 1167.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3798.88 1167.5 L 3791.88 1171 L 3793.63 1167.5 L 3791.88 1164 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 3490 1220 L 3490 1125 L 3573.63 1125" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3578.88 1125 L 3571.88 1128.5 L 3573.63 1125 L 3571.88 1121.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 3500 1265 L 3520 1265 L 3520 1255 L 3533.63 1255" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3538.88 1255 L 3531.88 1258.5 L 3533.63 1255 L 3531.88 1251.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="3380" y="1220" width="120" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 1250px; margin-left: 3381px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">_compute_attention()</div></div></div></foreignObject><text x="3440" y="1254" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">_compute_attention()</text></switch></g><path d="M 3467.5 1410 L 3467.5 1430 L 3467.5 1420 L 3467.5 1433.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3467.5 1438.88 L 3464 1431.88 L 3467.5 1433.63 L 3471 1431.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 3386.25 1410 L 3386.33 1580 L 3413.63 1580" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3418.88 1580 L 3411.88 1583.5 L 3413.63 1580 L 3411.88 1576.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="3305" y="1350" width="325" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 323px; height: 1px; padding-top: 1380px; margin-left: 3306px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">projections_input = tf.concat(LSTM_output,context_vector,axis=-1)</div></div></div></foreignObject><text x="3468" y="1384" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">projections_input = tf.concat(LSTM_output,context_vect...</text></switch></g><path d="M 3527.5 1470 L 3547.5 1470 L 3535 1470 L 3548.63 1470" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3553.88 1470 L 3546.88 1473.5 L 3548.63 1470 L 3546.88 1466.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="3407.5" y="1440" width="120" height="60" rx="9" ry="9" fill="#ff99ff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 1470px; margin-left: 3409px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">FrameProjection</div></div></div></foreignObject><text x="3468" y="1474" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">FrameProjection</text></switch></g><path d="M 3540 1580 L 3573.63 1580" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3578.88 1580 L 3571.88 1583.5 L 3573.63 1580 L 3571.88 1576.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="3420" y="1550" width="120" height="60" rx="9" ry="9" fill="#ffb366" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 1580px; margin-left: 3421px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">stopProjection</div></div></div></foreignObject><text x="3480" y="1584" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">stopProjection</text></switch></g><path d="M 3640 1710 L 3735.63 1710" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3740.88 1710 L 3733.88 1713.5 L 3735.63 1710 L 3733.88 1706.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 3407.5 1710 L 3140 1710 L 3140 1656.37" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3140 1651.12 L 3143.5 1658.12 L 3140 1656.37 L 3136.5 1658.12 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1668px; margin-left: 3142px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">3</div></div></div></foreignObject><text x="3142" y="1673" fill="#000000" font-family="Helvetica" font-size="14px" text-anchor="middle">3</text></switch></g><rect x="3407.5" y="1680" width="232.5" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 231px; height: 1px; padding-top: 1710px; margin-left: 3409px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">next_state = TacotronDecoderCellState()</div></div></div></foreignObject><text x="3524" y="1714" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">next_state = TacotronDecoderCellState()</text></switch></g><path d="M 3120 1590 L 3120 1420 L 2713 1420 L 2713 1397.5 L 2351.37 1397.5" fill="none" stroke="#d6b656" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2346.12 1397.5 L 2353.12 1394 L 2351.37 1397.5 L 2353.12 1401 Z" fill="#d6b656" stroke="#d6b656" stroke-miterlimit="10" pointer-events="all"/><rect x="3080" y="1590" width="120" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="3080" y="1590" width="120" height="60" rx="9" ry="9" fill="#d80073" stroke="#a50040" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 1620px; margin-left: 3081px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #ffffff; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>return==</div><div>cell_outputs,</div><div>stop_tokens,</div><div>next_state<br /></div></div></div></div></foreignObject><text x="3140" y="1624" fill="#ffffff" font-family="Helvetica" font-size="12px" text-anchor="middle">return==...</text></switch></g><path d="M 2280 2295 L 2325 2295 L 2325 2315 L 2363.63 2315" fill="none" stroke="#d6b656" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2368.88 2315 L 2361.88 2318.5 L 2363.63 2315 L 2361.88 2311.5 Z" fill="#d6b656" stroke="#d6b656" stroke-miterlimit="10" pointer-events="all"/><rect x="2050" y="2280" width="230" height="30" rx="4.5" ry="4.5" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2050" y="2280" width="230" height="30" rx="4.5" ry="4.5" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 2073 2280 L 2073 2310 M 2257 2280 L 2257 2310" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 2055.65 2279 Q 2049 2279 2049 2285.65 L 2049 2292 Q 2165 2301 2281 2292 L 2281 2285.65 Q 2281 2279 2274.35 2279 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 181px; height: 1px; padding-top: 2295px; margin-left: 2074px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">_compute_attention()</div></div></div></foreignObject><text x="2165" y="2299" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">_compute_attention()</text></switch></g><path d="M 2467 1110 L 2558.5 1110 L 2558.5 1090 L 2643.63 1090" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2648.88 1090 L 2641.88 1093.5 L 2643.63 1090 L 2641.88 1086.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1110px; margin-left: 2532px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; "><div>SHAPE=</div><div>Batch_size,</div><div>time-step-num,</div><div>RNN-hidden-VecDim]<br /></div></div></div></div></foreignObject><text x="2532" y="1114" fill="#000000" font-family="Helvetica" font-size="14px" text-anchor="middle">SHAPE=...</text></switch></g><path d="M 2367.63 1137.56 L 2376.37 1142.44 L 2323.99 1236.24 L 2332.72 1241.12 L 2305 1260 L 2306.53 1226.49 L 2315.26 1231.37 Z" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2277" y="1080" width="190" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2277" y="1080" width="190" height="60" rx="9" ry="9" fill="#ffe6cc" stroke="#d79b00" pointer-events="all"/><path d="M 2287.15 1079 Q 2276 1079 2276 1090.15 L 2276 1104 Q 2372 1122 2468 1104 L 2468 1090.15 Q 2468 1079 2456.85 1079 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 188px; height: 1px; padding-top: 1110px; margin-left: 2278px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">tf.concat(axis=2)<br /><div>encoder_cond_output</div>==就是 attention 的 memory</div></div></div></foreignObject><text x="2372" y="1114" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">tf.concat(axis=2)...</text></switch></g><path d="M 2390 245.5 L 2400 245.5 L 2400 300.5 L 2410.5 300.5 L 2395 319.5 L 2379.5 300.5 L 2390 300.5 Z" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2237.5" y="195" width="315" height="50" rx="7.5" ry="7.5" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2237.5" y="195" width="315" height="50" rx="7.5" ry="7.5" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 2246.15 194 Q 2236.5 194 2236.5 203.65 L 2236.5 215 Q 2395 230 2553.5 215 L 2553.5 203.65 Q 2553.5 194 2543.85 194 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 313px; height: 1px; padding-top: 220px; margin-left: 2239px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>embedded_inputs = tf.nn.embedding_lookup(</div><div>self.embedding_table, tower_inputs[i])</div></div></div></div></foreignObject><text x="2395" y="224" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">embedded_inputs = tf.nn.embedding_lookup(...</text></switch></g><path d="M 2195 120 L 2195 157.5 L 2316.33 157.5 L 2316.26 188.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2316.25 193.88 L 2312.77 186.87 L 2316.26 188.63 L 2319.77 186.89 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2125" y="80" width="140" height="40" rx="6" ry="6" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2125" y="80" width="140" height="40" rx="6" ry="6" fill="#ffff88" stroke="#36393d" pointer-events="all"/><path d="M 2132.15 79 Q 2124 79 2124 87.15 L 2124 96 Q 2195 108 2266 96 L 2266 87.15 Q 2266 79 2257.85 79 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 138px; height: 1px; padding-top: 100px; margin-left: 2126px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">tower_inputs</div></div></div></foreignObject><text x="2195" y="104" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">tower_inputs</text></switch></g><rect x="2325" y="320" width="140" height="60" fill="#dae8fc" stroke="#6c8ebf" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 138px; height: 1px; padding-top: 350px; margin-left: 2326px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">TacotronEncoderCell</div></div></div></foreignObject><text x="2395" y="354" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">TacotronEncoderCell</text></switch></g><path d="M 2260 435 L 2543.63 435" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2548.88 435 L 2541.88 438.5 L 2543.63 435 L 2541.88 431.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2070" y="405" width="190" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2070" y="405" width="190" height="60" rx="9" ry="9" fill="#ffff88" stroke="#36393d" pointer-events="all"/><path d="M 2080.15 404 Q 2069 404 2069 415.15 L 2069 429 Q 2165 447 2261 429 L 2261 415.15 Q 2261 404 2249.85 404 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 188px; height: 1px; padding-top: 435px; margin-left: 2071px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>tower_input_lengths=length</div></div></div></div></foreignObject><text x="2165" y="439" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">tower_input_lengths=length</text></switch></g><path d="M 2243.5 900 L 2260 900 L 2260 1110 L 2270.63 1110" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2275.88 1110 L 2268.88 1113.5 L 2270.63 1110 L 2268.88 1106.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 2740 1430 L 2740 1355 L 2730 1355 L 2730 1286.37" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2730 1281.12 L 2733.5 1288.12 L 2730 1286.37 L 2726.5 1288.12 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 2740 1430 L 2740 1390 L 2890 1390 L 2890 1356.37" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2890 1351.12 L 2893.5 1358.12 L 2890 1356.37 L 2886.5 1358.12 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2615" y="1430" width="250" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2615" y="1430" width="250" height="60" rx="9" ry="9" fill="#f8cecc" stroke="#b85450" pointer-events="all"/><path d="M 2625.15 1429 Q 2614 1429 2614 1440.15 L 2614 1454 Q 2740 1472 2866 1454 L 2866 1440.15 Q 2866 1429 2854.85 1429 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 1460px; margin-left: 2616px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>decoder_init_state = <br /></div><div>decoder_cell.zero_state</div><div>(batch_size=batch_size,  dtype=tf.float32)</div></div></div></div></foreignObject><text x="2740" y="1464" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">decoder_init_state =...</text></switch></g><path d="M 2800 1160 L 2820 1160 L 2820 1210 L 2810 1210 L 2810 1220 L 2823.63 1220" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2828.88 1220 L 2821.88 1223.5 L 2823.63 1220 L 2821.88 1216.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2680" y="1130" width="120" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2680" y="1130" width="120" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 2690.15 1129 Q 2679 1129 2679 1140.15 L 2679 1154 Q 2740 1172 2801 1154 L 2801 1140.15 Q 2801 1129 2789.85 1129 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 1160px; margin-left: 2681px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">prenet_output</div></div></div></foreignObject><text x="2740" y="1164" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">prenet_output</text></switch></g><path d="M 2950 1320 L 2970 1320 L 2970 1255 L 2983.63 1255" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2988.88 1255 L 2981.88 1258.5 L 2983.63 1255 L 2981.88 1251.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2830" y="1290" width="120" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2830" y="1290" width="120" height="60" rx="9" ry="9" fill="#f8cecc" stroke="#b85450" pointer-events="all"/><path d="M 2840.15 1289 Q 2829 1289 2829 1300.15 L 2829 1314 Q 2890 1332 2951 1314 L 2951 1300.15 Q 2951 1289 2939.85 1289 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 1320px; margin-left: 2831px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">state.cell_state</div></div></div></foreignObject><text x="2890" y="1324" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">state.cell_state</text></switch></g><path d="M 2770 1250 L 2800 1250 L 2800 1220 L 2823.63 1220" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2828.88 1220 L 2821.88 1223.5 L 2823.63 1220 L 2821.88 1216.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2680" y="1220" width="90" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2680" y="1220" width="90" height="60" rx="9" ry="9" fill="#f8cecc" stroke="#b85450" pointer-events="all"/><path d="M 2690.15 1219 Q 2679 1219 2679 1230.15 L 2679 1244 Q 2725 1262 2771 1244 L 2771 1230.15 Q 2771 1219 2759.85 1219 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 88px; height: 1px; padding-top: 1250px; margin-left: 2681px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">state.attention</div></div></div></foreignObject><text x="2725" y="1254" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">state.attention</text></switch></g><path d="M 2950 1220 L 2970 1220 L 2970 1240 L 2983.63 1240" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2988.88 1240 L 2981.88 1243.5 L 2983.63 1240 L 2981.88 1236.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2830" y="1190" width="120" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2830" y="1190" width="120" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 2840.15 1189 Q 2829 1189 2829 1200.15 L 2829 1214 Q 2890 1232 2951 1214 L 2951 1200.15 Q 2951 1189 2939.85 1189 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 1220px; margin-left: 2831px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">LSTM_input</div></div></div></foreignObject><text x="2890" y="1224" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">LSTM_input</text></switch></g><path d="M 3300 1140 L 3440 1140 L 3440 1213.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3440 1218.88 L 3436.5 1211.88 L 3440 1213.63 L 3443.5 1211.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 3225 1160 L 3225 1180 L 3330 1180 L 3330 1343.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3330 1348.88 L 3326.5 1341.88 L 3330 1343.63 L 3333.5 1341.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="3150" y="1120" width="150" height="40" rx="6" ry="6" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="3150" y="1120" width="150" height="40" rx="6" ry="6" fill="#b0e3e6" stroke="#0e8088" pointer-events="all"/><path d="M 3157.15 1119 Q 3149 1119 3149 1127.15 L 3149 1136 Q 3225 1148 3301 1136 L 3301 1127.15 Q 3301 1119 3292.85 1119 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 148px; height: 1px; padding-top: 1140px; margin-left: 3151px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">LSTM_output</div></div></div></foreignObject><text x="3225" y="1144" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">LSTM_output</text></switch></g><path d="M 3220 1380 L 3280 1380 L 3280 1790 L 3524 1790 L 3524 1746.37" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3524 1741.12 L 3527.5 1748.12 L 3524 1746.37 L 3520.5 1748.12 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1790px; margin-left: 3472px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">2</div></div></div></foreignObject><text x="3472" y="1794" fill="#000000" font-family="Helvetica" font-size="14px" text-anchor="middle">2</text></switch></g><rect x="3100" y="1350" width="120" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="3100" y="1350" width="120" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 3110.15 1349 Q 3099 1349 3099 1360.15 L 3099 1374 Q 3160 1392 3221 1374 L 3221 1360.15 Q 3221 1349 3209.85 1349 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 1380px; margin-left: 3101px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>next_cell_state</div></div></div></div></foreignObject><text x="3160" y="1384" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">next_cell_state</text></switch></g><path d="M 2830 1090 L 3410 1090 L 3410 1213.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3410 1218.88 L 3406.5 1211.88 L 3410 1213.63 L 3413.5 1211.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2650" y="1060" width="180" height="60" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2650" y="1060" width="180" height="60" fill="#ffe6cc" stroke="#d79b00" pointer-events="all"/><path d="M 2651 1059 Q 2649 1059 2649 1061 L 2649 1084 Q 2740 1102 2831 1084 L 2831 1061 Q 2831 1059 2829 1059 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 178px; height: 1px; padding-top: 1090px; margin-left: 2651px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">LocallSensitiveAttention</div></div></div></foreignObject><text x="2740" y="1094" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">LocallSensitiveAttention</text></switch></g><path d="M 3590 1140 L 3590 1220 L 3700 1220 L 3700 1320 L 3548.83 1320 L 3548.77 1343.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3548.75 1348.88 L 3545.27 1341.87 L 3548.77 1343.63 L 3552.27 1341.89 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 3680 1140 L 3680 1205 L 3750 1205 L 3750 1640 L 3581.83 1640 L 3581.87 1673.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3581.87 1678.88 L 3578.37 1671.89 L 3581.87 1673.63 L 3585.37 1671.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1640px; margin-left: 3632px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">3</div></div></div></foreignObject><text x="3632" y="1644" fill="#000000" font-family="Helvetica" font-size="14px" text-anchor="middle">3</text></switch></g><rect x="3580" y="1110" width="120" height="30" rx="4.5" ry="4.5" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="3580" y="1110" width="120" height="30" rx="4.5" ry="4.5" fill="url(#mx-gradient-e6d0de-1-d5739d-1-s-0)" stroke="#996185" pointer-events="all"/><path d="M 3585.65 1109 Q 3579 1109 3579 1115.65 L 3579 1122 Q 3640 1131 3701 1122 L 3701 1115.65 Q 3701 1109 3694.35 1109 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 1125px; margin-left: 3581px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>content_vector = <br /></div><div>attention<br /></div></div></div></div></foreignObject><text x="3640" y="1129" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">content_vector =...</text></switch></g><path d="M 3860 1175 L 3860 1250 L 3860 1453.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3860 1458.88 L 3856.5 1451.88 L 3860 1453.63 L 3863.5 1451.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="3800" y="1145" width="120" height="30" rx="4.5" ry="4.5" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="3800" y="1145" width="120" height="30" rx="4.5" ry="4.5" fill="url(#mx-gradient-fff2cc-1-ffd966-1-s-0)" stroke="#d6b656" pointer-events="all"/><path d="M 3805.65 1144 Q 3799 1144 3799 1150.65 L 3799 1157 Q 3860 1166 3921 1157 L 3921 1150.65 Q 3921 1144 3914.35 1144 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 1160px; margin-left: 3801px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">alignments </div></div></div></foreignObject><text x="3860" y="1164" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">alignments </text></switch></g><path d="M 3690 1255 L 3710 1255 L 3710 1690 L 3646.37 1690" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3641.12 1690 L 3648.12 1686.5 L 3646.37 1690 L 3648.12 1693.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1696px; margin-left: 3688px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">4</div></div></div></foreignObject><text x="3688" y="1700" fill="#000000" font-family="Helvetica" font-size="14px" text-anchor="middle">4</text></switch></g><rect x="3540" y="1230" width="150" height="50" rx="7.5" ry="7.5" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="3540" y="1230" width="150" height="50" rx="7.5" ry="7.5" fill="url(#mx-gradient-f8cecc-1-ea6b66-1-s-0)" stroke="#b85450" pointer-events="all"/><path d="M 3548.65 1229 Q 3539 1229 3539 1238.65 L 3539 1250 Q 3615 1265 3691 1250 L 3691 1238.65 Q 3691 1229 3681.35 1229 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 148px; height: 1px; padding-top: 1255px; margin-left: 3541px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>cumulated_alignments = <br /></div><div>next_attention_state<br /></div></div></div></div></foreignObject><text x="3615" y="1259" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">cumulated_alignments =...</text></switch></g><path d="M 3615 1500 L 3615 1520 L 3140 1520 L 3140 1583.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3140 1588.88 L 3136.5 1581.88 L 3140 1583.63 L 3143.5 1581.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1573px; margin-left: 3146px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">1</div></div></div></foreignObject><text x="3146" y="1577" fill="#000000" font-family="Helvetica" font-size="14px" text-anchor="middle">1</text></switch></g><rect x="3555" y="1440" width="120" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="3555" y="1440" width="120" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 3565.15 1439 Q 3554 1439 3554 1450.15 L 3554 1464 Q 3615 1482 3676 1464 L 3676 1450.15 Q 3676 1439 3664.85 1439 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 1470px; margin-left: 3556px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">cell_outputs</div></div></div></foreignObject><text x="3615" y="1474" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">cell_outputs</text></switch></g><path d="M 3640 1610 L 3640 1620 L 3206.37 1620" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3201.12 1620 L 3208.12 1616.5 L 3206.37 1620 L 3208.12 1623.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1623px; margin-left: 3247px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">2</div></div></div></foreignObject><text x="3247" y="1627" fill="#000000" font-family="Helvetica" font-size="14px" text-anchor="middle">2</text></switch></g><rect x="3580" y="1550" width="120" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="3580" y="1550" width="120" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 3590.15 1549 Q 3579 1549 3579 1560.15 L 3579 1574 Q 3640 1592 3701 1574 L 3701 1560.15 Q 3701 1549 3689.85 1549 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 1580px; margin-left: 3581px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">stop_tokens</div></div></div></foreignObject><text x="3640" y="1584" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">stop_tokens</text></switch></g><path d="M 3975 1520 L 3975 1850 L 3581.83 1850 L 3581.87 1746.37" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3581.87 1741.12 L 3585.37 1748.12 L 3581.87 1746.37 L 3578.37 1748.12 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1769px; margin-left: 3582px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">5</div></div></div></foreignObject><text x="3582" y="1773" fill="#000000" font-family="Helvetica" font-size="14px" text-anchor="middle">5</text></switch></g><rect x="3820" y="1460" width="310" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="3820" y="1460" width="310" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 3830.15 1459 Q 3819 1459 3819 1470.15 L 3819 1484 Q 3975 1502 4131 1484 L 4131 1470.15 Q 4131 1459 4119.85 1459 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 308px; height: 1px; padding-top: 1490px; margin-left: 3821px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">alignment_history = previous_alignment_history.write(state.time, alignments)</div></div></div></foreignObject><text x="3975" y="1494" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">alignment_history = previous_alignment_history.writ...</text></switch></g><rect x="2213.5" y="840" width="120" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2213.5" y="840" width="120" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 2223.65 839 Q 2212.5 839 2212.5 850.15 L 2212.5 864 Q 2273.5 882 2334.5 864 L 2334.5 850.15 Q 2334.5 839 2323.35 839 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 870px; margin-left: 2215px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">encoder_outputs</div></div></div></foreignObject><text x="2274" y="874" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">encoder_outputs</text></switch></g><rect x="3742" y="1655" width="200" height="110" rx="16.5" ry="16.5" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="3742" y="1655" width="200" height="110" rx="16.5" ry="16.5" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 3759.65 1654 Q 3741 1654 3741 1672.65 L 3741 1699 Q 3842 1732 3943 1699 L 3943 1672.65 Q 3943 1654 3924.35 1654 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 198px; height: 1px; padding-top: 1710px; margin-left: 3744px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div align="left"><ol><li>state_time+1<br /></li><li>next_cell_state<br /></li><li>context_vector</li><li>cummulated_alignments</li><li>alignments_history<br /></li></ol></div></div></div></div></foreignObject><text x="3744" y="1714" fill="#000000" font-family="Helvetica" font-size="12px">state_time+1...</text></switch></g><path d="M 2517.5 2345 L 2517.5 2380 L 2490 2380 L 2490 2408.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2490 2413.88 L 2486.5 2406.88 L 2490 2408.63 L 2493.5 2406.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 2517.5 2345 L 2517.5 2375 L 2632 2375 L 2632 2398.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2632 2403.88 L 2628.5 2396.88 L 2632 2398.63 L 2635.5 2396.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 2665 2315 L 3364 2315 L 3364 2358.63" fill="none" stroke="#d79b00" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3364 2363.88 L 3360.5 2356.88 L 3364 2358.63 L 3367.5 2356.88 Z" fill="#d79b00" stroke="#d79b00" stroke-miterlimit="10" pointer-events="all"/><path d="M 2517.5 2345 L 2517.5 2355 L 2880 2355 L 2880 2543.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2880 2548.88 L 2876.5 2541.88 L 2880 2543.63 L 2883.5 2541.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 2460px; margin-left: 2881px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">attention_mechanism.values = Memory=hj</div></div></div></foreignObject><text x="2881" y="2465" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle">attention_mechanism.values = Memory=hj</text></switch></g><path d="M 2665 2315 L 3719 2315 L 3719 2358.63" fill="none" stroke="#d79b00" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3719 2363.88 L 3715.5 2356.88 L 3719 2358.63 L 3722.5 2356.88 Z" fill="#d79b00" stroke="#d79b00" stroke-miterlimit="10" pointer-events="all"/><rect x="2370" y="2285" width="295" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2370" y="2285" width="295" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 2380.15 2284 Q 2369 2284 2369 2295.15 L 2369 2309 Q 2517.5 2327 2666 2309 L 2666 2295.15 Q 2666 2284 2654.85 2284 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 293px; height: 1px; padding-top: 2315px; margin-left: 2371px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>LocalSensitiveAttention</div><div>(query,state)</div></div></div></div></foreignObject><text x="2518" y="2319" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">LocalSensitiveAttention...</text></switch></g><path d="M 2425 2220 L 2425 2260 L 2425 2278.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2425 2283.88 L 2421.5 2276.88 L 2425 2278.63 L 2428.5 2276.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2375" y="2180" width="150" height="40" rx="6" ry="6" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2375" y="2180" width="150" height="40" rx="6" ry="6" fill="#b1ddf0" stroke="#10739e" pointer-events="all"/><path d="M 2382.15 2179 Q 2374 2179 2374 2187.15 L 2374 2196 Q 2450 2208 2526 2196 L 2526 2187.15 Q 2526 2179 2517.85 2179 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 148px; height: 1px; padding-top: 2200px; margin-left: 2376px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">input=LSTM_output</div></div></div></foreignObject><text x="2450" y="2204" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">input=LSTM_output</text></switch></g><path d="M 2660 2230 L 2660 2257.5 L 2591.33 2257.5 L 2591.27 2278.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2591.25 2283.88 L 2587.77 2276.87 L 2591.27 2278.63 L 2594.77 2276.89 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2550" y="2170" width="220" height="60" rx="9" ry="9" fill="url(#mx-gradient-d5e8d4-1-97d077-1-s-0)" stroke="#82b366" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 218px; height: 1px; padding-top: 2200px; margin-left: 2551px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div> state = previous_ali = state.ali</div></div></div></div></foreignObject><text x="2660" y="2204" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle"> state = previous_ali = state.ali</text></switch></g><path d="M 2490 2455 L 2490 2487.5 L 2517.5 2487.5 L 2517.5 2513.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2517.5 2518.88 L 2514 2511.88 L 2517.5 2513.63 L 2521 2511.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2430" y="2415" width="120" height="40" rx="6" ry="6" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2430" y="2415" width="120" height="40" rx="6" ry="6" fill="url(#mx-gradient-fff2cc-1-ffd966-1-s-0)" stroke="#d6b656" pointer-events="all"/><path d="M 2437.15 2414 Q 2429 2414 2429 2422.15 L 2429 2431 Q 2490 2443 2551 2431 L 2551 2422.15 Q 2551 2414 2542.85 2414 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 2435px; margin-left: 2431px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">alignments</div></div></div></foreignObject><text x="2490" y="2439" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">alignments</text></switch></g><rect x="2572" y="2405" width="120" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2572" y="2405" width="120" height="60" rx="9" ry="9" fill="url(#mx-gradient-f8cecc-1-ea6b66-1-s-0)" stroke="#b85450" pointer-events="all"/><path d="M 2582.15 2404 Q 2571 2404 2571 2415.15 L 2571 2429 Q 2632 2447 2693 2429 L 2693 2415.15 Q 2693 2404 2681.85 2404 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 2435px; margin-left: 2573px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">next_attention_state</div></div></div></foreignObject><text x="2632" y="2439" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">next_attention_state</text></switch></g><path d="M 2615 2550 L 2687.5 2550 L 2687.5 2580 L 2753.63 2580" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2758.88 2580 L 2751.88 2583.5 L 2753.63 2580 L 2751.88 2576.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 2557px; margin-left: 2670px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 20px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">aij</div></div></div></foreignObject><text x="2670" y="2563" fill="#000000" font-family="Helvetica" font-size="20px" text-anchor="middle">aij</text></switch></g><rect x="2420" y="2520" width="195" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2420" y="2520" width="195" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 2430.15 2519 Q 2419 2519 2419 2530.15 L 2419 2544 Q 2517.5 2562 2616 2544 L 2616 2530.15 Q 2616 2519 2604.85 2519 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 193px; height: 1px; padding-top: 2550px; margin-left: 2421px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>expanded_alignments</div><div>[batch_size, 1, memory_time]<br /></div></div></div></div></foreignObject><text x="2518" y="2554" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">expanded_alignments...</text></switch></g><path d="M 2820 2610 L 2820 2630 L 2820 2615 L 2820 2628.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2820 2633.88 L 2816.5 2626.88 L 2820 2628.63 L 2823.5 2626.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2760" y="2550" width="120" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2760" y="2550" width="120" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 2770.15 2549 Q 2759 2549 2759 2560.15 L 2759 2574 Q 2820 2592 2881 2574 L 2881 2560.15 Q 2881 2549 2869.85 2549 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 2580px; margin-left: 2761px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">context=exp-ali*LSA.values</div></div></div></foreignObject><text x="2820" y="2584" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">context=exp-ali*LSA....</text></switch></g><path d="M 2820 2695 L 2820 2715 L 2820 2705 L 2820 2718.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2820 2723.88 L 2816.5 2716.88 L 2820 2718.63 L 2823.5 2716.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2585" y="2635" width="470" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2585" y="2635" width="470" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 2595.15 2634 Q 2584 2634 2584 2645.15 L 2584 2659 Q 2820 2677 3056 2659 L 3056 2645.15 Q 3056 2634 3044.85 2634 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 468px; height: 1px; padding-top: 2665px; margin-left: 2586px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>context = array_ops.squeeze(context, [1])  <br /></div><div># [batch_size, memory_size].</div></div></div></div></foreignObject><text x="2820" y="2670" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle">context = array_ops.squeeze(context, [1])...</text></switch></g><rect x="2760" y="2725" width="120" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2760" y="2725" width="120" height="60" rx="9" ry="9" fill="url(#mx-gradient-e6d0de-1-d5739d-1-s-0)" stroke="#996185" pointer-events="all"/><path d="M 2770.15 2724 Q 2759 2724 2759 2735.15 L 2759 2749 Q 2820 2767 2881 2749 L 2881 2735.15 Q 2881 2724 2869.85 2724 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 2755px; margin-left: 2761px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">attention = context</div></div></div></foreignObject><text x="2820" y="2760" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle">attention = con...</text></switch></g><path d="M 3709 2425 L 3709 2865 L 3636.5 2865 L 3636.5 2898.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3636.5 2903.88 L 3633 2896.88 L 3636.5 2898.63 L 3640 2896.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="3584" y="2365" width="270" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="3584" y="2365" width="270" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 3594.15 2364 Q 3583 2364 3583 2375.15 L 3583 2389 Q 3719 2407 3855 2389 L 3855 2375.15 Q 3855 2364 3843.85 2364 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 268px; height: 1px; padding-top: 2395px; margin-left: 3585px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">processed_query:<br /><div>[batch_size, 1, attention_dim]</div></div></div></div></foreignObject><text x="3719" y="2400" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle">processed_query:...</text></switch></g><path d="M 3364 2425 L 3364 2483.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3364 2488.88 L 3360.5 2481.88 L 3364 2483.63 L 3367.5 2481.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 3204 2395 L 3184 2395 L 3184 3220 L 3343.63 3220" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3348.88 3220 L 3341.88 3223.5 L 3343.63 3220 L 3341.88 3216.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 3204 2395 L 3160 2395 L 3160 3365 L 3407.63 3365" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3412.88 3365 L 3405.88 3368.5 L 3407.63 3365 L 3405.88 3361.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="3204" y="2365" width="320" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="3204" y="2365" width="320" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 3214.15 2364 Q 3203 2364 3203 2375.15 L 3203 2389 Q 3364 2407 3525 2389 L 3525 2375.15 Q 3525 2364 3513.85 2364 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 318px; height: 1px; padding-top: 2395px; margin-left: 3205px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">previous_alignments = state</div></div></div></foreignObject><text x="3364" y="2400" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle">previous_alignments = state</text></switch></g><path d="M 3364 2550 L 3364 2597.5 L 3429 2597.5 L 3429 2638.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3429 2643.88 L 3425.5 2636.88 L 3429 2638.63 L 3432.5 2636.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="3264" y="2490" width="200" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="3264" y="2490" width="200" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 3274.15 2489 Q 3263 2489 3263 2500.15 L 3263 2514 Q 3364 2532 3465 2514 L 3465 2500.15 Q 3465 2489 3453.85 2489 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 198px; height: 1px; padding-top: 2520px; margin-left: 3265px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">expanded_alignments</div></div></div></foreignObject><text x="3364" y="2525" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle">expanded_alignments</text></switch></g><path d="M 3429 2705 L 3429 2758.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3429 2763.88 L 3425.5 2756.88 L 3429 2758.63 L 3432.5 2756.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 3654 2675 L 3752.5 2675 L 3752.5 2580 L 3802.5 2580 L 3802.5 2581.37" fill="none" stroke="#d79b00" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3802.5 2576.12 L 3806 2583.12 L 3802.5 2581.37 L 3799 2583.12 Z" fill="#d79b00" stroke="#d79b00" stroke-miterlimit="10" pointer-events="all"/><rect x="3204" y="2645" width="450" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="3204" y="2645" width="450" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 3214.15 2644 Q 3203 2644 3203 2655.15 L 3203 2669 Q 3429 2687 3655 2669 L 3655 2655.15 Q 3655 2644 3643.85 2644 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 448px; height: 1px; padding-top: 2675px; margin-left: 3205px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>f = <br /></div><div>self.location_convolution(expanded_alignments)</div></div></div></div></foreignObject><text x="3429" y="2680" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle">f =...</text></switch></g><path d="M 3429 2825 L 3429 2875 L 3474 2875 L 3474 2898.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3474 2903.88 L 3470.5 2896.88 L 3474 2898.63 L 3477.5 2896.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 3609 2795 L 3796.13 2795" fill="none" stroke="#d79b00" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3801.38 2795 L 3794.38 2798.5 L 3796.13 2795 L 3794.38 2791.5 Z" fill="#d79b00" stroke="#d79b00" stroke-miterlimit="10" pointer-events="all"/><rect x="3249" y="2765" width="360" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="3249" y="2765" width="360" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 3259.15 2764 Q 3248 2764 3248 2775.15 L 3248 2789 Q 3429 2807 3610 2789 L 3610 2775.15 Q 3610 2764 3598.85 2764 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 358px; height: 1px; padding-top: 2795px; margin-left: 3250px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>processed_location_features <br /></div><div>= self.location_layer(f)</div></div></div></div></foreignObject><text x="3429" y="2800" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle">processed_location_features...</text></switch></g><path d="M 3549 3045 L 3549 3085 L 3661 3085 L 3661 3118.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3661 3123.88 L 3657.5 3116.88 L 3661 3118.63 L 3664.5 3116.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 3724 2975 L 3806.13 2975" fill="none" stroke="#d79b00" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3811.38 2975 L 3804.38 2978.5 L 3806.13 2975 L 3804.38 2971.5 Z" fill="#d79b00" stroke="#d79b00" stroke-miterlimit="10" pointer-events="all"/><rect x="3374" y="2905" width="350" height="140" rx="21" ry="21" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="3374" y="2905" width="350" height="140" rx="21" ry="21" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 3396.15 2904 Q 3373 2904 3373 2927.15 L 3373 2961 Q 3549 3003 3725 2961 L 3725 2927.15 Q 3725 2904 3701.85 2904 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 348px; height: 1px; padding-top: 2975px; margin-left: 3375px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>energy =</div><div> _location_sensitive_score</div><div>(processed_query, processed_location_features, self.keys)</div><div><br /></div><div>energy = dot(v_a, tanh(W_keys(h_enc) + W_query(h_dec) + W_fil(f) + b_a))</div></div></div></div></foreignObject><text x="3549" y="2980" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle">energy =...</text></switch></g><rect x="3352" y="3125" width="618" height="150" rx="22.5" ry="22.5" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="3352" y="3125" width="618" height="150" rx="22.5" ry="22.5" fill="url(#mx-gradient-fff2cc-1-ffd966-1-s-0)" stroke="#d6b656" pointer-events="all"/><path d="M 3375.65 3124 Q 3351 3124 3351 3148.65 L 3351 3185 Q 3661 3230 3971 3185 L 3971 3148.65 Q 3971 3124 3946.35 3124 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 616px; height: 1px; padding-top: 3200px; margin-left: 3353px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div><br /></div><div>#alignments shape = energy shape = [batch_size, max_time]</div><div><br /></div><div><font size="1"><b style="font-size: 19px">alignments</b></font> = <br /></div><div>self._probability_fn</div><div>(energy, previous_alignments)</div></div></div></div></foreignObject><text x="3661" y="3205" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle">#alignments shape = energy shape = [batch_size, max_time]...</text></switch></g><rect x="3414" y="3335" width="240" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="3414" y="3335" width="240" height="60" rx="9" ry="9" fill="url(#mx-gradient-f8cecc-1-ea6b66-1-s-0)" stroke="#b85450" pointer-events="all"/><path d="M 3424.15 3334 Q 3413 3334 3413 3345.15 L 3413 3359 Q 3534 3377 3655 3359 L 3655 3345.15 Q 3655 3334 3643.85 3334 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 3365px; margin-left: 3415px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>next_state = <br /></div><div>alignments + previous_alignments</div></div></div></div></foreignObject><text x="3534" y="3370" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle">next_state =...</text></switch></g><rect x="3812.5" y="2945" width="320" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="3812.5" y="2945" width="320" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 3822.65 2944 Q 3811.5 2944 3811.5 2955.15 L 3811.5 2969 Q 3972.5 2987 4133.5 2969 L 4133.5 2955.15 Q 4133.5 2944 4122.35 2944 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 318px; height: 1px; padding-top: 2975px; margin-left: 3814px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">tf.reduce_sum(v_a * tf.tanh(W_keys + W_query + W_fil + b_a), [2])</div></div></div></foreignObject><text x="3973" y="2980" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle">tf.reduce_sum(v_a * tf.tanh(W_keys + W_q...</text></switch></g><rect x="3802.5" y="2475" width="350" height="200" rx="30" ry="30" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="3802.5" y="2475" width="350" height="200" rx="30" ry="30" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 3833.65 2474 Q 3801.5 2474 3801.5 2506.15 L 3801.5 2555 Q 3977.5 2615 4153.5 2555 L 4153.5 2506.15 Q 4153.5 2474 4121.35 2474 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 348px; height: 1px; padding-top: 2575px; margin-left: 3804px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>self.location_convolution =</div><div> tf.compat.v1.layers.Conv1D</div><div>(filters=hparams.attention_filters,</div><div>            kernel_size=hparams.attention_kernel, <br /></div><div>padding="same", use_bias=True,</div><div>            bias_initializer=tf.zeros_initializer(), <br /></div><div>name="location_features_convolution")</div></div></div></div></foreignObject><text x="3978" y="2580" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle">self.location_convolution =...</text></switch></g><rect x="3802.5" y="2721" width="340" height="148" rx="22.2" ry="22.2" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="3802.5" y="2721" width="340" height="148" rx="22.2" ry="22.2" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 3825.85 2720 Q 3801.5 2720 3801.5 2744.35 L 3801.5 2780.2 Q 3972.5 2824.6 4143.5 2780.2 L 4143.5 2744.35 Q 4143.5 2720 4119.15 2720 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 338px; height: 1px; padding-top: 2795px; margin-left: 3804px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>self.location_layer =</div><div> tf.compat.v1.layers.Dense</div><div>(units=num_units, <br /></div><div>use_bias=False,</div><div>dtype=tf.float32, name="location_features_layer")</div></div></div></div></foreignObject><text x="3973" y="2800" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle">self.location_layer =...</text></switch></g><path d="M 3971.5 570 L 4045.13 570" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 4050.38 570 L 4043.38 573.5 L 4045.13 570 L 4043.38 566.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 3856.5 605 L 3856.5 658.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3856.5 663.88 L 3853 656.88 L 3856.5 658.63 L 3860 656.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 3856.5 535 L 3856.5 482.5 L 3965 482.5 L 3965 436.37" fill="none" stroke="#d79b00" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3965 431.12 L 3968.5 438.12 L 3965 436.37 L 3961.5 438.12 Z" fill="#d79b00" stroke="#d79b00" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 483px; margin-left: 3933px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">self._cell=</div></div></div></foreignObject><text x="3933" y="488" fill="#000000" font-family="Helvetica" font-size="14px" text-anchor="middle">self._cell=</text></switch></g><rect x="3741.5" y="535" width="230" height="70" rx="10.5" ry="10.5" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="3741.5" y="535" width="230" height="70" rx="10.5" ry="10.5" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 3753.15 534 Q 3740.5 534 3740.5 546.65 L 3740.5 563 Q 3856.5 584 3972.5 563 L 3972.5 546.65 Q 3972.5 534 3959.85 534 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 228px; height: 1px; padding-top: 570px; margin-left: 3743px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">output, new_state = self._cell(inputs, state, scope)</div></div></div></foreignObject><text x="3857" y="575" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle">output, new_state = self._cel...</text></switch></g><rect x="3995" y="755" width="390" height="140" rx="21" ry="21" fill="#000000" stroke="#000000" stroke-width="6" transform="translate(2,3)" opacity="0.25"/><rect x="3995" y="755" width="390" height="140" rx="21" ry="21" fill="#ffffff" stroke="#000000" stroke-width="6" pointer-events="all"/><path d="M 4019.9 752 Q 3992 752 3992 779.9 L 3992 811 Q 4190 853 4388 811 L 4388 779.9 Q 4388 752 4360.1 752 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 388px; height: 1px; padding-top: 825px; margin-left: 3996px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">new_state = tf.compat.v1.nn.rnn_cell.LSTMStateTuple(c, h) if self.state_is_tuple else tf.concat(1, [c,<br />                                                                                                  h])</div></div></div></foreignObject><text x="4190" y="830" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle">new_state = tf.compat.v1.nn.rnn_cell.LSTMStateTup...</text></switch></g><rect x="4051.5" y="540" width="120" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" stroke-width="5" transform="translate(2,3)" opacity="0.25"/><rect x="4051.5" y="540" width="120" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" stroke-width="5" pointer-events="all"/><path d="M 4064.25 537 Q 4048.5 537 4048.5 552.75 L 4048.5 564 Q 4111.5 582 4174.5 564 L 4174.5 552.75 Q 4174.5 537 4158.75 537 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 570px; margin-left: 4053px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">output</div></div></div></foreignObject><text x="4112" y="575" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle">output</text></switch></g><path d="M 3856.5 705 L 3856.5 753.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3856.5 758.88 L 3853 751.88 L 3856.5 753.63 L 3860 751.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="3796.5" y="665" width="120" height="40" rx="6" ry="6" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="3796.5" y="665" width="120" height="40" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 3803.65 664 Q 3795.5 664 3795.5 672.15 L 3795.5 681 Q 3856.5 693 3917.5 681 L 3917.5 672.15 Q 3917.5 664 3909.35 664 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 685px; margin-left: 3798px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">new_state</div></div></div></foreignObject><text x="3857" y="690" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle">new_state</text></switch></g><path d="M 3944.75 825 L 3988.63 825" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3993.88 825 L 3986.88 828.5 L 3988.63 825 L 3986.88 821.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="3768.25" y="760" width="176.5" height="130" rx="19.5" ry="19.5" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="3768.25" y="760" width="176.5" height="130" rx="19.5" ry="19.5" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 3788.9 759 Q 3767.25 759 3767.25 780.65 L 3767.25 812 Q 3856.5 851 3945.75 812 L 3945.75 780.65 Q 3945.75 759 3924.1 759 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 174px; height: 1px; padding-top: 825px; margin-left: 3769px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>prev_c</div><div>prev_h</div><div>new_c<br /></div><div>new_h</div><div>h,c<br /></div></div></div></div></foreignObject><text x="3857" y="830" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle">prev_c...</text></switch></g><path d="M 2675 570 L 2675 515 L 2690 515 L 2690 435 L 2676.37 435" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2671.12 435 L 2678.12 431.5 L 2676.37 435 L 2678.12 438.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2615" y="570" width="120" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" stroke-width="6" transform="translate(2,3)" opacity="0.25"/><rect x="2615" y="570" width="120" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" stroke-width="6" pointer-events="all"/><path d="M 2627.9 567 Q 2612 567 2612 582.9 L 2612 594 Q 2675 612 2738 594 L 2738 582.9 Q 2738 567 2722.1 567 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 600px; margin-left: 2616px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">input = conv_output</div></div></div></foreignObject><text x="2675" y="605" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle">input = conv_ou...</text></switch></g><rect x="3820" y="2140" width="290" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" stroke-width="6" transform="translate(2,3)" opacity="0.25"/><rect x="3820" y="2140" width="290" height="60" rx="9" ry="9" fill="#e1d5e7" stroke="#9673a6" stroke-width="6" pointer-events="all"/><path d="M 3832.9 2137 Q 3817 2137 3817 2152.9 L 3817 2164 Q 3965 2182 4113 2164 L 4113 2152.9 Q 4113 2137 4097.1 2137 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 288px; height: 1px; padding-top: 2170px; margin-left: 3821px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>mel_outputs = <br /></div><div>decoder_output + projected_residual</div></div></div></div></foreignObject><text x="3965" y="2175" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle">mel_outputs =...</text></switch></g><path d="M 3122.5 2030 L 3372.63 2030" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3377.88 2030 L 3370.88 2033.5 L 3372.63 2030 L 3370.88 2026.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 3122.5 2000 L 3122.5 1980 L 3150 1980 L 3150 1910 L 3995.5 1910 L 3995.45 2131.65" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3995.45 2136.9 L 3991.95 2129.9 L 3995.45 2131.65 L 3998.95 2129.9 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2897.5" y="2000" width="225" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" stroke-width="6" transform="translate(2,3)" opacity="0.25"/><rect x="2897.5" y="2000" width="225" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" stroke-width="6" pointer-events="all"/><path d="M 2910.4 1997 Q 2894.5 1997 2894.5 2012.9 L 2894.5 2024 Q 3010 2042 3125.5 2024 L 3125.5 2012.9 Q 3125.5 1997 3109.6 1997 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 223px; height: 1px; padding-top: 2030px; margin-left: 2899px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">decoder_output</div></div></div></foreignObject><text x="3010" y="2035" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle">decoder_output</text></switch></g><path d="M 3010 1970 L 3010 1990 L 3010 1980 L 3010 1993.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3010 1998.88 L 3006.5 1991.88 L 3010 1993.63 L 3013.5 1991.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2895" y="1930" width="230" height="40" rx="6" ry="6" fill="#000000" stroke="#000000" stroke-width="6" transform="translate(2,3)" opacity="0.25"/><rect x="2895" y="1930" width="230" height="40" rx="6" ry="6" fill="#ffffff" stroke="#000000" stroke-width="6" pointer-events="all"/><path d="M 2904.9 1927 Q 2892 1927 2892 1939.9 L 2892 1946 Q 3010 1958 3128 1946 L 3128 1939.9 Q 3128 1927 3115.1 1927 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 228px; height: 1px; padding-top: 1950px; margin-left: 2896px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">frames_prediction</div></div></div></foreignObject><text x="3010" y="1955" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle">frames_prediction</text></switch></g><path d="M 3439 2060 L 3439 2090 L 3230 2090 L 3230 2133.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3230 2138.88 L 3226.5 2131.88 L 3230 2133.63 L 3233.5 2131.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="3379" y="2000" width="120" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" stroke-width="6" transform="translate(2,3)" opacity="0.25"/><rect x="3379" y="2000" width="120" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" stroke-width="6" pointer-events="all"/><path d="M 3391.9 1997 Q 3376 1997 3376 2012.9 L 3376 2024 Q 3439 2042 3502 2024 L 3502 2012.9 Q 3502 1997 3486.1 1997 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 2030px; margin-left: 3380px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">Postnet</div></div></div></foreignObject><text x="3439" y="2035" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle">Postnet</text></switch></g><path d="M 3290 2170 L 3338.63 2170" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3343.88 2170 L 3336.88 2173.5 L 3338.63 2170 L 3336.88 2166.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="3170" y="2140" width="120" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" stroke-width="6" transform="translate(2,3)" opacity="0.25"/><rect x="3170" y="2140" width="120" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" stroke-width="6" pointer-events="all"/><path d="M 3182.9 2137 Q 3167 2137 3167 2152.9 L 3167 2164 Q 3230 2182 3293 2164 L 3293 2152.9 Q 3293 2137 3277.1 2137 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 2170px; margin-left: 3171px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">residual</div></div></div></foreignObject><text x="3230" y="2175" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle">residual</text></switch></g><path d="M 3450 2200 L 3450 2233.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3450 2238.88 L 3446.5 2231.88 L 3450 2233.63 L 3453.5 2231.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="3345" y="2140" width="210" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" stroke-width="6" transform="translate(2,3)" opacity="0.25"/><rect x="3345" y="2140" width="210" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" stroke-width="6" pointer-events="all"/><path d="M 3357.9 2137 Q 3342 2137 3342 2152.9 L 3342 2164 Q 3450 2182 3558 2164 L 3558 2152.9 Q 3558 2137 3542.1 2137 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 208px; height: 1px; padding-top: 2170px; margin-left: 3346px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">FrameProjection</div></div></div></foreignObject><text x="3450" y="2175" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle">FrameProjection</text></switch></g><path d="M 3538 2270 L 3679 2270 L 3679 2170 L 3813.63 2170" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3818.88 2170 L 3811.88 2173.5 L 3813.63 2170 L 3811.88 2166.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="3362" y="2240" width="176" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" stroke-width="6" transform="translate(2,3)" opacity="0.25"/><rect x="3362" y="2240" width="176" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" stroke-width="6" pointer-events="all"/><path d="M 3374.9 2237 Q 3359 2237 3359 2252.9 L 3359 2264 Q 3450 2282 3541 2264 L 3541 2252.9 Q 3541 2237 3525.1 2237 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 174px; height: 1px; padding-top: 2270px; margin-left: 3363px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">projected_residual</div></div></div></foreignObject><text x="3450" y="2275" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle">projected_residual</text></switch></g><path d="M 2830.33 1895 L 2830.33 1950 L 2888.63 1950" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2893.88 1950 L 2886.88 1953.5 L 2888.63 1950 L 2886.88 1946.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2520" y="1680" width="620.63" height="215" rx="32.25" ry="32.25" fill="#000000" stroke="#000000" stroke-width="6" transform="translate(2,3)" opacity="0.25"/><rect x="2520" y="1680" width="620.63" height="215" rx="32.25" ry="32.25" fill="#ffffff" stroke="#000000" stroke-width="6" pointer-events="all"/><path d="M 2556.15 1677 Q 2517 1677 2517 1716.15 L 2517 1766 Q 2830.31 1830.5 3143.63 1766 L 3143.63 1716.15 Q 3143.63 1677 3104.48 1677 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 619px; height: 1px; padding-top: 1788px; margin-left: 2521px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>(frames_prediction, stop_token_prediction,_),final_decoder_state, _</div><div> =</div><div>(final_outputs, final_state, final_sequence_lengths)</div><div>=<br /></div><div> dynamic_decode(</div><div>                        CustomDecoder(decoder_cell, self.helper, decoder_init_state,</div><div>max_iters=2000,  ##   决定了最长输出的帧数。)</div><div>这个函数主要的一个思想是一步一步地调用Decoder的step函数，实现最后的一句话的生成</div><div>ref:https://blog.csdn.net/tudaodiaozhale/article/details/90737077<br /></div><div><br /></div></div></div></div></foreignObject><text x="2830" y="1792" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle">(frames_prediction, stop_token_prediction,_),final_decoder_state, _...</text></switch></g><rect x="3022.5" y="0" width="405" height="80" rx="12" ry="12" fill="none" stroke="none" transform="translate(2,3)" opacity="0.25"/><rect x="3022.5" y="0" width="405" height="80" rx="12" ry="12" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 403px; height: 1px; padding-top: 40px; margin-left: 3024px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; max-height: 76px; overflow: hidden; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><ul><li>备注：此图时 RTVC-synthesizer的代码流程图<br /></li><li>-----》黄色箭头 表示代码的展开。<br /></li><li>同一色块表示同步输入或者相等<br /></li></ul></div></div></div></foreignObject><text x="3024" y="45" fill="#000000" font-family="Helvetica" font-size="16px">备注：此图时 RTVC-synthesizer的代码流程图...</text></switch></g><path d="M 1710 891.5 L 1720 891.5 L 1720 925 L 1717.67 925 L 1717.68 931.15 L 1728.18 931.14 L 1712.7 950.16 L 1697.18 931.18 L 1707.68 931.17 L 1707.66 915 L 1710 915 Z" fill="none" stroke="#000000" stroke-miterlimit="1.42" pointer-events="all"/><path d="M 1717.68 931.15 L 1728.18 931.14 L 1712.7 950.16 L 1697.18 931.18 L 1707.68 931.17" fill="none" stroke="#000000" stroke-miterlimit="4" pointer-events="all"/><rect x="1655" y="830" width="120" height="60" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="1655" y="830" width="120" height="60" fill="#fff2cc" stroke="#d6b656" pointer-events="all"/><path d="M 1654 829 L 1654 854 Q 1715 872 1776 854 L 1776 829 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 860px; margin-left: 1656px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">data-shape</div></div></div></foreignObject><text x="1715" y="865" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle">data-shape</text></switch></g><rect x="1400" y="950" width="590" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="1400" y="950" width="590" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 1410.15 949 Q 1399 949 1399 960.15 L 1399 974 Q 1695 992 1991 974 L 1991 960.15 Q 1991 949 1979.85 949 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 588px; height: 1px; padding-top: 980px; margin-left: 1401px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">tower_inputs : [[batch_size, -1],] =  [[batch_size, 批内的id长度],]</div></div></div></foreignObject><text x="1695" y="985" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle">tower_inputs : [[batch_size, -1],] =  [[batch_size, 批内的id长度],]</text></switch></g><rect x="1380" y="1070" width="670" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="1380" y="1070" width="670" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 1390.15 1069 Q 1379 1069 1379 1080.15 L 1379 1094 Q 1715 1112 2051 1094 L 2051 1080.15 Q 2051 1069 2039.85 1069 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 668px; height: 1px; padding-top: 1100px; margin-left: 1381px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "># tower_mel_targets: [[batch_size, -1, mel_channels],]= [[batch_size, 批内的 音频的帧数,mel_channels=80]，] </div></div></div></foreignObject><text x="1715" y="1105" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle"># tower_mel_targets: [[batch_size, -1, mel_channels],]= [[batch_size, 批内的 音频的帧数,mel_channels...</text></switch></g><rect x="1370" y="1170" width="650" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="1370" y="1170" width="650" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 1380.15 1169 Q 1369 1169 1369 1180.15 L 1369 1194 Q 1695 1212 2021 1194 L 2021 1180.15 Q 2021 1169 2009.85 1169 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 648px; height: 1px; padding-top: 1200px; margin-left: 1371px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">tower_stop_token_targets ：[[batch_size, -1],] = [[batch_size, 批内的音频的帧数],]</div></div></div></foreignObject><text x="1695" y="1205" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle">tower_stop_token_targets ：[[batch_size, -1],] = [[batch_size, 批内的音频的帧数],]</text></switch></g><rect x="1380" y="1270" width="610" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="1380" y="1270" width="610" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 1390.15 1269 Q 1379 1269 1379 1280.15 L 1379 1294 Q 1685 1312 1991 1294 L 1991 1280.15 Q 1991 1269 1979.85 1269 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 608px; height: 1px; padding-top: 1300px; margin-left: 1381px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">embedded_inputs =tower_inputs[i] : [batch_size, -1] = [batch_size, 批内的id长度]</div></div></div></foreignObject><text x="1685" y="1305" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle">embedded_inputs =tower_inputs[i] : [batch_size, -1] = [batch_size, 批内的id长度]</text></switch></g><rect x="1450" y="1390" width="520" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="1450" y="1390" width="520" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 1460.15 1389 Q 1449 1389 1449 1400.15 L 1449 1414 Q 1710 1432 1971 1414 L 1971 1400.15 Q 1971 1389 1959.85 1389 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 518px; height: 1px; padding-top: 1420px; margin-left: 1451px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">Encoder Cell ==&gt; [batch_size, encoder_steps, encoder_lstm_units] = [BS,encoder_steps,256]</div></div></div></foreignObject><text x="1710" y="1425" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle">Encoder Cell ==&gt; [batch_size, encoder_steps, encoder_lstm_units]...</text></switch></g><rect x="1500" y="1490" width="430" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="1500" y="1490" width="430" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 1510.15 1489 Q 1499 1489 1499 1500.15 L 1499 1514 Q 1715 1532 1931 1514 L 1931 1500.15 Q 1931 1489 1919.85 1489 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 428px; height: 1px; padding-top: 1520px; margin-left: 1501px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "># tower_input_lengths [[BS,batch内的id长度],]</div></div></div></foreignObject><text x="1715" y="1525" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle"># tower_input_lengths [[BS,batch内的id长度],]</text></switch></g><rect x="1500" y="1560" width="430" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="1500" y="1560" width="430" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 1510.15 1559 Q 1499 1559 1499 1570.15 L 1499 1584 Q 1715 1602 1931 1584 L 1931 1570.15 Q 1931 1559 1919.85 1559 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 428px; height: 1px; padding-top: 1590px; margin-left: 1501px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "># tower_targets_lengths =  [[BS,batch内的mel帧数],]</div></div></div></foreignObject><text x="1715" y="1595" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle"># tower_targets_lengths =  [[BS,batch内的mel帧数],]</text></switch></g><path d="M 860 1696 L 860 1681.7 Q 860 1670 848.3 1670 L 11.7 1670 Q 0 1670 0 1681.7 L 0 1696" fill="none" stroke="#000000" stroke-miterlimit="10" transform="translate(2,3)" opacity="0.25"/><path d="M 860 1696 L 860 1681.7 Q 860 1670 848.3 1670 L 11.7 1670 Q 0 1670 0 1681.7 L 0 1696" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 0 1696 L 0 3062.3 Q 0 3074 11.7 3074 L 848.3 3074 Q 860 3074 860 3062.3 L 860 1696" fill="none" stroke="#000000" stroke-miterlimit="10" transform="translate(2,3)" opacity="0.25"/><path d="M 0 1696 L 0 3062.3 Q 0 3074 11.7 3074 L 848.3 3074 Q 860 3074 860 3062.3 L 860 1696" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 0 1696 L 860 1696" fill="none" stroke="#000000" stroke-miterlimit="10" transform="translate(2,3)" opacity="0.25"/><path d="M 0 1696 L 860 1696" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 12.7 1669 Q -1 1669 -1 1682.7 L -1 1680.4 Q 430 1688.2 861 1680.4 L 861 1682.7 Q 861 1669 847.3 1669 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g fill="#000000" font-family="Helvetica" pointer-events="none" text-anchor="middle" font-size="19px"><text x="429.5" y="1691">Classname</text></g><g fill="#000000" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-4-1701-852-26-0)" font-size="18px"><text x="5.5" y="1719.5">inout:    [BS,T_in]，  BS=batch_size, T_in=输入的id数目， value = char</text></g><g fill="#000000" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-4-1727-852-26-0)" font-size="18px"><text x="5.5" y="1745.5">input_lenght: [BS] , value = 输入序列的长度</text></g><g fill="#000000" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-4-1753-852-26-0)" font-size="18px"><text x="5.5" y="1771.5">embed_targets ：[BS,E], E=speakerembbed-dim=256,</text></g><g fill="#000000" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-4-1779-852-26-0)" font-size="18px"><text x="5.5" y="1797.5">mel_targets : [BS,T_out,M], T_out=输出的音频的帧数， M=num_mels=80，values=mel的谱值</text></g><g fill="#000000" font-family="Helvetica" font-weight="bold" pointer-events="none" clip-path="url(#mx-clip-4-1805-852-26-0)" font-size="18px"><text x="5.5" y="1823.5">tower_XXX : 是 XXX在 多 GPU训练时，将 每个BS分配到 多个GPU上。</text></g><g fill="#000000" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-4-1831-852-26-0)" font-size="18px"><text x="5.5" y="1849.5">+ field: type</text></g><g fill="#000000" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-4-1857-852-26-0)" font-size="18px"><text x="5.5" y="1875.5">+ field: type</text></g><g fill="#000000" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-4-1883-852-402-0)" font-size="14px"><text x="5.5" y="1897.5">            self._placeholders = [</text><text x="5.5" y="1914.5">                tf.compat.v1.placeholder(tf.int32, shape=(None, None), name="inputs"),</text><text x="5.5" y="1931.5">                tf.compat.v1.placeholder(tf.int32, shape=(None, ), name="input_lengths"),</text><text x="5.5" y="1948.5">                tf.compat.v1.placeholder(tf.float32, shape=(None, None, hparams.num_mels), name="mel_targets"),</text><text x="5.5" y="1965.5">                tf.compat.v1.placeholder(tf.float32, shape=(None, None), name="token_targets"),</text><text x="5.5" y="1982.5">                tf.compat.v1.placeholder(tf.int32, shape=(None, ), name="targets_lengths"),</text><text x="5.5" y="1999.5">                tf.compat.v1.placeholder(tf.int32, shape=(hparams.tacotron_num_gpus, None), name="split_infos"),</text><text x="5.5" y="2016.5">                # SV2TTS</text><text x="5.5" y="2033.5">                tf.compat.v1.placeholder(tf.float32, shape=(None, hparams.speaker_embedding_size), name="speaker_embeddings")</text><text x="5.5" y="2050.5">            ]</text><text x="5.5" y="2067.5">            self.inputs, self.input_lengths, self.mel_targets, self.token_targets, \</text><text x="5.5" y="2084.5">                self.targets_lengths, self.split_infos, self.speaker_embeddings = queue.dequeue()</text><text x="5.5" y="2118.5">            self.inputs.set_shape(self._placeholders[0].shape)</text><text x="5.5" y="2135.5">            self.input_lengths.set_shape(self._placeholders[1].shape)</text><text x="5.5" y="2152.5">            self.mel_targets.set_shape(self._placeholders[2].shape)</text><text x="5.5" y="2169.5">            self.token_targets.set_shape(self._placeholders[3].shape)</text><text x="5.5" y="2186.5">            self.targets_lengths.set_shape(self._placeholders[4].shape)</text><text x="5.5" y="2203.5">            self.split_infos.set_shape(self._placeholders[5].shape)</text><text x="5.5" y="2220.5">            self.speaker_embeddings.set_shape(self._placeholders[6].shape)</text></g><g fill="#000000" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-4-2285-852-26-0)" font-size="18px"><text x="5.5" y="2303.5">split_infos.append([input_max_len, mel_target_max_len, token_target_max_len])</text></g><g fill="#000000" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-4-2311-852-232-0)" font-size="18px"><text x="5.5" y="2329.5">_prepare_batch(self, batches, outputs_per_step):</text><text x="5.5" y="2351.5">        # 备注： 输出变量，如 inputs , 行的维度是单个gpu训练的样本个数，列是 GPU个数倍， 总列数=num_GPU*单个样本列数。</text><text x="5.5" y="2373.5">        # inputs : 是 BS/num_GPU行个样本，在列上 num_GPU次。</text><text x="5.5" y="2417.5">        return inputs, input_lengths, mel_targets, token_targets, targets_lengths, \</text><text x="5.5" y="2439.5">               split_infos, embed_targets</text></g><g fill="#000000" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-4-2543-852-134-0)" font-size="18px"><text x="5.5" y="2561.5">_prepare_inputs(self, inputs):</text><text x="5.5" y="2583.5"># 行上进行排列，作为单个 gpu上训练的一组数据。</text><text x="5.5" y="2605.5">        return np.stack([self._pad_input(x, max_len) for x in inputs]), max_len</text></g><g fill="#000000" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-4-2677-852-134-0)" font-size="18px"><text x="5.5" y="2695.5">size_per_device = int(len(batches) / self._hparams.tacotron_num_gpus)</text><text x="5.5" y="2717.5">_batches_per_group = 64</text><text x="5.5" y="2761.5"># batch_size 必须时GPU个数的整数倍。</text></g><g fill="#000000" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-4-2811-852-134-0)" font-size="18px"/><g fill="#000000" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-4-2945-852-134-0)" font-size="18px"/><rect x="3765" y="370" width="400" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="3765" y="370" width="400" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 3775.15 369 Q 3764 369 3764 380.15 L 3764 394 Q 3965 412 4166 394 L 4166 380.15 Q 4166 369 4154.85 369 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 398px; height: 1px; padding-top: 400px; margin-left: 3766px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">tf.compat.v1.nn.rnn_cell.LSTMCell(num_units, state_is_tuple=state_is_tuple, name=name)</div></div></div></foreignObject><text x="3965" y="404" fill="#000000" font-family="Helvetica" font-size="14px" text-anchor="middle">tf.compat.v1.nn.rnn_cell.LSTMCell(num_units, state_is_tup...</text></switch></g><rect x="1900" y="510" width="120" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="1900" y="510" width="120" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 1910.15 509 Q 1899 509 1899 520.15 L 1899 534 Q 1960 552 2021 534 L 2021 520.15 Q 2021 509 2009.85 509 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><path d="M 2245 1465 L 2245 1508.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2245 1513.88 L 2241.5 1506.88 L 2245 1508.63 L 2248.5 1506.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2345 1420 L 2410 1420 L 2410 1598 L 2420 1598 L 2420 1760 L 2483.63 1760" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2488.88 1760 L 2481.88 1763.5 L 2483.63 1760 L 2481.88 1756.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1679px; margin-left: 2419px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">1，2</div></div></div></foreignObject><text x="2419" y="1683" fill="#000000" font-family="Helvetica" font-size="14px" text-anchor="middle">1，2</text></switch></g><path d="M 2145 1420 L 2000 1420 L 2000 1990 L 2098.63 1990" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2103.88 1990 L 2096.88 1993.5 L 2098.63 1990 L 2096.88 1986.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="2145" y="1375" width="200" height="90" rx="13.5" ry="13.5" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2145" y="1375" width="200" height="90" rx="13.5" ry="13.5" fill="#d80073" stroke="#a50040" pointer-events="none"/><path d="M 2159.65 1374 Q 2144 1374 2144 1389.65 L 2144 1411 Q 2245 1438 2346 1411 L 2346 1389.65 Q 2346 1374 2330.35 1374 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 198px; height: 1px; padding-top: 1420px; margin-left: 2146px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #ffffff; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">(cell_outputs, stop_token), cell_state</div></div></div></foreignObject><text x="2245" y="1424" fill="#ffffff" font-family="Helvetica" font-size="14px" text-anchor="middle">(cell_outputs, stop_token),...</text></switch></g><path d="M 2095 1595 L 2030 1595 L 2030 1640 L 1900 1640 L 1900 1700 L 1820 1700 L 1820 1713.63" fill="none" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/><path d="M 1820 1718.88 L 1816.5 1711.88 L 1820 1713.63 L 1823.5 1711.88 Z" fill="#d6b656" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/><path d="M 2180 1675 L 2180 1730 L 2180 1823.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2180 1828.88 L 2176.5 1821.88 L 2180 1823.63 L 2183.5 1821.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1804px; margin-left: 2183px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">2，3，4</div></div></div></foreignObject><text x="2183" y="1808" fill="#000000" font-family="Helvetica" font-size="14px" text-anchor="middle">2，3，4</text></switch></g><rect x="2095" y="1515" width="300" height="160" rx="24" ry="24" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2095" y="1515" width="300" height="160" rx="24" ry="24" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 2120.15 1514 Q 2094 1514 2094 1540.15 L 2094 1579 Q 2245 1627 2396 1579 L 2396 1540.15 Q 2396 1514 2369.85 1514 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 298px; height: 1px; padding-top: 1595px; margin-left: 2096px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; "><div>(finished, next_inputs, next_state) = self._helper.next_inputs(</div><div>time=time,</div><div>outputs=cell_outputs,[有标签学习，未使用]</div><div><font size="1"><b style="font-size: 19px">state=cell_state,</b></font></div><div>sample_ids=sample_ids,<br /></div><div>stop_token_prediction=stop_token)<br /></div></div></div></div></foreignObject><text x="2245" y="1599" fill="#000000" font-family="Helvetica" font-size="14px" text-anchor="middle">(finished, next_inputs, next_state) = self....</text></switch></g><path d="M 2360 1790 L 2360 1810 L 2255 1810 L 2255 1823.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2255 1828.88 L 2251.5 1821.88 L 2255 1823.63 L 2258.5 1821.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1813px; margin-left: 2273px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">1</div></div></div></foreignObject><text x="2273" y="1817" fill="#000000" font-family="Helvetica" font-size="14px" text-anchor="middle">1</text></switch></g><rect x="2230" y="1730" width="260" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2230" y="1730" width="260" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 2240.15 1729 Q 2229 1729 2229 1740.15 L 2229 1754 Q 2360 1772 2491 1754 L 2491 1740.15 Q 2491 1729 2479.85 1729 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 258px; height: 1px; padding-top: 1760px; margin-left: 2231px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">outputs = CustomDecoderOutput(cell_outputs, stop_token, sample_ids)</div></div></div></foreignObject><text x="2360" y="1764" fill="#000000" font-family="Helvetica" font-size="14px" text-anchor="middle">outputs = CustomDecoderOutput(cell_ou...</text></switch></g><path d="M 2550 1660 L 2510 1660 L 2510 1870 L 2440 1870 L 2440 1860 L 2411.37 1860" fill="none" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/><path d="M 2406.12 1860 L 2413.12 1856.5 L 2411.37 1860 L 2413.12 1863.5 Z" fill="#d6b656" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/><rect x="2105" y="1830" width="300" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2105" y="1830" width="300" height="60" rx="9" ry="9" fill="#e1d5e7" stroke="#9673a6" pointer-events="none"/><path d="M 2115.15 1829 Q 2104 1829 2104 1840.15 L 2104 1854 Q 2255 1872 2406 1854 L 2406 1840.15 Q 2406 1829 2394.85 1829 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 298px; height: 1px; padding-top: 1860px; margin-left: 2106px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">(outputs, next_state, next_inputs, finished)</div></div></div></foreignObject><text x="2255" y="1864" fill="#000000" font-family="Helvetica" font-size="14px" text-anchor="middle">(outputs, next_state, next_inputs, finished)</text></switch></g><rect x="1680" y="1720" width="280" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="1680" y="1720" width="280" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 1690.15 1719 Q 1679 1719 1679 1730.15 L 1679 1744 Q 1820 1762 1961 1744 L 1961 1730.15 Q 1961 1719 1949.85 1719 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 278px; height: 1px; padding-top: 1750px; margin-left: 1681px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; "><div>finished = (time + 1 &gt;= self._lengths)</div><div><b>next_input</b>s=self._targets[:, time, :]<br /></div><div><font size="1"><b style="font-size: 17px">next_state = state</b></font><br /></div></div></div></div></foreignObject><text x="1820" y="1754" fill="#000000" font-family="Helvetica" font-size="14px" text-anchor="middle">finished = (time + 1 &gt;= self._lengths)...</text></switch></g><path d="M 2470 1960 L 2470 1760 L 2483.63 1760" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2488.88 1760 L 2481.88 1763.5 L 2483.63 1760 L 2481.88 1756.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1790px; margin-left: 2470px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">3</div></div></div></foreignObject><text x="2470" y="1794" fill="#000000" font-family="Helvetica" font-size="14px" text-anchor="middle">3</text></switch></g><rect x="2105" y="1960" width="420" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2105" y="1960" width="420" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 2115.15 1959 Q 2104 1959 2104 1970.15 L 2104 1984 Q 2315 2002 2526 1984 L 2526 1970.15 Q 2526 1959 2514.85 1959 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 418px; height: 1px; padding-top: 1990px; margin-left: 2106px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">sample_ids = self._helper.sample(time=time, outputs=cell_outputs, state=cell_state)</div></div></div></foreignObject><text x="2315" y="1994" fill="#000000" font-family="Helvetica" font-size="14px" text-anchor="middle">sample_ids = self._helper.sample(time=time, outputs=cell_out...</text></switch></g><path d="M 2650 1610 L 2677.5 1610 L 2677.5 1590 L 2698.63 1590" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2703.88 1590 L 2696.88 1593.5 L 2698.63 1590 L 2696.88 1586.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="2450" y="1560" width="200" height="100" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2450" y="1560" width="200" height="100" fill="#6a00ff" stroke="#3700cc" pointer-events="none"/><path d="M 2449 1559 L 2449 1600 Q 2550 1630 2651 1600 L 2651 1559 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 198px; height: 1px; padding-top: 1610px; margin-left: 2451px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #ffffff; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; "><div>CustomDecoder()-step(</div><div>time, inputs, state)</div><div>该函数接收当前的输入和隐层状态会生成下一个词</div></div></div></div></foreignObject><text x="2550" y="1614" fill="#ffffff" font-family="Helvetica" font-size="14px" text-anchor="middle">CustomDecoder()-step(...</text></switch></g><path d="M 2855 1620 L 2855 1650 L 2830.33 1650 L 2830.33 1673.63" fill="none" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/><path d="M 2830.33 1678.88 L 2826.83 1671.88 L 2830.33 1673.63 L 2833.83 1671.88 Z" fill="#d6b656" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/><rect x="2705" y="1560" width="300" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2705" y="1560" width="300" height="60" rx="9" ry="9" fill="#e1d5e7" stroke="#9673a6" pointer-events="none"/><path d="M 2715.15 1559 Q 2704 1559 2704 1570.15 L 2704 1584 Q 2855 1602 3006 1584 L 3006 1570.15 Q 3006 1559 2994.85 1559 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 298px; height: 1px; padding-top: 1590px; margin-left: 2706px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">(outputs, <font style="font-size: 16px"><b>next_state</b></font>, <b>next_inputs</b>, finished)</div></div></div></foreignObject><text x="2855" y="1594" fill="#000000" font-family="Helvetica" font-size="14px" text-anchor="middle">(outputs, next_state, next_inputs, finished)</text></switch></g><path d="M 2840.83 3750 L 2840.83 3770 L 2842 3770 L 2842 3773.63" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 2842 3778.88 L 2838.5 3771.88 L 2842 3773.63 L 2845.5 3771.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="2534.47" y="3630" width="612.5" height="120" rx="18" ry="18" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2534.47" y="3630" width="612.5" height="120" rx="18" ry="18" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 2553.62 3629 Q 2533.47 3629 2533.47 3649.15 L 2533.47 3678 Q 2840.72 3714 3147.97 3678 L 3147.97 3649.15 Q 3147.97 3629 3127.82 3629 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 611px; height: 1px; padding-top: 3690px; margin-left: 2535px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; "><div style="font-size: 17px">initial_finished, initial_inputs, initial_state = decoder.initialize()</div><div style="font-size: 17px">一个是initial_finished，一般是[batch_size]的大小False值，表明当前解码步骤尚未结束（未生成到最后一个词<br style="font-size: 17px" /></div></div></div></div></foreignObject><text x="2841" y="3695" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">initial_finished, initial_inputs, initial_state = decoder.initialize()...</text></switch></g><path d="M 2840.72 3580 L 2840.72 3623.63" fill="none" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/><path d="M 2840.72 3628.88 L 2837.22 3621.88 L 2840.72 3623.63 L 2844.22 3621.88 Z" fill="#d6b656" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/><path d="M 2900.72 3550 L 3178.63 3550" fill="none" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/><path d="M 3183.88 3550 L 3176.88 3553.5 L 3178.63 3550 L 3176.88 3546.5 Z" fill="#d6b656" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/><rect x="2780.72" y="3520" width="120" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2780.72" y="3520" width="120" height="60" rx="9" ry="9" fill="#ffe6cc" stroke="#d79b00" pointer-events="none"/><path d="M 2790.87 3519 Q 2779.72 3519 2779.72 3530.15 L 2779.72 3544 Q 2840.72 3562 2901.72 3544 L 2901.72 3530.15 Q 2901.72 3519 2890.57 3519 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 3550px; margin-left: 2782px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">decoder</div></div></div></foreignObject><text x="2841" y="3555" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">decoder</text></switch></g><path d="M 2842 3850 L 2842 3875 L 2841.33 3875 L 2841.32 3893.63" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 2841.32 3898.88 L 2837.82 3891.88 L 2841.32 3893.63 L 2844.82 3891.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="2602" y="3780" width="480" height="70" rx="10.5" ry="10.5" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2602" y="3780" width="480" height="70" rx="10.5" ry="10.5" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 2613.65 3779 Q 2601 3779 2601 3791.65 L 2601 3808 Q 2842 3829 3083 3808 L 3083 3791.65 Q 3083 3779 3070.35 3779 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 478px; height: 1px; padding-top: 3815px; margin-left: 2603px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">创建一个每个元素为[batch_size, output_size]大小的数组。如果指定了maximum_iterations，数组大小为maximum_iterations，否则为动态大小</div></div></div></foreignObject><text x="2842" y="3820" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">创建一个每个元素为[batch_size, output_size]大小的数组。如果指定了maximum_iterations，数组大小为maximum_iterat...</text></switch></g><path d="M 2841.33 4260 L 2841.33 4285 L 2841.33 4303.63" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 2841.33 4308.88 L 2837.83 4301.88 L 2841.33 4303.63 L 2844.83 4301.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 3146.97 3930 L 3260 3930 L 3260 3788.83 L 3360.51 3788.93" fill="none" stroke="#d79b00" stroke-miterlimit="10" pointer-events="none"/><path d="M 3365.76 3788.94 L 3358.76 3792.43 L 3360.51 3788.93 L 3358.77 3785.43 Z" fill="#d79b00" stroke="#d79b00" stroke-miterlimit="10" pointer-events="none"/><path d="M 3146.97 4080 L 3170 4080 L 3170 4120 L 3283.63 4120" fill="none" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/><path d="M 3288.88 4120 L 3281.88 4123.5 L 3283.63 4120 L 3281.88 4116.5 Z" fill="#d6b656" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/><rect x="2535.66" y="3900" width="611.31" height="360" rx="54" ry="54" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2535.66" y="3900" width="611.31" height="360" rx="54" ry="54" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 2590.81 3899 Q 2534.66 3899 2534.66 3955.15 L 2534.66 4044 Q 2841.31 4152 3147.97 4044 L 3147.97 3955.15 Q 3147.97 3899 3091.82 3899 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 609px; height: 1px; padding-top: 4080px; margin-left: 2537px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; "><div style="font-size: 17px"><br style="font-size: 17px" /></div><div style="font-size: 17px">res = control_flow执行while循环，并得到结果result。</div><div style="font-size: 17px">注意这里的result是一个数组，对应着loop_vars的loop完的结果。</div><div style="font-size: 17px">所以loop_vars有几个元素，result有几个元素。_ops.while_loop(</div>        <font style="font-size: 17px"><b style="font-size: 17px">condition,</b></font><br style="font-size: 17px" />        <font style="font-size: 17px"><b style="font-size: 17px">body,</b></font><br style="font-size: 17px" />        loop_vars=(<br style="font-size: 17px" />            initial_time,<br style="font-size: 17px" />            initial_outputs_ta,<br style="font-size: 17px" />            initial_state,<br style="font-size: 17px" />            initial_inputs,<br style="font-size: 17px" />            initial_finished,<br style="font-size: 17px" />            initial_sequence_lengths,<br style="font-size: 17px" />        ),<br style="font-size: 17px" />        parallel_iterations=parallel_iterations,<br style="font-size: 17px" />        maximum_iterations=maximum_iterations,<br style="font-size: 17px" />        swap_memory=swap_memory)</div></div></div></foreignObject><text x="2841" y="4085" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">res = control_flow执行while循环，并得到结果result。...</text></switch></g><path d="M 2841.33 4450 L 2841.33 4490 L 2842 4490 L 2842 4523.63" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 2842 4528.88 L 2838.5 4521.88 L 2842 4523.63 L 2845.5 4521.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="2549.47" y="4310" width="583.69" height="140" rx="21" ry="21" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2549.47" y="4310" width="583.69" height="140" rx="21" ry="21" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 2571.62 4309 Q 2548.47 4309 2548.47 4332.15 L 2548.47 4366 Q 2841.32 4408 3134.16 4366 L 3134.16 4332.15 Q 3134.16 4309 3111.01 4309 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 582px; height: 1px; padding-top: 4380px; margin-left: 2550px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">    final_outputs_ta = res[1]<br style="font-size: 17px" />    final_state = res[2]<br style="font-size: 17px" />    final_sequence_lengths = res[5]<br style="font-size: 17px" /><br style="font-size: 17px" />    final_outputs = nest.map_structure(lambda ta: ta.stack(), final_outputs_ta)</div></div></div></foreignObject><text x="2841" y="4385" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">final_outputs_ta = res[1]...</text></switch></g><rect x="2692" y="4530" width="300" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2692" y="4530" width="300" height="60" rx="9" ry="9" fill="#ffe6cc" stroke="#d79b00" pointer-events="none"/><path d="M 2702.15 4529 Q 2691 4529 2691 4540.15 L 2691 4554 Q 2842 4572 2993 4554 L 2993 4540.15 Q 2993 4529 2981.85 4529 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 298px; height: 1px; padding-top: 4560px; margin-left: 2693px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">[batch_size, seq_length, output_size]</div></div></div></foreignObject><text x="2842" y="4565" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">[batch_size, seq_length, output_siz...</text></switch></g><rect x="3370" y="3730" width="520" height="140" rx="21" ry="21" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="3370" y="3730" width="520" height="140" rx="21" ry="21" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 3392.15 3729 Q 3369 3729 3369 3752.15 L 3369 3786 Q 3630 3828 3891 3786 L 3891 3752.15 Q 3891 3729 3867.85 3729 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 518px; height: 1px; padding-top: 3800px; margin-left: 3371px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">def condition(unused_time, unused_outputs_ta, unused_state, unused_inputs,<br style="font-size: 17px" />                  finished, unused_sequence_lengths):<br style="font-size: 17px" />      return math_ops.logical_not(math_ops.reduce_all(finished))</div></div></div></foreignObject><text x="3630" y="3805" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">def condition(unused_time, unused_outputs_ta, unused_state, u...</text></switch></g><path d="M 3657.5 4230 L 3657.5 4273.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 3657.5 4278.88 L 3654 4271.88 L 3657.5 4273.63 L 3661 4271.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="3290" y="4010" width="735" height="220" rx="33" ry="33" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="3290" y="4010" width="735" height="220" rx="33" ry="33" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 3324.15 4009 Q 3289 4009 3289 4044.15 L 3289 4098 Q 3657.5 4164 4026 4098 L 4026 4044.15 Q 4026 4009 3990.85 4009 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 733px; height: 1px; padding-top: 4120px; margin-left: 3291px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; "><div style="font-size: 17px">def body(time, outputs_ta, state, inputs, finished, sequence_lengths):</div><div style="font-size: 17px"><br style="font-size: 17px" /></div><div style="font-size: 17px"><code class="has-numbering" style="font-size: 17px">      Returns:</code></div><div style="font-size: 17px"><code class="has-numbering" style="font-size: 17px"></code><code class="has-numbering" style="font-size: 17px">(time + 1,</code></div><div style="font-size: 17px"><code class="has-numbering" style="font-size: 17px"></code><code class="has-numbering" style="font-size: 17px">outputs_ta,</code></div><div style="font-size: 18px"><code class="has-numbering" style="font-size: 17px"></code><font style="font-size: 18px"><b><code class="has-numbering">next_state,</code></b></font></div><div style="font-size: 18px"><font style="font-size: 18px"><code class="has-numbering"></code><b><code class="has-numbering">next_inputs,</code></b></font></div><div style="font-size: 17px"><code class="has-numbering" style="font-size: 17px"></code><code class="has-numbering" style="font-size: 17px">next_finished,</code></div><div style="font-size: 17px"><code class="has-numbering" style="font-size: 17px"></code><code class="has-numbering" style="font-size: 17px">next_sequence_lengths)</code></div></div></div></div></foreignObject><text x="3658" y="4125" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">def body(time, outputs_ta, state, inputs, finished, sequence_lengths):...</text></switch></g><rect x="3281.25" y="4280" width="752.5" height="160" rx="24" ry="24" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="3281.25" y="4280" width="752.5" height="160" rx="24" ry="24" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 3306.4 4279 Q 3280.25 4279 3280.25 4305.15 L 3280.25 4344 Q 3657.5 4392 4034.75 4344 L 4034.75 4305.15 Q 4034.75 4279 4008.6 4279 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 751px; height: 1px; padding-top: 4360px; margin-left: 3282px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">next_outputs, <i><b>decoder_state</b></i>, <i><b>next_inputs</b></i>,<br style="font-size: 17px" /><div style="font-size: 17px">       decoder_finished) = decoder.step(time, <b>inputs, state</b>)    #通过time，inputs, state得到下一个词</div><div style="font-size: 17px"><br style="font-size: 17px" /></div> # 如果某一时刻已经finished，那么最后的state为finished时的state，否则就为当前decoder得到的state</div></div></div></foreignObject><text x="3658" y="4365" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">next_outputs, decoder_state, next_inputs,...</text></switch></g><rect x="3185" y="3435" width="850" height="230" rx="34.5" ry="34.5" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="3185" y="3435" width="850" height="230" rx="34.5" ry="34.5" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 3220.65 3434 Q 3184 3434 3184 3470.65 L 3184 3527 Q 3610 3596 4036 3527 L 4036 3470.65 Q 4036 3434 3999.35 3434 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 848px; height: 1px; padding-top: 3550px; margin-left: 3186px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">Seq2Seq模型训练：<br />Encoder：input_sequences ----&gt; (RNN) ----&gt; C(Cell State)<br />Decoder：C + 结合时刻i的target ----&gt; (RNN) ----&gt; 预测时刻i+1的target<br />重点：训练过程decoder部分的输入是target<br />预测过程区别：decoder的输入是上一时刻的输出<br /><br />作者：fada_away<br />链接：https://www.jianshu.com/p/25f0b0cab45f<br />来源：简书<br />著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</div></div></div></foreignObject><text x="3610" y="3555" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">Seq2Seq模型训练：...</text></switch></g><path d="M 2495 3565 L 2774.35 3565" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2779.6 3565 L 2772.6 3568.5 L 2774.35 3565 L 2772.6 3561.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="2295" y="3520" width="200" height="90" rx="13.5" ry="13.5" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2295" y="3520" width="200" height="90" rx="13.5" ry="13.5" fill="#d80073" stroke="#a50040" pointer-events="none"/><path d="M 2309.65 3519 Q 2294 3519 2294 3534.65 L 2294 3556 Q 2395 3583 2496 3556 L 2496 3534.65 Q 2496 3519 2480.35 3519 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 198px; height: 1px; padding-top: 3565px; margin-left: 2296px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #ffffff; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">(cell_outputs, stop_token), cell_state</div></div></div></foreignObject><text x="2395" y="3569" fill="#ffffff" font-family="Helvetica" font-size="14px" text-anchor="middle">(cell_outputs, stop_token),...</text></switch></g><path d="M 965 460 L 965 480 L 965 470 L 965 483.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 965 488.88 L 961.5 481.88 L 965 483.63 L 968.5 481.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="690" y="350" width="550" height="110" rx="16.5" ry="16.5" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="690" y="350" width="550" height="110" rx="16.5" ry="16.5" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 707.65 349 Q 689 349 689 367.65 L 689 394 Q 965 427 1241 394 L 1241 367.65 Q 1241 349 1222.35 349 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 548px; height: 1px; padding-top: 405px; margin-left: 691px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; "><div>self._lengths = tf.tile([tf.shape(self._targets)[1]], [self._batch_size])</div><div>训练时，判断是否结束的长度，根据 outputs_per_step 对 目标值进行了抽取<br /></div></div></div></div></foreignObject><text x="965" y="410" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">self._lengths = tf.tile([tf.shape(self._targets)[1]], [self._batc...</text></switch></g><path d="M 965 330 L 965 350 L 965 330 L 965 343.63" fill="none" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/><path d="M 965 348.88 L 961.5 341.88 L 965 343.63 L 968.5 341.88 Z" fill="#d6b656" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/><rect x="845" y="270" width="240" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="845" y="270" width="240" height="60" rx="9" ry="9" fill="#fff2cc" stroke="#d6b656" pointer-events="none"/><path d="M 855.15 269 Q 844 269 844 280.15 L 844 294 Q 965 312 1086 294 L 1086 280.15 Q 1086 269 1074.85 269 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 300px; margin-left: 846px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">TacoTrainingHelper</div></div></div></foreignObject><text x="965" y="305" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">TacoTrainingHelper</text></switch></g><path d="M 1167.5 560 L 1243.63 560" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 1248.88 560 L 1241.88 563.5 L 1243.63 560 L 1241.88 556.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="762.5" y="490" width="405" height="140" rx="21" ry="21" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="762.5" y="490" width="405" height="140" rx="21" ry="21" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 784.65 489 Q 761.5 489 761.5 512.15 L 761.5 546 Q 965 588 1168.5 546 L 1168.5 512.15 Q 1168.5 489 1145.35 489 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 403px; height: 1px; padding-top: 560px; margin-left: 764px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; "><div>self._targets = targets[:, r-1::r, :]</div><div>以抽取后的mel 谱的时间步的mel帧作为训练时的参考 mel 帧值。</div><div>备注： 当前无论  r 为何值， decoder在解码的时候只取上1帧的mel谱输入作为input.<br /></div></div></div></div></foreignObject><text x="965" y="565" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">self._targets = targets[:, r-1::r, :]...</text></switch></g><path d="M 475 363 L 485 363 L 485 403 L 495.5 403 L 480 422 L 464.5 403 L 475 403 Z" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="420" y="312.5" width="120" height="50" rx="7.5" ry="7.5" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="420" y="312.5" width="120" height="50" rx="7.5" ry="7.5" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 428.65 311.5 Q 419 311.5 419 321.15 L 419 332.5 Q 480 347.5 541 332.5 L 541 321.15 Q 541 311.5 531.35 311.5 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 338px; margin-left: 421px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; "><div>hparams</div></div></div></div></foreignObject><text x="480" y="343" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">hparams</text></switch></g><rect x="300" y="422.5" width="360" height="135" rx="20.25" ry="20.25" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="300" y="422.5" width="360" height="135" rx="20.25" ry="20.25" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 321.4 421.5 Q 299 421.5 299 443.9 L 299 476.5 Q 480 517 661 476.5 L 661 443.9 Q 661 421.5 638.6 421.5 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 358px; height: 1px; padding-top: 490px; margin-left: 301px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; "><div>tacotron_teacher_forcing_ratio=1.,   <br /></div><div># 可以更改该值小于1, 这样在训练的时候 会有一定的比例输入的参考值会 预测出的输出。</div></div></div></div></foreignObject><text x="480" y="495" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">tacotron_teacher_forcing_ratio=1.,...</text></switch></g><path d="M 965 819 L 965 839 L 965 829 L 965 842.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 965 847.88 L 961.5 840.88 L 965 842.63 L 968.5 840.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="720" y="759" width="490" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="720" y="759" width="490" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 730.15 758 Q 719 758 719 769.15 L 719 783 Q 965 801 1211 783 L 1211 769.15 Q 1211 758 1199.85 758 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 488px; height: 1px; padding-top: 789px; margin-left: 721px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; "><div>before = tf.compat.v1.losses.mean_squared_error(</div><div>self.tower_mel_targets[i],self.tower_decoder_output[i])</div></div></div></div></foreignObject><text x="965" y="794" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">before = tf.compat.v1.losses.mean_squared_error(...</text></switch></g><path d="M 965 909 L 965 929 L 965 917 L 965 930.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 965 935.88 L 961.5 928.88 L 965 930.63 L 968.5 928.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="680" y="849" width="570" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="680" y="849" width="570" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 690.15 848 Q 679 848 679 859.15 L 679 873 Q 965 891 1251 873 L 1251 859.15 Q 1251 848 1239.85 848 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 568px; height: 1px; padding-top: 879px; margin-left: 681px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">loss = before + after + stop_token_loss + regularization + linear_loss</div></div></div></foreignObject><text x="965" y="884" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">loss = before + after + stop_token_loss + regularization + linear_l...</text></switch></g><path d="M 965 997 L 965 1017 L 965 1000 L 965 1013.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 965 1018.88 L 961.5 1011.88 L 965 1013.63 L 968.5 1011.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="835" y="937" width="260" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="835" y="937" width="260" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 845.15 936 Q 834 936 834 947.15 L 834 961 Q 965 979 1096 961 L 1096 947.15 Q 1096 936 1084.85 936 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 258px; height: 1px; padding-top: 967px; margin-left: 836px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">self.tower_loss.append(loss)</div></div></div></foreignObject><text x="965" y="972" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">self.tower_loss.append(loss)</text></switch></g><path d="M 965 1120 L 965 1140 L 965 1135 L 965 1148.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 965 1153.88 L 961.5 1146.88 L 965 1148.63 L 968.5 1146.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="715" y="1020" width="500" height="100" rx="15" ry="15" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="715" y="1020" width="500" height="100" rx="15" ry="15" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 731.15 1019 Q 714 1019 714 1036.15 L 714 1060 Q 965 1090 1216 1060 L 1216 1036.15 Q 1216 1019 1198.85 1019 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 498px; height: 1px; padding-top: 1070px; margin-left: 716px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; "><div>gradients <br /></div><div>= optimizer.compute_gradients(self.tower_loss[i])</div><div><br /></div>tower_gradients.append(gradients)</div></div></div></foreignObject><text x="965" y="1075" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">gradients...</text></switch></g><path d="M 965 1390 L 965 1433.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 965 1438.88 L 961.5 1431.88 L 965 1433.63 L 968.5 1431.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="840" y="1330" width="250" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="840" y="1330" width="250" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 850.15 1329 Q 839 1329 839 1340.15 L 839 1354 Q 965 1372 1091 1354 L 1091 1340.15 Q 1091 1329 1079.85 1329 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 1360px; margin-left: 841px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; "><div>self.gradients = avg_grads</div>clipped_gradients = avg_grads</div></div></div></foreignObject><text x="965" y="1365" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">self.gradients = avg_gradscli...</text></switch></g><path d="M 965 1280 L 965 1323.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 965 1328.88 L 961.5 1321.88 L 965 1323.63 L 968.5 1321.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="750" y="1155" width="430" height="125" rx="18.75" ry="18.75" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="750" y="1155" width="430" height="125" rx="18.75" ry="18.75" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 769.9 1154 Q 749 1154 749 1174.9 L 749 1205 Q 965 1242.5 1181 1205 L 1181 1174.9 Q 1181 1154 1160.1 1154 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 428px; height: 1px; padding-top: 1218px; margin-left: 751px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; "><div>for grad_and_vars in zip(*tower_gradients):</div><div>for g, _ in grad_and_vars:</div><div>expanded_g = tf.expand_dims(g, 0)<br /></div><div>grads.append(expanded_g)<br /></div><div>avg_grads.append(grad)<br /></div></div></div></div></foreignObject><text x="965" y="1223" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">for grad_and_vars in zip(*tower_gradients):...</text></switch></g><rect x="740" y="1440" width="450" height="90" rx="13.5" ry="13.5" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="740" y="1440" width="450" height="90" rx="13.5" ry="13.5" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 754.65 1439 Q 739 1439 739 1454.65 L 739 1476 Q 965 1503 1191 1476 L 1191 1454.65 Q 1191 1439 1175.35 1439 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 448px; height: 1px; padding-top: 1485px; margin-left: 741px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; "><div>self.optimize = optimizer.apply_gradients(</div><div>zip(clipped_gradients, vars),global_step=global_step)</div></div></div></div></foreignObject><text x="965" y="1490" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">self.optimize = optimizer.apply_gradients(...</text></switch></g><path d="M 700.5 715 L 700.5 705 L 818 705 L 818 694.5 L 837 710 L 818 725.5 L 818 715 Z" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="580" y="680" width="120" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="580" y="680" width="120" height="60" rx="9" ry="9" fill="#f8cecc" stroke="#b85450" pointer-events="none"/><path d="M 590.15 679 Q 579 679 579 690.15 L 579 704 Q 640 722 701 704 L 701 690.15 Q 701 679 689.85 679 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 710px; margin-left: 581px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; "><div>loss-grad-opt</div></div></div></div></foreignObject><text x="640" y="715" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">loss-grad-opt</text></switch></g><path d="M 965 740 L 965 760 L 965 739 L 965 752.63" fill="none" stroke="#d79b00" stroke-miterlimit="10" pointer-events="none"/><path d="M 965 757.88 L 961.5 750.88 L 965 752.63 L 968.5 750.88 Z" fill="#d79b00" stroke="#d79b00" stroke-miterlimit="10" pointer-events="none"/><rect x="837.5" y="680" width="255" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="837.5" y="680" width="255" height="60" rx="9" ry="9" fill="#f8cecc" stroke="#b85450" pointer-events="none"/><path d="M 847.65 679 Q 836.5 679 836.5 690.15 L 836.5 704 Q 965 722 1093.5 704 L 1093.5 690.15 Q 1093.5 679 1082.35 679 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 253px; height: 1px; padding-top: 710px; margin-left: 839px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">损失是按照一整句计算一次，然后SGD优化</div></div></div></foreignObject><text x="965" y="715" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">损失是按照一整句计算一次，然后SGD优化</text></switch></g><rect x="1250" y="470" width="600" height="180" rx="27" ry="27" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="1250" y="470" width="600" height="180" rx="27" ry="27" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 1278.15 469 Q 1249 469 1249 498.15 L 1249 542 Q 1550 596 1851 542 L 1851 498.15 Q 1851 469 1821.85 469 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 598px; height: 1px; padding-top: 560px; margin-left: 1251px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; "><div>next_inputs = tf.cond(</div><div>tf.less(tf.random.uniform([], minval=0, maxval=1, dtype=tf.float32), self._ratio),</div><div>#Teacher-forcing: return true frame</div><div style="font-size: 19px"> lambda: self._targets[:, <b>time</b>, :], <br /></div><div style="font-size: 19px"><br /></div><div style="font-size: 19px"> # _output_dim=hparams.<b>num_mels</b>  # 80</div>lambda: outputs[:,-self._output_dim:])</div></div></div></foreignObject><text x="1550" y="565" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">next_inputs = tf.cond(...</text></switch></g><path d="M 460 708 L 580 708 M 580 712 L 460 712 M 580 712" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="230" y="655" width="230" height="110" rx="16.5" ry="16.5" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="230" y="655" width="230" height="110" rx="16.5" ry="16.5" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 247.65 654 Q 229 654 229 672.65 L 229 699 Q 345 732 461 699 L 461 672.65 Q 461 654 442.35 654 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 228px; height: 1px; padding-top: 710px; margin-left: 231px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; "><div>fastspeech2的 loss 是按照：</div><div>整句。 并且也采用了 tacotron2的 postNet.<br /></div></div></div></div></foreignObject><text x="345" y="715" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">fastspeech2的 loss 是按照：...</text></switch></g><path d="M 2595 145 L 2595 170 L 2473.83 170 L 2473.77 188.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2473.75 193.88 L 2470.28 186.87 L 2473.77 188.63 L 2477.28 186.89 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="2325" y="55" width="540" height="90" rx="13.5" ry="13.5" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2325" y="55" width="540" height="90" rx="13.5" ry="13.5" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 2339.65 54 Q 2324 54 2324 69.65 L 2324 91 Q 2595 118 2866 91 L 2866 69.65 Q 2866 54 2850.35 54 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 538px; height: 1px; padding-top: 100px; margin-left: 2326px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; "><div>self.embedding_table = tf.compat.v1.get_variable(</div><div>"inputs_embedding", <br /></div><div>[<b>len(symbols), hp.embedding_dim</b>], dtype=tf.float32)</div><div>输入的 embbeding<br /></div></div></div></div></foreignObject><text x="2595" y="105" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">self.embedding_table = tf.compat.v1.get_variable(...</text></switch></g><path d="M 2550 4910 L 2550 4943.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2550 4948.88 L 2546.5 4941.88 L 2550 4943.63 L 2553.5 4941.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="2385" y="4850" width="330" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2385" y="4850" width="330" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 2395.15 4849 Q 2384 4849 2384 4860.15 L 2384 4874 Q 2550 4892 2716 4874 L 2716 4860.15 Q 2716 4849 2704.85 4849 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 328px; height: 1px; padding-top: 4880px; margin-left: 2386px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; "><div>char-seq</div><div>[batch_size,encTimeSteps,enc_emb_dim]<br /></div></div></div></div></foreignObject><text x="2550" y="4885" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">char-seq...</text></switch></g><path d="M 2550 4690 L 2550 4733.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2550 4738.88 L 2546.5 4731.88 L 2550 4733.63 L 2553.5 4731.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="2415" y="4630" width="270" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2415" y="4630" width="270" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 2425.15 4629 Q 2414 4629 2414 4640.15 L 2414 4654 Q 2550 4672 2686 4654 L 2686 4640.15 Q 2686 4629 2674.85 4629 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 268px; height: 1px; padding-top: 4660px; margin-left: 2416px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; "><div>input</div><div>char-seq</div><div>[batch_size,timeSteps]<br /></div></div></div></div></foreignObject><text x="2550" y="4665" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">input...</text></switch></g><path d="M 2550 4820 L 2550 4840 L 2550 4843.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2550 4848.88 L 2546.5 4841.88 L 2550 4843.63 L 2553.5 4841.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="2398.75" y="4740" width="302.5" height="80" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2398.75" y="4740" width="302.5" height="80" fill="#e1d5e7" stroke="#9673a6" pointer-events="none"/><path d="M 2397.75 4739 L 2397.75 4772 Q 2550 4796 2702.25 4772 L 2702.25 4739 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 301px; height: 1px; padding-top: 4780px; margin-left: 2400px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; "><div>enc_emb_table</div><div>[len(sym),enc_emb_dim]<br /></div><div>[284,512]<br /></div></div></div></div></foreignObject><text x="2550" y="4785" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">enc_emb_table...</text></switch></g><path d="M 2550 5010 L 2550 5030 L 2550 5020 L 2550 5033.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2550 5038.88 L 2546.5 5031.88 L 2550 5033.63 L 2553.5 5031.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="2457.5" y="4950" width="185" height="60" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2457.5" y="4950" width="185" height="60" fill="#e1d5e7" stroke="#9673a6" pointer-events="none"/><path d="M 2456.5 4949 L 2456.5 4974 Q 2550 4992 2643.5 4974 L 2643.5 4949 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 183px; height: 1px; padding-top: 4980px; margin-left: 2459px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">TacotronEncoderCell</div></div></div></foreignObject><text x="2550" y="4985" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">TacotronEncoderCell</text></switch></g><path d="M 2550 5100 L 2550 5120 L 2550 5110 L 2550 5123.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2550 5128.88 L 2546.5 5121.88 L 2550 5123.63 L 2553.5 5121.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="2340" y="5040" width="420" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2340" y="5040" width="420" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 2350.15 5039 Q 2339 5039 2339 5050.15 L 2339 5064 Q 2550 5082 2761 5064 L 2761 5050.15 Q 2761 5039 2749.85 5039 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 418px; height: 1px; padding-top: 5070px; margin-left: 2341px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; "><div>encoder_outputs <br /></div><div> [batch_size,encTimeSteps,encoder_lstm_units*2]</div></div></div></div></foreignObject><text x="2550" y="5075" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">encoder_outputs...</text></switch></g><path d="M 2550 5200 L 2550 5283.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2550 5288.88 L 2546.5 5281.88 L 2550 5283.63 L 2553.5 5281.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="2292.5" y="5130" width="515" height="70" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2292.5" y="5130" width="515" height="70" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 2291.5 5129 L 2291.5 5158 Q 2550 5179 2808.5 5158 L 2808.5 5129 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 513px; height: 1px; padding-top: 5165px; margin-left: 2294px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; "><div># [batch_size,encTimeSteps,encoder_lstm_units*2+spkEmbDim]<br /></div><div>encoder_cond_outputs = <br /></div><div>tf.concat((encoder_outputs, tiled_embed_targets), 2)</div></div></div></div></foreignObject><text x="2550" y="5170" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle"># [batch_size,encTimeSteps,encoder_lstm_units*2+spkEmbDim]...</text></switch></g><path d="M 2689.38 5500 L 2753.63 5500" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2758.88 5500 L 2751.88 5503.5 L 2753.63 5500 L 2751.88 5496.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="2410.63" y="5470" width="278.75" height="60" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2410.63" y="5470" width="278.75" height="60" fill="#e1d5e7" stroke="#9673a6" pointer-events="none"/><path d="M 2409.63 5469 L 2409.63 5494 Q 2550.01 5512 2690.38 5494 L 2690.38 5469 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 277px; height: 1px; padding-top: 5500px; margin-left: 2412px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; "><div>_compute_attention</div><div>(Attention,cell_output,state)</div></div></div></div></foreignObject><text x="2550" y="5505" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">_compute_attention...</text></switch></g><rect x="2302.5" y="5830" width="120" height="120" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2302.5" y="5830" width="120" height="120" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 2301.5 5829 L 2301.5 5878 Q 2362.5 5914 2423.5 5878 L 2423.5 5829 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 5890px; margin-left: 2304px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">Decoder</div></div></div></foreignObject><text x="2363" y="5895" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">Decoder</text></switch></g><path d="M 2910 5700 L 2930 5700 L 2925.67 5700 L 2939.26 5700" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2944.51 5700 L 2937.51 5703.5 L 2939.26 5700 L 2937.51 5696.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2860 5730 L 2860 5780 L 3024.67 5780 L 3024.64 5873.63" fill="none" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/><path d="M 3024.64 5878.88 L 3021.14 5871.88 L 3024.64 5873.63 L 3028.14 5871.88 Z" fill="#d6b656" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/><rect x="2810" y="5670" width="100" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2810" y="5670" width="100" height="60" rx="9" ry="9" fill="#cce5ff" stroke="#36393d" pointer-events="none"/><path d="M 2820.15 5669 Q 2809 5669 2809 5680.15 L 2809 5694 Q 2860 5712 2911 5694 L 2911 5680.15 Q 2911 5669 2899.85 5669 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 98px; height: 1px; padding-top: 5700px; margin-left: 2811px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">next_state</div></div></div></foreignObject><text x="2860" y="5705" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">next_state</text></switch></g><path d="M 2647.5 5770 L 2647.5 5736.37" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2647.5 5731.12 L 2651 5738.12 L 2647.5 5736.37 L 2644 5738.12 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="2587.5" y="5770" width="120" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2587.5" y="5770" width="120" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 2597.65 5769 Q 2586.5 5769 2586.5 5780.15 L 2586.5 5794 Q 2647.5 5812 2708.5 5794 L 2708.5 5780.15 Q 2708.5 5769 2697.35 5769 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 5800px; margin-left: 2589px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">&lt;EOS&gt;</div></div></div></foreignObject><text x="2648" y="5805" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">&lt;EOS&gt;</text></switch></g><path d="M 2745 5700 L 2803.63 5700" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2808.88 5700 L 2801.88 5703.5 L 2803.63 5700 L 2801.88 5696.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2690 5670 L 2690 5660 L 2733.83 5660 L 2733.76 5626.37" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2733.75 5621.12 L 2737.27 5628.11 L 2733.76 5626.37 L 2730.27 5628.13 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2745 5730 L 2745 5770 L 2760 5770 L 2760 6930 L 3103.5 6930 L 3103.5 6886.37" fill="none" stroke="#d79b00" stroke-miterlimit="10" pointer-events="none"/><path d="M 3103.5 6881.12 L 3107 6888.12 L 3103.5 6886.37 L 3100 6888.12 Z" fill="#d79b00" stroke="#d79b00" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 6936px; margin-left: 2806px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">inputs,state</div></div></div></foreignObject><text x="2806" y="6941" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">inputs,state</text></switch></g><rect x="2550" y="5670" width="195" height="60" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2550" y="5670" width="195" height="60" fill="#e1d5e7" stroke="#9673a6" pointer-events="none"/><path d="M 2549 5669 L 2549 5694 Q 2647.5 5712 2746 5694 L 2746 5669 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 193px; height: 1px; padding-top: 5700px; margin-left: 2551px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">TacotronDecoderCell</div></div></div></foreignObject><text x="2648" y="5705" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">TacotronDecoderCell</text></switch></g><path d="M 2360 5700 L 2543.63 5700" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2548.88 5700 L 2541.88 5703.5 L 2543.63 5700 L 2541.88 5696.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 5702px; margin-left: 2469px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">2=state</div></div></div></foreignObject><text x="2469" y="5707" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">2=state</text></switch></g><path d="M 2285 5670 L 2285 5617.5 L 2244.33 5617.5 L 2244.26 5571.37" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2244.25 5566.12 L 2247.76 5573.11 L 2244.26 5571.37 L 2240.76 5573.12 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 5602px; margin-left: 2241px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">2</div></div></div></foreignObject><text x="2241" y="5607" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">2</text></switch></g><rect x="2210" y="5670" width="150" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2210" y="5670" width="150" height="60" rx="9" ry="9" fill="#cce5ff" stroke="#36393d" pointer-events="none"/><path d="M 2220.15 5669 Q 2209 5669 2209 5680.15 L 2209 5694 Q 2285 5712 2361 5694 L 2361 5680.15 Q 2361 5669 2349.85 5669 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 148px; height: 1px; padding-top: 5700px; margin-left: 2211px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">decoder_init_state</div></div></div></foreignObject><text x="2285" y="5705" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">decoder_init_state</text></switch></g><path d="M 2780 5600 L 2790 5600 L 2790 5810 L 3043.17 5810 L 3043.13 5736.37" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 3043.13 5731.12 L 3046.63 5738.12 L 3043.13 5736.37 L 3039.63 5738.12 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="2687.5" y="5580" width="92.5" height="40" rx="6" ry="6" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2687.5" y="5580" width="92.5" height="40" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 2694.65 5579 Q 2686.5 5579 2686.5 5587.15 L 2686.5 5596 Q 2733.75 5608 2781 5596 L 2781 5587.15 Q 2781 5579 2772.85 5579 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 91px; height: 1px; padding-top: 5600px; margin-left: 2689px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">mel*r</div></div></div></foreignObject><text x="2734" y="5605" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">mel*r</text></switch></g><path d="M 3043.13 5670 L 3043.13 5626.37" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 3043.13 5621.12 L 3046.63 5628.12 L 3043.13 5626.37 L 3039.63 5628.12 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 3140.63 5700 L 3174.88 5700" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 3180.13 5700 L 3173.13 5703.5 L 3174.88 5700 L 3173.13 5696.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="2945.63" y="5670" width="195" height="60" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2945.63" y="5670" width="195" height="60" fill="#e1d5e7" stroke="#9673a6" pointer-events="none"/><path d="M 2944.63 5669 L 2944.63 5694 Q 3043.13 5712 3141.63 5694 L 3141.63 5669 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 193px; height: 1px; padding-top: 5700px; margin-left: 2947px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">TacotronDecoderCell</div></div></div></foreignObject><text x="3043" y="5705" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">TacotronDecoderCell</text></switch></g><path d="M 3089.38 5600 L 3160 5600 L 3160 5810 L 3401.5 5810 L 3401.5 5736.37" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 3401.5 5731.12 L 3405 5738.12 L 3401.5 5736.37 L 3398 5738.12 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="2996.88" y="5580" width="92.5" height="40" rx="6" ry="6" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2996.88" y="5580" width="92.5" height="40" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 3004.03 5579 Q 2995.88 5579 2995.88 5587.15 L 2995.88 5596 Q 3043.13 5608 3090.38 5596 L 3090.38 5587.15 Q 3090.38 5579 3082.23 5579 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 91px; height: 1px; padding-top: 5600px; margin-left: 2998px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">mel*r</div></div></div></foreignObject><text x="3043" y="5605" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">mel*r</text></switch></g><path d="M 3270 5700 L 3290.17 5700 L 3284 5700 L 3297.63 5700" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 3302.88 5700 L 3295.88 5703.5 L 3297.63 5700 L 3295.88 5696.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="3181.25" y="5670" width="88.75" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="3181.25" y="5670" width="88.75" height="60" rx="9" ry="9" fill="#cce5ff" stroke="#36393d" pointer-events="none"/><path d="M 3191.4 5669 Q 3180.25 5669 3180.25 5680.15 L 3180.25 5694 Q 3225.63 5712 3271 5694 L 3271 5680.15 Q 3271 5669 3259.85 5669 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 87px; height: 1px; padding-top: 5700px; margin-left: 3182px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">next_state</div></div></div></foreignObject><text x="3226" y="5705" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">next_state</text></switch></g><rect x="3304" y="5670" width="195" height="60" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="3304" y="5670" width="195" height="60" fill="#e1d5e7" stroke="#9673a6" pointer-events="none"/><path d="M 3303 5669 L 3303 5694 Q 3401.5 5712 3500 5694 L 3500 5669 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 193px; height: 1px; padding-top: 5700px; margin-left: 3305px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">TacotronDecoderCell</div></div></div></foreignObject><text x="3402" y="5705" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">TacotronDecoderCell</text></switch></g><rect x="3355.25" y="5580" width="92.5" height="40" rx="6" ry="6" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="3355.25" y="5580" width="92.5" height="40" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 3362.4 5579 Q 3354.25 5579 3354.25 5587.15 L 3354.25 5596 Q 3401.5 5608 3448.75 5596 L 3448.75 5587.15 Q 3448.75 5579 3440.6 5579 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 91px; height: 1px; padding-top: 5600px; margin-left: 3356px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">mel*r</div></div></div></foreignObject><text x="3402" y="5605" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">mel*r</text></switch></g><path d="M 3401.5 5670 L 3401.5 5626.37" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 3401.5 5621.12 L 3405 5628.12 L 3401.5 5626.37 L 3398 5628.12 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2520 6125 L 2520 6740 L 2922.13 6740" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2927.38 6740 L 2920.38 6743.5 L 2922.13 6740 L 2920.38 6736.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 6154px; margin-left: 2521px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">2</div></div></div></foreignObject><text x="2521" y="6159" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">2</text></switch></g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 6743px; margin-left: 2889px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">1</div></div></div></foreignObject><text x="2889" y="6748" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">1</text></switch></g><path d="M 2634 6040 L 2634 5885 L 2557.67 5885 L 2557.61 5737.03" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2557.61 5731.78 L 2561.11 5738.78 L 2557.61 5737.03 L 2554.11 5738.78 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 5759px; margin-left: 2559px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">1=input</div></div></div></foreignObject><text x="2559" y="5764" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">1=input</text></switch></g><rect x="2520" y="6040" width="228" height="85" rx="12.75" ry="12.75" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2520" y="6040" width="228" height="85" rx="12.75" ry="12.75" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 2533.9 6039 Q 2519 6039 2519 6053.9 L 2519 6074 Q 2634 6099.5 2749 6074 L 2749 6053.9 Q 2749 6039 2734.1 6039 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 226px; height: 1px; padding-top: 6083px; margin-left: 2521px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; "><div>finished,</div><div><b>next_inputs,</b> <br /></div><div>next_state </div></div></div></div></foreignObject><text x="2634" y="6088" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">finished,...</text></switch></g><path d="M 2472.5 6082.5 L 2513.63 6082.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2518.88 6082.5 L 2511.88 6086 L 2513.63 6082.5 L 2511.88 6079 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="2352.5" y="6052.5" width="120" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2352.5" y="6052.5" width="120" height="60" rx="9" ry="9" fill="#e1d5e7" stroke="#9673a6" pointer-events="none"/><path d="M 2362.65 6051.5 Q 2351.5 6051.5 2351.5 6062.65 L 2351.5 6076.5 Q 2412.5 6094.5 2473.5 6076.5 L 2473.5 6062.65 Q 2473.5 6051.5 2462.35 6051.5 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 6083px; margin-left: 2354px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">trainHelper</div></div></div></foreignObject><text x="2413" y="6088" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">trainHelper</text></switch></g><rect x="3300" y="6080" width="120" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="3300" y="6080" width="120" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 3310.15 6079 Q 3299 6079 3299 6090.15 L 3299 6104 Q 3360 6122 3421 6104 L 3421 6090.15 Q 3421 6079 3409.85 6079 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 6110px; margin-left: 3301px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; "><div>time, <br /></div><div>inputs, <br /></div><div>state</div></div></div></div></foreignObject><text x="3360" y="6115" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">time,...</text></switch></g><rect x="2933.13" y="6112.5" width="220" height="110" rx="16.5" ry="16.5" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2933.13" y="6112.5" width="220" height="110" rx="16.5" ry="16.5" fill="#e1d5e7" stroke="#9673a6" pointer-events="none"/><path d="M 2950.78 6111.5 Q 2932.13 6111.5 2932.13 6130.15 L 2932.13 6156.5 Q 3043.13 6189.5 3154.13 6156.5 L 3154.13 6130.15 Q 3154.13 6111.5 3135.48 6111.5 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 218px; height: 1px; padding-top: 6168px; margin-left: 2934px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; "><div><b><i>CustomDecoder</i></b></div><div>(cell_outputs, stop_tokens), <b>next_state</b></div></div></div></div></foreignObject><text x="3043" y="6173" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">CustomDecoder...</text></switch></g><path d="M 2830 5970 L 2780 5970 L 2780 6310 L 3043.17 6310 L 3043.13 6228.87" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 3043.13 6223.62 L 3046.63 6230.62 L 3043.13 6228.87 L 3039.63 6230.62 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 6252px; margin-left: 3043px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">3</div></div></div></foreignObject><text x="3043" y="6257" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">3</text></switch></g><rect x="2830" y="5880" width="389.28" height="180" rx="27" ry="27" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2830" y="5880" width="389.28" height="180" rx="27" ry="27" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 2858.15 5879 Q 2829 5879 2829 5908.15 L 2829 5952 Q 3024.64 6006 3220.28 5952 L 3220.28 5908.15 Q 3220.28 5879 3191.13 5879 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 387px; height: 1px; padding-top: 5970px; margin-left: 2831px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; "><u><b>next_state</b></u>=<div align="center">cell_state</div> = TacotronDecoderCellState(<br />            time=state.time + 1,<br />           <b> cell_state</b>=<b><i>next_cell_state</i></b>,<br />            attention=context_vector,<br />            alignments=cumulated_alignments,<br />            alignment_history=alignment_history)</div></div></div></foreignObject><text x="3025" y="5975" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">next_state=...</text></switch></g><path d="M 2795 6511.5 L 2178.5 6511.5 L 2178.5 5571.37" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2178.5 5566.12 L 2182 5573.12 L 2178.5 5571.37 L 2175 5573.12 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 5612px; margin-left: 2177px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">1</div></div></div></foreignObject><text x="2177" y="5617" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">1</text></switch></g><path d="M 3415 6511.5 L 3510 6511.5 L 3510 5346.37" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 3510 5341.12 L 3513.5 5348.12 L 3510 5346.37 L 3506.5 5348.12 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 5381px; margin-left: 3510px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">1</div></div></div></foreignObject><text x="3510" y="5386" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">1</text></switch></g><path d="M 3270 6481.5 L 3270 5970 L 3225.65 5970" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 3220.4 5970 L 3227.4 5966.5 L 3225.65 5970 L 3227.4 5973.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 6019px; margin-left: 3273px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">2</div></div></div></foreignObject><text x="3273" y="6024" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">2</text></switch></g><rect x="2795" y="6481.5" width="620" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2795" y="6481.5" width="620" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 2805.15 6480.5 Q 2794 6480.5 2794 6491.65 L 2794 6505.5 Q 3105 6523.5 3416 6505.5 L 3416 6491.65 Q 3416 6480.5 3404.85 6480.5 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 618px; height: 1px; padding-top: 6512px; margin-left: 2796px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; "><div><b>LSTM_output</b>, <i><b>next_cell_state</b></i> = TacotronDecoderCell._cell=DecoderRNN(<b>LSTM_input</b>, <strike><b><i>state.cell_state</i></b></strike>)</div></div></div></div></foreignObject><text x="3105" y="6517" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">LSTM_output, next_cell_state = TacotronDecoderCell._cell=DecoderRNN(LSTM_...</text></switch></g><path d="M 3105 6610 L 3105 6580 L 3105 6547.87" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 3105 6542.62 L 3108.5 6549.62 L 3105 6547.87 L 3101.5 6549.62 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 6568px; margin-left: 3108px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">1</div></div></div></foreignObject><text x="3108" y="6573" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">1</text></switch></g><rect x="2793" y="6610" width="621" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2793" y="6610" width="621" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 2803.15 6609 Q 2792 6609 2792 6620.15 L 2792 6634 Q 3103.5 6652 3415 6634 L 3415 6620.15 Q 3415 6609 3403.85 6609 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 619px; height: 1px; padding-top: 6640px; margin-left: 2794px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">L<b>STM_input</b> = tf.concat([prenet_output, <i><b><u>state.attention</u></b></i>], axis=-1)</div></div></div></foreignObject><text x="3104" y="6645" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">LSTM_input = tf.concat([prenet_output, state.attention], axis=-1)</text></switch></g><path d="M 3103.5 6710 L 3103.5 6676.37" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 3103.5 6671.12 L 3107 6678.12 L 3103.5 6676.37 L 3100 6678.12 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="2928.5" y="6710" width="350" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2928.5" y="6710" width="350" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 2938.65 6709 Q 2927.5 6709 2927.5 6720.15 L 2927.5 6734 Q 3103.5 6752 3279.5 6734 L 3279.5 6720.15 Q 3279.5 6709 3268.35 6709 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 348px; height: 1px; padding-top: 6740px; margin-left: 2930px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">prenet_output = self._prenet(<b>inputs</b>)</div></div></div></foreignObject><text x="3104" y="6745" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">prenet_output = self._prenet(inputs)</text></switch></g><path d="M 3720 5310 L 3750 5310 L 3750 5480 L 3844 5480 L 3844 5613.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 3844 5618.88 L 3840.5 5611.88 L 3844 5613.63 L 3847.5 5611.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 3590 5340 L 3590 5805 L 3717.5 5805 L 3717.5 6263.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 3717.5 6268.88 L 3714 6261.88 L 3717.5 6263.63 L 3721 6261.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="3300" y="5280" width="420" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="3300" y="5280" width="420" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 3310.15 5279 Q 3299 5279 3299 5290.15 L 3299 5304 Q 3510 5322 3721 5304 L 3721 5290.15 Q 3721 5279 3709.85 5279 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 418px; height: 1px; padding-top: 5310px; margin-left: 3301px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">projections_input = tf.concat([<b>LSTM_output</b>, <b>context_vector</b>], axis=-1)</div></div></div></foreignObject><text x="3510" y="5315" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">projections_input = tf.concat([LSTM_output, conte...</text></switch></g><path d="M 3210 5500 L 3255 5500 L 3255 5310 L 3293.63 5310" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 3298.88 5310 L 3291.88 5313.5 L 3293.63 5310 L 3291.88 5306.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 5338px; margin-left: 3258px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">2</div></div></div></foreignObject><text x="3258" y="5343" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">2</text></switch></g><rect x="2760" y="5470" width="450" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2760" y="5470" width="450" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 2770.15 5469 Q 2759 5469 2759 5480.15 L 2759 5494 Q 2985 5512 3211 5494 L 3211 5480.15 Q 3211 5469 3199.85 5469 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 448px; height: 1px; padding-top: 5500px; margin-left: 2761px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; "><b>context_vector</b>, alignments, cumulated_alignment</div></div></div></foreignObject><text x="2985" y="5505" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">context_vector, alignments, cumulated_alignment</text></switch></g><path d="M 2310 5500 L 2404.26 5500" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2409.51 5500 L 2402.51 5503.5 L 2404.26 5500 L 2402.51 5496.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="2047" y="5435" width="263" height="130" rx="19.5" ry="19.5" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2047" y="5435" width="263" height="130" rx="19.5" ry="19.5" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 2067.65 5434 Q 2046 5434 2046 5455.65 L 2046 5487 Q 2178.5 5526 2311 5487 L 2311 5455.65 Q 2311 5434 2289.35 5434 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 261px; height: 1px; padding-top: 5500px; margin-left: 2048px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; "><div>LSTM_output-&gt;cell_output</div><div>previous_alignments--&gt;state</div>=state.alignments</div></div></div></foreignObject><text x="2179" y="5505" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">LSTM_output-&gt;cell_output...</text></switch></g><path d="M 3844 5680 L 3844 6167.5 L 3159.5 6167.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 3154.25 6167.5 L 3161.25 6164 L 3159.5 6167.5 L 3161.25 6171 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 6172px; margin-left: 3187px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">1</div></div></div></foreignObject><text x="3187" y="6177" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">1</text></switch></g><rect x="3609" y="5620" width="470" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="3609" y="5620" width="470" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 3619.15 5619 Q 3608 5619 3608 5630.15 L 3608 5644 Q 3844 5662 4080 5644 L 4080 5630.15 Q 4080 5619 4068.85 5619 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 468px; height: 1px; padding-top: 5650px; margin-left: 3610px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; "><b>cell_outputs </b>= self._frame_projection(projections_input)</div></div></div></foreignObject><text x="3844" y="5655" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">cell_outputs = self._frame_projection(projections_input)</text></switch></g><path d="M 3600 6300 L 3098.17 6300 L 3098.13 6228.87" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 3098.13 6223.62 L 3101.63 6230.62 L 3098.13 6228.87 L 3094.63 6230.62 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 6249px; margin-left: 3102px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">2</div></div></div></foreignObject><text x="3102" y="6254" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">2</text></switch></g><rect x="3600" y="6270" width="470" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="3600" y="6270" width="470" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 3610.15 6269 Q 3599 6269 3599 6280.15 L 3599 6294 Q 3835 6312 4071 6294 L 4071 6280.15 Q 4071 6269 4059.85 6269 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 468px; height: 1px; padding-top: 6300px; margin-left: 3601px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">stop_tokens = self._stop_projection(projections_input)</div></div></div></foreignObject><text x="3835" y="6305" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">stop_tokens = self._stop_projection(projections_input)</text></switch></g><path d="M 3103.5 6820 L 3103.5 6776.37" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 3103.5 6771.12 L 3107 6778.12 L 3103.5 6776.37 L 3100 6778.12 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 3163.5 6850 L 3360.67 6850 L 3360.6 6676.01" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 3360.59 6670.76 L 3364.1 6677.76 L 3360.6 6676.01 L 3357.1 6677.76 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 6695px; margin-left: 3359px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">2</div></div></div></foreignObject><text x="3359" y="6700" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">2</text></switch></g><rect x="3043.5" y="6820" width="120" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="3043.5" y="6820" width="120" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 3053.65 6819 Q 3042.5 6819 3042.5 6830.15 L 3042.5 6844 Q 3103.5 6862 3164.5 6844 L 3164.5 6830.15 Q 3164.5 6819 3153.35 6819 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 6850px; margin-left: 3045px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">inputs,state</div></div></div></foreignObject><text x="3104" y="6855" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">inputs,state</text></switch></g><path d="M 2550 5350 L 2550 5463.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2550 5468.88 L 2546.5 5461.88 L 2550 5463.63 L 2553.5 5461.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="2490" y="5290" width="120" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2490" y="5290" width="120" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 2500.15 5289 Q 2489 5289 2489 5300.15 L 2489 5314 Q 2550 5332 2611 5314 L 2611 5300.15 Q 2611 5289 2599.85 5289 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 5320px; margin-left: 2491px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">Attention</div></div></div></foreignObject><text x="2550" y="5325" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">Attention</text></switch></g><path d="M 2550.01 5530 L 2550.01 5530" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2550.01 5530 L 2550.01 5530 L 2550.01 5530 L 2550.01 5530 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://desk.draw.io/support/solutions/articles/16000042487" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Viewer does not support full SVG 1.1</text></a></switch></svg>