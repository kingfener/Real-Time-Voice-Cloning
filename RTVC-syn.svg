<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" style="background-color: rgb(255, 255, 255);" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="3892px" height="4596px" viewBox="-0.5 -0.5 3892 4596"><defs><linearGradient x1="0%" y1="0%" x2="0%" y2="100%" id="mx-gradient-d5e8d4-1-97d077-1-s-0"><stop offset="0%" style="stop-color:#d5e8d4"/><stop offset="100%" style="stop-color:#97d077"/></linearGradient><linearGradient x1="0%" y1="0%" x2="0%" y2="100%" id="mx-gradient-ffffff-0.9-ffffff-0.1-s-0"><stop offset="0%" style="stop-color:#ffffff;stop-opacity:0.9"/><stop offset="100%" style="stop-color:#ffffff;stop-opacity:0.1"/></linearGradient><linearGradient x1="0%" y1="0%" x2="0%" y2="100%" id="mx-gradient-e6d0de-1-d5739d-1-s-0"><stop offset="0%" style="stop-color:#e6d0de"/><stop offset="100%" style="stop-color:#d5739d"/></linearGradient><linearGradient x1="0%" y1="0%" x2="0%" y2="100%" id="mx-gradient-fff2cc-1-ffd966-1-s-0"><stop offset="0%" style="stop-color:#fff2cc"/><stop offset="100%" style="stop-color:#ffd966"/></linearGradient><linearGradient x1="0%" y1="0%" x2="0%" y2="100%" id="mx-gradient-f8cecc-1-ea6b66-1-s-0"><stop offset="0%" style="stop-color:#f8cecc"/><stop offset="100%" style="stop-color:#ea6b66"/></linearGradient><clipPath id="mx-clip-4-1215-852-26-0"><rect x="4" y="1215" width="852" height="26"/></clipPath><clipPath id="mx-clip-4-1241-852-26-0"><rect x="4" y="1241" width="852" height="26"/></clipPath><clipPath id="mx-clip-4-1267-852-26-0"><rect x="4" y="1267" width="852" height="26"/></clipPath><clipPath id="mx-clip-4-1293-852-26-0"><rect x="4" y="1293" width="852" height="26"/></clipPath><clipPath id="mx-clip-4-1319-852-26-0"><rect x="4" y="1319" width="852" height="26"/></clipPath><clipPath id="mx-clip-4-1345-852-26-0"><rect x="4" y="1345" width="852" height="26"/></clipPath><clipPath id="mx-clip-4-1371-852-26-0"><rect x="4" y="1371" width="852" height="26"/></clipPath><clipPath id="mx-clip-4-1397-852-402-0"><rect x="4" y="1397" width="852" height="402"/></clipPath><clipPath id="mx-clip-4-1799-852-26-0"><rect x="4" y="1799" width="852" height="26"/></clipPath><clipPath id="mx-clip-4-1825-852-232-0"><rect x="4" y="1825" width="852" height="232"/></clipPath><clipPath id="mx-clip-4-2057-852-134-0"><rect x="4" y="2057" width="852" height="134"/></clipPath><clipPath id="mx-clip-4-2191-852-134-0"><rect x="4" y="2191" width="852" height="134"/></clipPath><clipPath id="mx-clip-4-2325-852-134-0"><rect x="4" y="2325" width="852" height="134"/></clipPath><clipPath id="mx-clip-4-2459-852-134-0"><rect x="4" y="2459" width="852" height="134"/></clipPath></defs><g><rect x="2390" y="20" width="120" height="60" fill="#e1d5e7" stroke="#9673a6" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 50px; margin-left: 2391px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">synthesizer-RTVC</div></div></div></foreignObject><text x="2450" y="54" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">synthesizer-RTVC</text></switch></g><path d="M 1965 350 L 1990 350 L 2043.63 350" fill="none" stroke="#d79b00" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2048.88 350 L 2041.88 353.5 L 2043.63 350 L 2041.88 346.5 Z" fill="#d79b00" stroke="#d79b00" stroke-miterlimit="10" pointer-events="all"/><path d="M 2137.5 800 L 1875 800 L 1875 1060 L 1872 1060 L 1872 1073.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1872 1078.88 L 1868.5 1071.88 L 1872 1073.63 L 1875.5 1071.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2137.5" y="770" width="160" height="60" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 158px; height: 1px; padding-top: 800px; margin-left: 2139px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>psk-Embbed</div><div>tiled_embed_targets<br /></div></div></div></div></foreignObject><text x="2218" y="804" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">psk-Embbed...</text></switch></g><path d="M 2565 330 L 2565 350 L 2565 340 L 2565 353.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2565 358.88 L 2561.5 351.88 L 2565 353.63 L 2568.5 351.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2505" y="290" width="120" height="40" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 310px; margin-left: 2506px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">TacotronDecoderCell</div></div></div></foreignObject><text x="2565" y="314" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">TacotronDecoderCell</text></switch></g><path d="M 2170 345 L 2190 345 L 2190 350 L 2203.63 350" fill="none" stroke="#d79b00" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2208.88 350 L 2201.88 353.5 L 2203.63 350 L 2201.88 346.5 Z" fill="#d79b00" stroke="#d79b00" stroke-miterlimit="10" pointer-events="all"/><path d="M 2105 370.5 L 2115 370.5 L 2115 390.5 L 2125.5 390.5 L 2110 409.5 L 2094.5 390.5 L 2105 390.5 Z" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2050" y="320" width="120" height="50" rx="7.5" ry="7.5" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 345px; margin-left: 2051px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">EncoderConvlutions</div></div></div></foreignObject><text x="2110" y="349" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">EncoderConvlutions</text></switch></g><path d="M 2110 460 L 2110 490 L 1787.57 490 L 1787.51 523.63" fill="none" stroke="#d79b00" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1787.5 528.88 L 1784.01 521.88 L 1787.51 523.63 L 1791.01 521.89 Z" fill="#d79b00" stroke="#d79b00" stroke-miterlimit="10" pointer-events="all"/><rect x="2050" y="410" width="120" height="50" rx="7.5" ry="7.5" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 435px; margin-left: 2051px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">EncoderRNN</div></div></div></foreignObject><text x="2110" y="439" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">EncoderRNN</text></switch></g><path d="M 2565 420 L 2565 440 L 2565 430 L 2565 443.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2565 448.88 L 2561.5 441.88 L 2565 443.63 L 2568.5 441.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2505" y="360" width="120" height="60" rx="9" ry="9" fill="#99ffcc" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 390px; margin-left: 2506px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">PreNet</div></div></div></foreignObject><text x="2565" y="394" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">PreNet</text></switch></g><path d="M 2565 510 L 2565 530 L 2565 520 L 2565 533.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2565 538.88 L 2561.5 531.88 L 2565 533.63 L 2568.5 531.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2475" y="450" width="180" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 178px; height: 1px; padding-top: 480px; margin-left: 2476px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">LocalsensitiveAttention</div></div></div></foreignObject><text x="2565" y="484" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">LocalsensitiveAttention</text></switch></g><path d="M 2625 570 L 2698.63 570" fill="none" stroke="#d79b00" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2703.88 570 L 2696.88 573.5 L 2698.63 570 L 2696.88 566.5 Z" fill="#d79b00" stroke="#d79b00" stroke-miterlimit="10" pointer-events="all"/><rect x="2505" y="540" width="120" height="60" rx="9" ry="9" fill="#cc6600" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 570px; margin-left: 2506px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">DecoderRNN</div></div></div></foreignObject><text x="2565" y="574" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">DecoderRNN</text></switch></g><path d="M 2625 670 L 2728.63 670" fill="none" stroke="#d79b00" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2733.88 670 L 2726.88 673.5 L 2728.63 670 L 2726.88 666.5 Z" fill="#d79b00" stroke="#d79b00" stroke-miterlimit="10" pointer-events="all"/><rect x="2505" y="640" width="120" height="60" rx="9" ry="9" fill="#ff99ff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 670px; margin-left: 2506px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">FrameProjection</div></div></div></foreignObject><text x="2565" y="674" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">FrameProjection</text></switch></g><path d="M 2625 770 L 2678.63 770" fill="none" stroke="#d79b00" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2683.88 770 L 2676.88 773.5 L 2678.63 770 L 2676.88 766.5 Z" fill="#d79b00" stroke="#d79b00" stroke-miterlimit="10" pointer-events="all"/><rect x="2505" y="740" width="120" height="60" rx="9" ry="9" fill="#ffb366" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 770px; margin-left: 2506px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">stopProjection</div></div></div></foreignObject><text x="2565" y="774" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">stopProjection</text></switch></g><path d="M 2280 350 L 2293.63 350" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2298.88 350 L 2291.88 353.5 L 2293.63 350 L 2291.88 346.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2210" y="320" width="70" height="60" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 2217 320 L 2217 380 M 2273 320 L 2273 380" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 54px; height: 1px; padding-top: 350px; margin-left: 2218px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">conv1d</div></div></div></foreignObject><text x="2245" y="354" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">conv1d</text></switch></g><path d="M 2360 380 L 2360 393.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2360 398.88 L 2356.5 391.88 L 2360 393.63 L 2363.5 391.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2300" y="320" width="120" height="60" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 2312 320 L 2312 380 M 2408 320 L 2408 380" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 94px; height: 1px; padding-top: 350px; margin-left: 2312px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>tf.compat.</div><div>v1.layers.</div><div>conv1d()</div></div></div></div></foreignObject><text x="2359" y="354" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">tf.compat....</text></switch></g><path d="M 2360 460 L 2360 483.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2360 488.88 L 2356.5 481.88 L 2360 483.63 L 2363.5 481.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2300" y="400" width="120" height="60" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 2312 400 L 2312 460 M 2408 400 L 2408 460" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 94px; height: 1px; padding-top: 430px; margin-left: 2312px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>tf.batch_normalize()</div></div></div></div></foreignObject><text x="2359" y="434" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">tf.batch_normali...</text></switch></g><path d="M 2360 550 L 2360 570 L 2360 550 L 2360 563.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2360 568.88 L 2356.5 561.88 L 2360 563.63 L 2363.5 561.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2300" y="490" width="120" height="60" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 2312 490 L 2312 550 M 2408 490 L 2408 550" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 94px; height: 1px; padding-top: 520px; margin-left: 2312px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">activation</div></div></div></foreignObject><text x="2359" y="524" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">activation</text></switch></g><path d="M 2300 600 L 2241.37 600" fill="none" stroke="#d79b00" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2236.12 600 L 2243.12 596.5 L 2241.37 600 L 2243.12 603.5 Z" fill="#d79b00" stroke="#d79b00" stroke-miterlimit="10" pointer-events="all"/><rect x="2300" y="570" width="120" height="60" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 2312 570 L 2312 630 M 2408 570 L 2408 630" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 94px; height: 1px; padding-top: 600px; margin-left: 2312px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">tf.dropout()</div></div></div></foreignObject><text x="2359" y="604" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">tf.dropout()</text></switch></g><path d="M 1787.57 590 L 1787.57 610 L 1788 610 L 1788 608.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1788 613.88 L 1784.5 606.88 L 1788 608.63 L 1791.5 606.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="1645" y="530" width="285" height="60" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 1674 530 L 1674 590 M 1901 530 L 1901 590" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 226px; height: 1px; padding-top: 560px; margin-left: 1675px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>_fw_cell=zoneoutLSTMCell()</div><div>_bw_cell = ZoneoutLSTMCell</div></div></div></div></foreignObject><text x="1788" y="564" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">_fw_cell=zoneoutLSTMCell()...</text></switch></g><path d="M 1787.5 680 L 1787.5 693.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1787.5 698.88 L 1784 691.88 L 1787.5 693.63 L 1791 691.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 1640 650 L 1370 650 L 1370 576.37" fill="none" stroke="#d79b00" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1370 571.12 L 1373.5 578.12 L 1370 576.37 L 1366.5 578.12 Z" fill="#d79b00" stroke="#d79b00" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 656px; margin-left: 1430px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; "><div>bidirectional_dynamic_rnn</div></div></div></div></foreignObject><text x="1430" y="660" fill="#000000" font-family="Helvetica" font-size="14px" text-anchor="middle">bidirectional_dynamic_rnn</text></switch></g><rect x="1640" y="620" width="295" height="60" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 1670 620 L 1670 680 M 1905 620 L 1905 680" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 234px; height: 1px; padding-top: 650px; margin-left: 1671px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>outputs, (fw_state, bw_state) = tf.compat.v1.nn.bidirectional_dynamic_rnn(</div></div></div></div></foreignObject><text x="1788" y="654" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">outputs, (fw_state, bw_state) = tf.comp...</text></switch></g><path d="M 1787.57 760 L 1787.57 800 L 1773.43 800 L 1773.49 833.63" fill="none" stroke="#d79b00" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1773.5 838.88 L 1769.99 831.89 L 1773.49 833.63 L 1776.99 831.88 Z" fill="#d79b00" stroke="#d79b00" stroke-miterlimit="10" pointer-events="all"/><rect x="1680" y="700" width="215" height="60" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 1702 700 L 1702 760 M 1873 700 L 1873 760" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 170px; height: 1px; padding-top: 730px; margin-left: 1702px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">tf.concat(outputs,axis=2)</div></div></div></foreignObject><text x="1788" y="734" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">tf.concat(outputs,axis=2)</text></switch></g><path d="M 3196.5 570 L 3235.13 570" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3240.38 570 L 3233.38 573.5 L 3235.13 570 L 3233.38 566.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2926.5" y="540" width="270" height="60" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 2953.5 540 L 2953.5 600 M 3169.5 540 L 3169.5 600" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 214px; height: 1px; padding-top: 570px; margin-left: 2955px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">self._cell()=<div>tf.compat.v1</div><div>rnn.rnn_cell.</div>MultiRNNCell([ZoneoutLSTMCell(size)])</div></div></div></foreignObject><text x="3062" y="574" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">self._cell()=...</text></switch></g><path d="M 2860 570 L 2919.63 570" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2924.88 570 L 2917.88 573.5 L 2919.63 570 L 2917.88 566.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2705" y="540" width="155" height="60" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 2721 540 L 2721 600 M 2844 540 L 2844 600" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 122px; height: 1px; padding-top: 570px; margin-left: 2722px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">self._cell(input,state)</div></div></div></foreignObject><text x="2783" y="574" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">self._cell(input,sta...</text></switch></g><rect x="2735" y="640" width="120" height="60" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 2747 640 L 2747 700 M 2843 640 L 2843 700" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 94px; height: 1px; padding-top: 670px; margin-left: 2747px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">slef.dense(inputs)</div></div></div></foreignObject><text x="2794" y="674" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">slef.dense(input...</text></switch></g><path d="M 2925 770 L 2945 770 L 2945 745 L 2958.63 745" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2963.88 745 L 2956.88 748.5 L 2958.63 745 L 2956.88 741.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 2925 770 L 2945 770 L 2945 810 L 2958.63 810" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2963.88 810 L 2956.88 813.5 L 2958.63 810 L 2956.88 806.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2685" y="740" width="240" height="60" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 2709 740 L 2709 800 M 2901 740 L 2901 800" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 189px; height: 1px; padding-top: 770px; margin-left: 2710px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">tf.layers.dense(inputs)</div></div></div></foreignObject><text x="2805" y="774" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">tf.layers.dense(inputs)</text></switch></g><rect x="2965" y="700" width="120" height="60" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 2977 700 L 2977 760 M 3073 700 L 3073 760" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 94px; height: 1px; padding-top: 730px; margin-left: 2977px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">train:output</div></div></div></foreignObject><text x="3024" y="734" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">train:output</text></switch></g><rect x="2965" y="780" width="120" height="60" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 2977 780 L 2977 840 M 3073 780 L 3073 840" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 94px; height: 1px; padding-top: 810px; margin-left: 2977px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>not train:</div><div>tf.nn,sigmod(output)<br /></div></div></div></div></foreignObject><text x="3024" y="814" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">not train:...</text></switch></g><path d="M 1760 1320 L 1760 1348 L 1745 1348 L 1745 1368.63" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="stroke"/><path d="M 1745 1373.88 L 1741.5 1366.88 L 1745 1368.63 L 1748.5 1366.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 1800 1320.5 L 1810 1320.5 L 1810 1335 L 2055 1335 L 2055 1540.5 L 2065.5 1540.5 L 2050 1559.5 L 2034.5 1540.5 L 2045 1540.5 L 2045 1345 L 1800 1345 Z" fill="none" stroke="#000000" stroke-miterlimit="1.42" pointer-events="all"/><path d="M 2055 1540.5 L 2065.5 1540.5 L 2050 1559.5 L 2034.5 1540.5 L 2045 1540.5" fill="none" stroke="#000000" stroke-miterlimit="4" pointer-events="all"/><rect x="1730" y="1260" width="150" height="60" fill="#dae8fc" stroke="#6c8ebf" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 148px; height: 1px; padding-top: 1290px; margin-left: 1731px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">TacotronDecoderCell()</div></div></div></foreignObject><text x="1805" y="1294" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">TacotronDecoderCell()</text></switch></g><path d="M 1995 1290 L 2015 1290 L 1995 1290 L 2008.63 1290" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2013.88 1290 L 2006.88 1293.5 L 2008.63 1290 L 2006.88 1286.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><ellipse cx="1950" cy="1290" rx="45" ry="30.000000000000004" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 88px; height: 1px; padding-top: 1290px; margin-left: 1906px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">inputs</div></div></div></foreignObject><text x="1950" y="1294" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">inputs</text></switch></g><path d="M 1880 1290 L 1900 1290 L 1885 1290 L 1898.63 1290" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1903.88 1290 L 1896.88 1293.5 L 1898.63 1290 L 1896.88 1286.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 2135 1290 L 2157.57 1290 L 2157.57 1160 L 2173.63 1160" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2178.88 1160 L 2171.88 1163.5 L 2173.63 1160 L 2171.88 1156.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2015" y="1260" width="120" height="60" rx="9" ry="9" fill="#99ffcc" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 1290px; margin-left: 2016px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">Prenet</div></div></div></foreignObject><text x="2075" y="1294" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Prenet</text></switch></g><path d="M 2610 1240 L 2630 1240 L 2630 1140 L 2643.63 1140" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2648.88 1140 L 2641.88 1143.5 L 2643.63 1140 L 2641.88 1136.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 2550 1270 L 2550 1380 L 2593.63 1380" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2598.88 1380 L 2591.88 1383.5 L 2593.63 1380 L 2591.88 1376.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2490" y="1210" width="120" height="60" rx="9" ry="9" fill="#cc6600" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 1240px; margin-left: 2491px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">DecoderRNN</div></div></div></foreignObject><text x="2550" y="1244" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">DecoderRNN</text></switch></g><path d="M 2810 1230 L 2860 1230 L 2860 1250 L 2873.63 1250" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2878.88 1250 L 2871.88 1253.5 L 2873.63 1250 L 2871.88 1246.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2640" y="1200" width="170" height="60" rx="9" ry="9" fill="url(#mx-gradient-d5e8d4-1-97d077-1-s-0)" stroke="#82b366" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 168px; height: 1px; padding-top: 1230px; margin-left: 2641px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "> previous_ali = state.ali</div></div></div></foreignObject><text x="2725" y="1234" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle"> previous_ali = state.ali</text></switch></g><path d="M 2970 1220 L 2970 1010 L 1580 1010 L 1580 2220 L 1670 2220 L 1670 2280 L 1671.37 2280" fill="none" stroke="#d79b00" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1666.12 2280 L 1673.12 2276.5 L 1671.37 2280 L 1673.12 2283.5 Z" fill="#d79b00" stroke="#d79b00" stroke-miterlimit="10" pointer-events="all"/><path d="M 3000 1220 L 3000 1167.57 L 3293.63 1167.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3298.88 1167.5 L 3291.88 1171 L 3293.63 1167.5 L 3291.88 1164 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 2990 1220 L 2990 1125 L 3073.63 1125" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3078.88 1125 L 3071.88 1128.5 L 3073.63 1125 L 3071.88 1121.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 3000 1265 L 3020 1265 L 3020 1255 L 3033.63 1255" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3038.88 1255 L 3031.88 1258.5 L 3033.63 1255 L 3031.88 1251.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2880" y="1220" width="120" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 1250px; margin-left: 2881px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">_compute_attention()</div></div></div></foreignObject><text x="2940" y="1254" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">_compute_attention()</text></switch></g><path d="M 2967.57 1410 L 2967.57 1430 L 2967.57 1420 L 2967.57 1433.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2967.57 1438.88 L 2964.07 1431.88 L 2967.57 1433.63 L 2971.07 1431.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 2886.25 1410 L 2886.29 1580 L 2913.63 1580" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2918.88 1580 L 2911.88 1583.5 L 2913.63 1580 L 2911.88 1576.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2805" y="1350" width="325" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 323px; height: 1px; padding-top: 1380px; margin-left: 2806px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">projections_input = tf.concat(LSTM_output,context_vector,axis=-1)</div></div></div></foreignObject><text x="2968" y="1384" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">projections_input = tf.concat(LSTM_output,context_vect...</text></switch></g><path d="M 3027.5 1470 L 3047.57 1470 L 3035 1470 L 3048.63 1470" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3053.88 1470 L 3046.88 1473.5 L 3048.63 1470 L 3046.88 1466.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2907.5" y="1440" width="120" height="60" rx="9" ry="9" fill="#ff99ff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 1470px; margin-left: 2909px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">FrameProjection</div></div></div></foreignObject><text x="2968" y="1474" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">FrameProjection</text></switch></g><path d="M 3040 1580 L 3073.63 1580" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3078.88 1580 L 3071.88 1583.5 L 3073.63 1580 L 3071.88 1576.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2920" y="1550" width="120" height="60" rx="9" ry="9" fill="#ffb366" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 1580px; margin-left: 2921px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">stopProjection</div></div></div></foreignObject><text x="2980" y="1584" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">stopProjection</text></switch></g><path d="M 3140 1710 L 3235.63 1710" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3240.88 1710 L 3233.88 1713.5 L 3235.63 1710 L 3233.88 1706.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 2907.5 1710 L 2640 1710 L 2640 1656.37" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2640 1651.12 L 2643.5 1658.12 L 2640 1656.37 L 2636.5 1658.12 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1670px; margin-left: 2642px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">3</div></div></div></foreignObject><text x="2642" y="1674" fill="#000000" font-family="Helvetica" font-size="14px" text-anchor="middle">3</text></switch></g><rect x="2907.5" y="1680" width="232.5" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 231px; height: 1px; padding-top: 1710px; margin-left: 2909px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">next_state = TacotronDecoderCellState()</div></div></div></foreignObject><text x="3024" y="1714" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">next_state = TacotronDecoderCellState()</text></switch></g><path d="M 2620 1590 L 2620 1420 L 2213 1420 L 2213 1397.57 L 1851.37 1397.5" fill="none" stroke="#d6b656" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1846.12 1397.5 L 1853.12 1394 L 1851.37 1397.5 L 1853.12 1401 Z" fill="#d6b656" stroke="#d6b656" stroke-miterlimit="10" pointer-events="all"/><rect x="2580" y="1590" width="120" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2580" y="1590" width="120" height="60" rx="9" ry="9" fill="#d80073" stroke="#a50040" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 1620px; margin-left: 2581px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #ffffff; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>return==</div><div>cell_outputs,</div><div>stop_tokens,</div><div>next_state<br /></div></div></div></div></foreignObject><text x="2640" y="1624" fill="#ffffff" font-family="Helvetica" font-size="12px" text-anchor="middle">return==...</text></switch></g><path d="M 1780 2295 L 1825 2295 L 1825 2315 L 1863.63 2315" fill="none" stroke="#d6b656" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1868.88 2315 L 1861.88 2318.5 L 1863.63 2315 L 1861.88 2311.5 Z" fill="#d6b656" stroke="#d6b656" stroke-miterlimit="10" pointer-events="all"/><rect x="1550" y="2280" width="230" height="30" rx="4.5" ry="4.5" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="1550" y="2280" width="230" height="30" rx="4.5" ry="4.5" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 1573 2280 L 1573 2310 M 1757 2280 L 1757 2310" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 1555.65 2279 Q 1549 2279 1549 2285.65 L 1549 2292 Q 1665 2301 1781 2292 L 1781 2285.65 Q 1781 2279 1774.35 2279 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 182px; height: 1px; padding-top: 2295px; margin-left: 1574px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">_compute_attention()</div></div></div></foreignObject><text x="1665" y="2299" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">_compute_attention()</text></switch></g><path d="M 1967 1110 L 2058.43 1110 L 2058.43 1090 L 2143.63 1090" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2148.88 1090 L 2141.88 1093.5 L 2143.63 1090 L 2141.88 1086.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1110px; margin-left: 2032px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; "><div>SHAPE=</div><div>Batch_size,</div><div>time-step-num,</div><div>RNN-hidden-VecDim]<br /></div></div></div></div></foreignObject><text x="2032" y="1114" fill="#000000" font-family="Helvetica" font-size="14px" text-anchor="middle">SHAPE=...</text></switch></g><path d="M 1867.63 1137.56 L 1876.37 1142.44 L 1823.99 1236.24 L 1832.72 1241.12 L 1805 1260 L 1806.53 1226.49 L 1815.26 1231.37 Z" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="1777" y="1080" width="190" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="1777" y="1080" width="190" height="60" rx="9" ry="9" fill="#ffe6cc" stroke="#d79b00" pointer-events="all"/><path d="M 1787.15 1079 Q 1776 1079 1776 1090.15 L 1776 1104 Q 1872 1122 1968 1104 L 1968 1090.15 Q 1968 1079 1956.85 1079 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 188px; height: 1px; padding-top: 1110px; margin-left: 1778px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">tf.concat(axis=2)<br /><div>encoder_cond_output</div>==就是 attention 的 memory</div></div></div></foreignObject><text x="1872" y="1114" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">tf.concat(axis=2)...</text></switch></g><path d="M 1890 250.5 L 1900 250.5 L 1900 300.5 L 1910.5 300.5 L 1895 319.5 L 1879.5 300.5 L 1890 300.5 Z" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="1675" y="200" width="440" height="50" rx="7.5" ry="7.5" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="1675" y="200" width="440" height="50" rx="7.5" ry="7.5" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 1683.65 199 Q 1674 199 1674 208.65 L 1674 220 Q 1895 235 2116 220 L 2116 208.65 Q 2116 199 2106.35 199 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 438px; height: 1px; padding-top: 225px; margin-left: 1676px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">embedded_inputs = tf.nn.embedding_lookup(self.embedding_table, tower_inputs[i])</div></div></div></foreignObject><text x="1895" y="229" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">embedded_inputs = tf.nn.embedding_lookup(self.embedding_table, tower_inpu...</text></switch></g><path d="M 1895 160 L 1895 193.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1895 198.88 L 1891.5 191.88 L 1895 193.63 L 1898.5 191.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="1825" y="120" width="140" height="40" rx="6" ry="6" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="1825" y="120" width="140" height="40" rx="6" ry="6" fill="#ffff88" stroke="#36393d" pointer-events="all"/><path d="M 1832.15 119 Q 1824 119 1824 127.15 L 1824 136 Q 1895 148 1966 136 L 1966 127.15 Q 1966 119 1957.85 119 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 138px; height: 1px; padding-top: 140px; margin-left: 1826px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">tower_inputs</div></div></div></foreignObject><text x="1895" y="144" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">tower_inputs</text></switch></g><rect x="1825" y="320" width="140" height="60" fill="#dae8fc" stroke="#6c8ebf" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 138px; height: 1px; padding-top: 350px; margin-left: 1826px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">TacotronEncoderCell</div></div></div></foreignObject><text x="1895" y="354" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">TacotronEncoderCell</text></switch></g><path d="M 1760 435 L 2043.63 435" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2048.88 435 L 2041.88 438.5 L 2043.63 435 L 2041.88 431.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="1570" y="405" width="190" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="1570" y="405" width="190" height="60" rx="9" ry="9" fill="#ffff88" stroke="#36393d" pointer-events="all"/><path d="M 1580.15 404 Q 1569 404 1569 415.15 L 1569 429 Q 1665 447 1761 429 L 1761 415.15 Q 1761 404 1749.85 404 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 188px; height: 1px; padding-top: 435px; margin-left: 1571px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>tower_input_lengths=length</div></div></div></div></foreignObject><text x="1665" y="439" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">tower_input_lengths=length</text></switch></g><path d="M 1743.5 900 L 1760 900 L 1760 1110 L 1770.63 1110" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1775.88 1110 L 1768.88 1113.5 L 1770.63 1110 L 1768.88 1106.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 2240 1430 L 2240 1355 L 2230 1355 L 2230 1286.37" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2230 1281.12 L 2233.5 1288.12 L 2230 1286.37 L 2226.5 1288.12 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 2240 1430 L 2240 1390 L 2390 1390 L 2390 1356.37" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2390 1351.12 L 2393.5 1358.12 L 2390 1356.37 L 2386.5 1358.12 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2115" y="1430" width="250" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2115" y="1430" width="250" height="60" rx="9" ry="9" fill="#f8cecc" stroke="#b85450" pointer-events="all"/><path d="M 2125.15 1429 Q 2114 1429 2114 1440.15 L 2114 1454 Q 2240 1472 2366 1454 L 2366 1440.15 Q 2366 1429 2354.85 1429 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 1460px; margin-left: 2116px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>decoder_init_state = <br /></div><div>decoder_cell.zero_state</div><div>(batch_size=batch_size,  dtype=tf.float32)</div></div></div></div></foreignObject><text x="2240" y="1464" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">decoder_init_state =...</text></switch></g><path d="M 2300 1160 L 2320 1160 L 2320 1210 L 2310 1210 L 2310 1220 L 2323.63 1220" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2328.88 1220 L 2321.88 1223.5 L 2323.63 1220 L 2321.88 1216.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2180" y="1130" width="120" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2180" y="1130" width="120" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 2190.15 1129 Q 2179 1129 2179 1140.15 L 2179 1154 Q 2240 1172 2301 1154 L 2301 1140.15 Q 2301 1129 2289.85 1129 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 1160px; margin-left: 2181px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">prenet_output</div></div></div></foreignObject><text x="2240" y="1164" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">prenet_output</text></switch></g><path d="M 2450 1320 L 2470 1320 L 2470 1255 L 2483.63 1255" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2488.88 1255 L 2481.88 1258.5 L 2483.63 1255 L 2481.88 1251.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2330" y="1290" width="120" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2330" y="1290" width="120" height="60" rx="9" ry="9" fill="#f8cecc" stroke="#b85450" pointer-events="all"/><path d="M 2340.15 1289 Q 2329 1289 2329 1300.15 L 2329 1314 Q 2390 1332 2451 1314 L 2451 1300.15 Q 2451 1289 2439.85 1289 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 1320px; margin-left: 2331px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">state.cell_state</div></div></div></foreignObject><text x="2390" y="1324" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">state.cell_state</text></switch></g><path d="M 2270 1250 L 2300 1250 L 2300 1220 L 2323.63 1220" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2328.88 1220 L 2321.88 1223.5 L 2323.63 1220 L 2321.88 1216.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2180" y="1220" width="90" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2180" y="1220" width="90" height="60" rx="9" ry="9" fill="#f8cecc" stroke="#b85450" pointer-events="all"/><path d="M 2190.15 1219 Q 2179 1219 2179 1230.15 L 2179 1244 Q 2225 1262 2271 1244 L 2271 1230.15 Q 2271 1219 2259.85 1219 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 88px; height: 1px; padding-top: 1250px; margin-left: 2181px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">state.attention</div></div></div></foreignObject><text x="2225" y="1254" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">state.attention</text></switch></g><path d="M 2450 1220 L 2470 1220 L 2470 1240 L 2483.63 1240" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2488.88 1240 L 2481.88 1243.5 L 2483.63 1240 L 2481.88 1236.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2330" y="1190" width="120" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2330" y="1190" width="120" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 2340.15 1189 Q 2329 1189 2329 1200.15 L 2329 1214 Q 2390 1232 2451 1214 L 2451 1200.15 Q 2451 1189 2439.85 1189 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 1220px; margin-left: 2331px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">LSTM_input</div></div></div></foreignObject><text x="2390" y="1224" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">LSTM_input</text></switch></g><path d="M 2800 1140 L 2940 1140 L 2940 1213.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2940 1218.88 L 2936.5 1211.88 L 2940 1213.63 L 2943.5 1211.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 2725 1160 L 2725 1180 L 2830 1180 L 2830 1343.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2830 1348.88 L 2826.5 1341.88 L 2830 1343.63 L 2833.5 1341.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2650" y="1120" width="150" height="40" rx="6" ry="6" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2650" y="1120" width="150" height="40" rx="6" ry="6" fill="#b0e3e6" stroke="#0e8088" pointer-events="all"/><path d="M 2657.15 1119 Q 2649 1119 2649 1127.15 L 2649 1136 Q 2725 1148 2801 1136 L 2801 1127.15 Q 2801 1119 2792.85 1119 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 148px; height: 1px; padding-top: 1140px; margin-left: 2651px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">LSTM_output</div></div></div></foreignObject><text x="2725" y="1144" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">LSTM_output</text></switch></g><path d="M 2720 1380 L 2780 1380 L 2780 1790 L 3024 1790 L 3024 1746.37" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3024 1741.12 L 3027.5 1748.12 L 3024 1746.37 L 3020.5 1748.12 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1790px; margin-left: 2971px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">2</div></div></div></foreignObject><text x="2971" y="1794" fill="#000000" font-family="Helvetica" font-size="14px" text-anchor="middle">2</text></switch></g><rect x="2600" y="1350" width="120" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2600" y="1350" width="120" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 2610.15 1349 Q 2599 1349 2599 1360.15 L 2599 1374 Q 2660 1392 2721 1374 L 2721 1360.15 Q 2721 1349 2709.85 1349 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 1380px; margin-left: 2601px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>next_cell_state</div></div></div></div></foreignObject><text x="2660" y="1384" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">next_cell_state</text></switch></g><path d="M 2330 1090 L 2910 1090 L 2910 1213.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2910 1218.88 L 2906.5 1211.88 L 2910 1213.63 L 2913.5 1211.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2150" y="1060" width="180" height="60" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2150" y="1060" width="180" height="60" fill="#ffe6cc" stroke="#d79b00" pointer-events="all"/><path d="M 2151 1059 Q 2149 1059 2149 1061 L 2149 1084 Q 2240 1102 2331 1084 L 2331 1061 Q 2331 1059 2329 1059 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 178px; height: 1px; padding-top: 1090px; margin-left: 2151px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">LocallSensitiveAttention</div></div></div></foreignObject><text x="2240" y="1094" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">LocallSensitiveAttention</text></switch></g><path d="M 3090 1140 L 3090 1220 L 3200 1220 L 3200 1320 L 3048.86 1320 L 3048.77 1343.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3048.75 1348.88 L 3045.28 1341.87 L 3048.77 1343.63 L 3052.28 1341.89 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 3180 1140 L 3180 1205 L 3250 1205 L 3250 1640 L 3081.86 1640 L 3081.87 1673.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3081.87 1678.88 L 3078.37 1671.88 L 3081.87 1673.63 L 3085.37 1671.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1640px; margin-left: 3132px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">3</div></div></div></foreignObject><text x="3132" y="1644" fill="#000000" font-family="Helvetica" font-size="14px" text-anchor="middle">3</text></switch></g><rect x="3080" y="1110" width="120" height="30" rx="4.5" ry="4.5" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="3080" y="1110" width="120" height="30" rx="4.5" ry="4.5" fill="url(#mx-gradient-e6d0de-1-d5739d-1-s-0)" stroke="#996185" pointer-events="all"/><path d="M 3085.65 1109 Q 3079 1109 3079 1115.65 L 3079 1122 Q 3140 1131 3201 1122 L 3201 1115.65 Q 3201 1109 3194.35 1109 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 1125px; margin-left: 3081px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>content_vector = <br /></div><div>attention<br /></div></div></div></div></foreignObject><text x="3140" y="1129" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">content_vector =...</text></switch></g><path d="M 3360 1175 L 3360 1250 L 3360 1453.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3360 1458.88 L 3356.5 1451.88 L 3360 1453.63 L 3363.5 1451.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="3300" y="1145" width="120" height="30" rx="4.5" ry="4.5" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="3300" y="1145" width="120" height="30" rx="4.5" ry="4.5" fill="url(#mx-gradient-fff2cc-1-ffd966-1-s-0)" stroke="#d6b656" pointer-events="all"/><path d="M 3305.65 1144 Q 3299 1144 3299 1150.65 L 3299 1157 Q 3360 1166 3421 1157 L 3421 1150.65 Q 3421 1144 3414.35 1144 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 1160px; margin-left: 3301px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">alignments </div></div></div></foreignObject><text x="3360" y="1164" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">alignments </text></switch></g><path d="M 3190 1255 L 3210 1255 L 3210 1690 L 3146.37 1690" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3141.12 1690 L 3148.12 1686.5 L 3146.37 1690 L 3148.12 1693.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1696px; margin-left: 3187px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">4</div></div></div></foreignObject><text x="3187" y="1700" fill="#000000" font-family="Helvetica" font-size="14px" text-anchor="middle">4</text></switch></g><rect x="3040" y="1230" width="150" height="50" rx="7.5" ry="7.5" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="3040" y="1230" width="150" height="50" rx="7.5" ry="7.5" fill="url(#mx-gradient-f8cecc-1-ea6b66-1-s-0)" stroke="#b85450" pointer-events="all"/><path d="M 3048.65 1229 Q 3039 1229 3039 1238.65 L 3039 1250 Q 3115 1265 3191 1250 L 3191 1238.65 Q 3191 1229 3181.35 1229 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 148px; height: 1px; padding-top: 1255px; margin-left: 3041px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>cumulated_alignments = <br /></div><div>next_attention_state<br /></div></div></div></div></foreignObject><text x="3115" y="1259" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">cumulated_alignments =...</text></switch></g><path d="M 3115 1500 L 3115 1520 L 2640 1520 L 2640 1583.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2640 1588.88 L 2636.5 1581.88 L 2640 1583.63 L 2643.5 1581.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1573px; margin-left: 2646px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">1</div></div></div></foreignObject><text x="2646" y="1577" fill="#000000" font-family="Helvetica" font-size="14px" text-anchor="middle">1</text></switch></g><rect x="3055" y="1440" width="120" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="3055" y="1440" width="120" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 3065.15 1439 Q 3054 1439 3054 1450.15 L 3054 1464 Q 3115 1482 3176 1464 L 3176 1450.15 Q 3176 1439 3164.85 1439 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 1470px; margin-left: 3056px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">cell_outputs</div></div></div></foreignObject><text x="3115" y="1474" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">cell_outputs</text></switch></g><path d="M 3140 1610 L 3140 1620 L 2706.37 1620" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2701.12 1620 L 2708.12 1616.5 L 2706.37 1620 L 2708.12 1623.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1623px; margin-left: 2747px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">2</div></div></div></foreignObject><text x="2747" y="1627" fill="#000000" font-family="Helvetica" font-size="14px" text-anchor="middle">2</text></switch></g><rect x="3080" y="1550" width="120" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="3080" y="1550" width="120" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 3090.15 1549 Q 3079 1549 3079 1560.15 L 3079 1574 Q 3140 1592 3201 1574 L 3201 1560.15 Q 3201 1549 3189.85 1549 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 1580px; margin-left: 3081px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">stop_tokens</div></div></div></foreignObject><text x="3140" y="1584" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">stop_tokens</text></switch></g><path d="M 3475 1520 L 3475 1850 L 3081.86 1850 L 3081.87 1746.37" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3081.87 1741.12 L 3085.37 1748.12 L 3081.87 1746.37 L 3078.37 1748.12 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1770px; margin-left: 3082px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">5</div></div></div></foreignObject><text x="3082" y="1774" fill="#000000" font-family="Helvetica" font-size="14px" text-anchor="middle">5</text></switch></g><rect x="3320" y="1460" width="310" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="3320" y="1460" width="310" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 3330.15 1459 Q 3319 1459 3319 1470.15 L 3319 1484 Q 3475 1502 3631 1484 L 3631 1470.15 Q 3631 1459 3619.85 1459 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 308px; height: 1px; padding-top: 1490px; margin-left: 3321px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">alignment_history = previous_alignment_history.write(state.time, alignments)</div></div></div></foreignObject><text x="3475" y="1494" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">alignment_history = previous_alignment_history.writ...</text></switch></g><rect x="1713.5" y="840" width="120" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="1713.5" y="840" width="120" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 1723.65 839 Q 1712.5 839 1712.5 850.15 L 1712.5 864 Q 1773.5 882 1834.5 864 L 1834.5 850.15 Q 1834.5 839 1823.35 839 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 870px; margin-left: 1715px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">encoder_outputs</div></div></div></foreignObject><text x="1774" y="874" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">encoder_outputs</text></switch></g><rect x="3242" y="1655" width="200" height="110" rx="16.5" ry="16.5" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="3242" y="1655" width="200" height="110" rx="16.5" ry="16.5" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 3259.65 1654 Q 3241 1654 3241 1672.65 L 3241 1699 Q 3342 1732 3443 1699 L 3443 1672.65 Q 3443 1654 3424.35 1654 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 198px; height: 1px; padding-top: 1710px; margin-left: 3244px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div align="left"><ol><li>state_time+1<br /></li><li>next_cell_state<br /></li><li>context_vector</li><li>cummulated_alignments</li><li>alignments_history<br /></li></ol></div></div></div></div></foreignObject><text x="3244" y="1714" fill="#000000" font-family="Helvetica" font-size="12px">state_time+1...</text></switch></g><path d="M 2017.57 2345 L 2017.57 2380 L 1990 2380 L 1990 2408.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1990 2413.88 L 1986.5 2406.88 L 1990 2408.63 L 1993.5 2406.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 2017.57 2345 L 2017.57 2380 L 2150 2380 L 2150 2408.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2150 2413.88 L 2146.5 2406.88 L 2150 2408.63 L 2153.5 2406.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 2165 2315 L 2864 2315 L 2864 2358.63" fill="none" stroke="#d79b00" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2864 2363.88 L 2860.5 2356.88 L 2864 2358.63 L 2867.5 2356.88 Z" fill="#d79b00" stroke="#d79b00" stroke-miterlimit="10" pointer-events="all"/><path d="M 2017.57 2345 L 2017.57 2355 L 2380 2355 L 2380 2543.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2380 2548.88 L 2376.5 2541.88 L 2380 2543.63 L 2383.5 2541.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 2460px; margin-left: 2381px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">attention_mechanism.values = Memory=hj</div></div></div></foreignObject><text x="2381" y="2465" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle">attention_mechanism.values = Memory=hj</text></switch></g><path d="M 2165 2315 L 3219 2315 L 3219 2358.63" fill="none" stroke="#d79b00" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3219 2363.88 L 3215.5 2356.88 L 3219 2358.63 L 3222.5 2356.88 Z" fill="#d79b00" stroke="#d79b00" stroke-miterlimit="10" pointer-events="all"/><rect x="1870" y="2285" width="295" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="1870" y="2285" width="295" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 1880.15 2284 Q 1869 2284 1869 2295.15 L 1869 2309 Q 2017.5 2327 2166 2309 L 2166 2295.15 Q 2166 2284 2154.85 2284 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 293px; height: 1px; padding-top: 2315px; margin-left: 1871px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>LocalSensitiveAttention</div><div>(query=LSTM_output,state = pre_align)</div></div></div></div></foreignObject><text x="2018" y="2319" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">LocalSensitiveAttention...</text></switch></g><path d="M 1925 2220 L 1925 2260 L 1925 2278.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1925 2283.88 L 1921.5 2276.88 L 1925 2278.63 L 1928.5 2276.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="1875" y="2180" width="150" height="40" rx="6" ry="6" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="1875" y="2180" width="150" height="40" rx="6" ry="6" fill="#b1ddf0" stroke="#10739e" pointer-events="all"/><path d="M 1882.15 2179 Q 1874 2179 1874 2187.15 L 1874 2196 Q 1950 2208 2026 2196 L 2026 2187.15 Q 2026 2179 2017.85 2179 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 148px; height: 1px; padding-top: 2200px; margin-left: 1876px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">LSTM_output</div></div></div></foreignObject><text x="1950" y="2204" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">LSTM_output</text></switch></g><path d="M 2135 2230 L 2135 2257.57 L 2091.29 2257.57 L 2091.26 2278.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2091.25 2283.88 L 2087.76 2276.88 L 2091.26 2278.63 L 2094.76 2276.89 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2050" y="2170" width="170" height="60" rx="9" ry="9" fill="url(#mx-gradient-d5e8d4-1-97d077-1-s-0)" stroke="#82b366" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 168px; height: 1px; padding-top: 2200px; margin-left: 2051px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div> previous_ali = state.ali</div><div>:  state</div></div></div></div></foreignObject><text x="2135" y="2204" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">previous_ali = state.ali...</text></switch></g><path d="M 1990 2455 L 1990 2487.57 L 2017.57 2487.57 L 2017.51 2513.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2017.5 2518.88 L 2014.02 2511.87 L 2017.51 2513.63 L 2021.02 2511.89 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="1930" y="2415" width="120" height="40" rx="6" ry="6" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="1930" y="2415" width="120" height="40" rx="6" ry="6" fill="url(#mx-gradient-fff2cc-1-ffd966-1-s-0)" stroke="#d6b656" pointer-events="all"/><path d="M 1937.15 2414 Q 1929 2414 1929 2422.15 L 1929 2431 Q 1990 2443 2051 2431 L 2051 2422.15 Q 2051 2414 2042.85 2414 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 2435px; margin-left: 1931px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">alignments</div></div></div></foreignObject><text x="1990" y="2439" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">alignments</text></switch></g><rect x="2090" y="2415" width="120" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2090" y="2415" width="120" height="60" rx="9" ry="9" fill="url(#mx-gradient-f8cecc-1-ea6b66-1-s-0)" stroke="#b85450" pointer-events="all"/><path d="M 2100.15 2414 Q 2089 2414 2089 2425.15 L 2089 2439 Q 2150 2457 2211 2439 L 2211 2425.15 Q 2211 2414 2199.85 2414 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 2445px; margin-left: 2091px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">next_attention_state</div></div></div></foreignObject><text x="2150" y="2449" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">next_attention_state</text></switch></g><path d="M 2115 2550 L 2187.57 2550 L 2187.57 2580 L 2253.63 2580" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2258.88 2580 L 2251.88 2583.5 L 2253.63 2580 L 2251.88 2576.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 2557px; margin-left: 2170px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 20px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">aij</div></div></div></foreignObject><text x="2170" y="2563" fill="#000000" font-family="Helvetica" font-size="20px" text-anchor="middle">aij</text></switch></g><rect x="1920" y="2520" width="195" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="1920" y="2520" width="195" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 1930.15 2519 Q 1919 2519 1919 2530.15 L 1919 2544 Q 2017.5 2562 2116 2544 L 2116 2530.15 Q 2116 2519 2104.85 2519 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 193px; height: 1px; padding-top: 2550px; margin-left: 1921px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>expanded_alignments</div><div>[batch_size, 1, memory_time]<br /></div></div></div></div></foreignObject><text x="2018" y="2554" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">expanded_alignments...</text></switch></g><path d="M 2320 2610 L 2320 2630 L 2320 2615 L 2320 2628.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2320 2633.88 L 2316.5 2626.88 L 2320 2628.63 L 2323.5 2626.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2260" y="2550" width="120" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2260" y="2550" width="120" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 2270.15 2549 Q 2259 2549 2259 2560.15 L 2259 2574 Q 2320 2592 2381 2574 L 2381 2560.15 Q 2381 2549 2369.85 2549 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 2580px; margin-left: 2261px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">context=exp-ali*LSA.values</div></div></div></foreignObject><text x="2320" y="2584" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">context=exp-ali*LSA....</text></switch></g><path d="M 2320 2695 L 2320 2715 L 2320 2705 L 2320 2718.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2320 2723.88 L 2316.5 2716.88 L 2320 2718.63 L 2323.5 2716.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2085" y="2635" width="470" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2085" y="2635" width="470" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 2095.15 2634 Q 2084 2634 2084 2645.15 L 2084 2659 Q 2320 2677 2556 2659 L 2556 2645.15 Q 2556 2634 2544.85 2634 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 468px; height: 1px; padding-top: 2665px; margin-left: 2086px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>context = array_ops.squeeze(context, [1])  <br /></div><div># [batch_size, memory_size].</div></div></div></div></foreignObject><text x="2320" y="2670" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle">context = array_ops.squeeze(context, [1])...</text></switch></g><rect x="2260" y="2725" width="120" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2260" y="2725" width="120" height="60" rx="9" ry="9" fill="url(#mx-gradient-e6d0de-1-d5739d-1-s-0)" stroke="#996185" pointer-events="all"/><path d="M 2270.15 2724 Q 2259 2724 2259 2735.15 L 2259 2749 Q 2320 2767 2381 2749 L 2381 2735.15 Q 2381 2724 2369.85 2724 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 2755px; margin-left: 2261px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">attention = context</div></div></div></foreignObject><text x="2320" y="2760" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle">attention = con...</text></switch></g><path d="M 3209 2425 L 3209 2865 L 3136.57 2865 L 3136.51 2898.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3136.5 2903.88 L 3133.01 2896.88 L 3136.51 2898.63 L 3140.01 2896.89 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="3084" y="2365" width="270" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="3084" y="2365" width="270" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 3094.15 2364 Q 3083 2364 3083 2375.15 L 3083 2389 Q 3219 2407 3355 2389 L 3355 2375.15 Q 3355 2364 3343.85 2364 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 268px; height: 1px; padding-top: 2395px; margin-left: 3085px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">processed_query:<br /><div>[batch_size, 1, attention_dim]</div></div></div></div></foreignObject><text x="3219" y="2400" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle">processed_query:...</text></switch></g><path d="M 2864 2425 L 2864 2483.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2864 2488.88 L 2860.5 2481.88 L 2864 2483.63 L 2867.5 2481.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 2704 2395 L 2684 2395 L 2684 3220 L 2843.63 3220" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2848.88 3220 L 2841.88 3223.5 L 2843.63 3220 L 2841.88 3216.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 2704 2395 L 2660 2395 L 2660 3365 L 2907.63 3365" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2912.88 3365 L 2905.88 3368.5 L 2907.63 3365 L 2905.88 3361.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2704" y="2365" width="320" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2704" y="2365" width="320" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 2714.15 2364 Q 2703 2364 2703 2375.15 L 2703 2389 Q 2864 2407 3025 2389 L 3025 2375.15 Q 3025 2364 3013.85 2364 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 318px; height: 1px; padding-top: 2395px; margin-left: 2705px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">previous_alignments = state</div></div></div></foreignObject><text x="2864" y="2400" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle">previous_alignments = state</text></switch></g><path d="M 2864 2550 L 2864 2597.57 L 2929 2597.57 L 2929 2638.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2929 2643.88 L 2925.5 2636.88 L 2929 2638.63 L 2932.5 2636.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2764" y="2490" width="200" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2764" y="2490" width="200" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 2774.15 2489 Q 2763 2489 2763 2500.15 L 2763 2514 Q 2864 2532 2965 2514 L 2965 2500.15 Q 2965 2489 2953.85 2489 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 198px; height: 1px; padding-top: 2520px; margin-left: 2765px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">expanded_alignments</div></div></div></foreignObject><text x="2864" y="2525" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle">expanded_alignments</text></switch></g><path d="M 2929 2705 L 2929 2758.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2929 2763.88 L 2925.5 2756.88 L 2929 2758.63 L 2932.5 2756.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 3154 2675 L 3252.57 2675 L 3252.57 2580 L 3302.43 2580 L 3302.41 2581.37" fill="none" stroke="#d79b00" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3302.48 2576.12 L 3305.88 2583.17 L 3302.41 2581.37 L 3298.88 2583.07 Z" fill="#d79b00" stroke="#d79b00" stroke-miterlimit="10" pointer-events="all"/><rect x="2704" y="2645" width="450" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2704" y="2645" width="450" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 2714.15 2644 Q 2703 2644 2703 2655.15 L 2703 2669 Q 2929 2687 3155 2669 L 3155 2655.15 Q 3155 2644 3143.85 2644 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 448px; height: 1px; padding-top: 2675px; margin-left: 2705px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>f = <br /></div><div>self.location_convolution(expanded_alignments)</div></div></div></div></foreignObject><text x="2929" y="2680" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle">f =...</text></switch></g><path d="M 2929 2825 L 2929 2875 L 2974 2875 L 2974 2898.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2974 2903.88 L 2970.5 2896.88 L 2974 2898.63 L 2977.5 2896.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 3109 2795 L 3296.13 2795" fill="none" stroke="#d79b00" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3301.38 2795 L 3294.38 2798.5 L 3296.13 2795 L 3294.38 2791.5 Z" fill="#d79b00" stroke="#d79b00" stroke-miterlimit="10" pointer-events="all"/><rect x="2749" y="2765" width="360" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2749" y="2765" width="360" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 2759.15 2764 Q 2748 2764 2748 2775.15 L 2748 2789 Q 2929 2807 3110 2789 L 3110 2775.15 Q 3110 2764 3098.85 2764 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 358px; height: 1px; padding-top: 2795px; margin-left: 2750px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>processed_location_features <br /></div><div>= self.location_layer(f)</div></div></div></div></foreignObject><text x="2929" y="2800" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle">processed_location_features...</text></switch></g><path d="M 3049 3045 L 3049 3085 L 3161 3085 L 3161 3118.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3161 3123.88 L 3157.5 3116.88 L 3161 3118.63 L 3164.5 3116.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 3224 2975 L 3306.13 2975" fill="none" stroke="#d79b00" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3311.38 2975 L 3304.38 2978.5 L 3306.13 2975 L 3304.38 2971.5 Z" fill="#d79b00" stroke="#d79b00" stroke-miterlimit="10" pointer-events="all"/><rect x="2874" y="2905" width="350" height="140" rx="21" ry="21" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2874" y="2905" width="350" height="140" rx="21" ry="21" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 2896.15 2904 Q 2873 2904 2873 2927.15 L 2873 2961 Q 3049 3003 3225 2961 L 3225 2927.15 Q 3225 2904 3201.85 2904 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 348px; height: 1px; padding-top: 2975px; margin-left: 2875px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>energy =</div><div> _location_sensitive_score</div><div>(processed_query, processed_location_features, self.keys)</div><div><br /></div><div>energy = dot(v_a, tanh(W_keys(h_enc) + W_query(h_dec) + W_fil(f) + b_a))</div></div></div></div></foreignObject><text x="3049" y="2980" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle">energy =...</text></switch></g><rect x="2852" y="3125" width="618" height="150" rx="22.5" ry="22.5" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2852" y="3125" width="618" height="150" rx="22.5" ry="22.5" fill="url(#mx-gradient-fff2cc-1-ffd966-1-s-0)" stroke="#d6b656" pointer-events="all"/><path d="M 2875.65 3124 Q 2851 3124 2851 3148.65 L 2851 3185 Q 3161 3230 3471 3185 L 3471 3148.65 Q 3471 3124 3446.35 3124 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 616px; height: 1px; padding-top: 3200px; margin-left: 2853px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div><br /></div><div>#alignments shape = energy shape = [batch_size, max_time]</div><div><br /></div><div>alignments = <br /></div><div>self._probability_fn</div><div>(energy, previous_alignments)</div></div></div></div></foreignObject><text x="3161" y="3205" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle">#alignments shape = energy shape = [batch_size, max_time]...</text></switch></g><rect x="2914" y="3335" width="240" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2914" y="3335" width="240" height="60" rx="9" ry="9" fill="url(#mx-gradient-f8cecc-1-ea6b66-1-s-0)" stroke="#b85450" pointer-events="all"/><path d="M 2924.15 3334 Q 2913 3334 2913 3345.15 L 2913 3359 Q 3034 3377 3155 3359 L 3155 3345.15 Q 3155 3334 3143.85 3334 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 3365px; margin-left: 2915px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>next_state = <br /></div><div>alignments + previous_alignments</div></div></div></div></foreignObject><text x="3034" y="3370" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle">next_state =...</text></switch></g><rect x="3312.5" y="2945" width="320" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="3312.5" y="2945" width="320" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 3322.65 2944 Q 3311.5 2944 3311.5 2955.15 L 3311.5 2969 Q 3472.5 2987 3633.5 2969 L 3633.5 2955.15 Q 3633.5 2944 3622.35 2944 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 318px; height: 1px; padding-top: 2975px; margin-left: 3314px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">tf.reduce_sum(v_a * tf.tanh(W_keys + W_query + W_fil + b_a), [2])</div></div></div></foreignObject><text x="3473" y="2980" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle">tf.reduce_sum(v_a * tf.tanh(W_keys + W_q...</text></switch></g><rect x="3302.5" y="2475" width="350" height="200" rx="30" ry="30" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="3302.5" y="2475" width="350" height="200" rx="30" ry="30" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 3333.65 2474 Q 3301.5 2474 3301.5 2506.15 L 3301.5 2555 Q 3477.5 2615 3653.5 2555 L 3653.5 2506.15 Q 3653.5 2474 3621.35 2474 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 348px; height: 1px; padding-top: 2575px; margin-left: 3304px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>self.location_convolution =</div><div> tf.compat.v1.layers.Conv1D</div><div>(filters=hparams.attention_filters,</div><div>            kernel_size=hparams.attention_kernel, <br /></div><div>padding="same", use_bias=True,</div><div>            bias_initializer=tf.zeros_initializer(), <br /></div><div>name="location_features_convolution")</div></div></div></div></foreignObject><text x="3478" y="2580" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle">self.location_convolution =...</text></switch></g><rect x="3302.5" y="2721" width="340" height="148" rx="22.2" ry="22.2" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="3302.5" y="2721" width="340" height="148" rx="22.2" ry="22.2" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 3325.85 2720 Q 3301.5 2720 3301.5 2744.35 L 3301.5 2780.2 Q 3472.5 2824.6 3643.5 2780.2 L 3643.5 2744.35 Q 3643.5 2720 3619.15 2720 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 338px; height: 1px; padding-top: 2795px; margin-left: 3304px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>self.location_layer =</div><div> tf.compat.v1.layers.Dense</div><div>(units=num_units, <br /></div><div>use_bias=False,</div><div>dtype=tf.float32, name="location_features_layer")</div></div></div></div></foreignObject><text x="3473" y="2800" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle">self.location_layer =...</text></switch></g><path d="M 3471.5 570 L 3545.13 570" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3550.38 570 L 3543.38 573.5 L 3545.13 570 L 3543.38 566.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 3356.5 605 L 3356.5 658.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3356.5 663.88 L 3353 656.88 L 3356.5 658.63 L 3360 656.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 3356.57 535 L 3356.57 482.57 L 3465 482.57 L 3465 436.37" fill="none" stroke="#d79b00" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3465 431.12 L 3468.5 438.12 L 3465 436.37 L 3461.5 438.12 Z" fill="#d79b00" stroke="#d79b00" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 483px; margin-left: 3433px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">self._cell=</div></div></div></foreignObject><text x="3433" y="487" fill="#000000" font-family="Helvetica" font-size="14px" text-anchor="middle">self._cell=</text></switch></g><rect x="3241.5" y="535" width="230" height="70" rx="10.5" ry="10.5" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="3241.5" y="535" width="230" height="70" rx="10.5" ry="10.5" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 3253.15 534 Q 3240.5 534 3240.5 546.65 L 3240.5 563 Q 3356.5 584 3472.5 563 L 3472.5 546.65 Q 3472.5 534 3459.85 534 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 228px; height: 1px; padding-top: 570px; margin-left: 3243px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">output, new_state = self._cell(inputs, state, scope)</div></div></div></foreignObject><text x="3357" y="575" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle">output, new_state = self._cel...</text></switch></g><rect x="3495" y="755" width="390" height="140" rx="21" ry="21" fill="#000000" stroke="#000000" stroke-width="6" transform="translate(2,3)" opacity="0.25"/><rect x="3495" y="755" width="390" height="140" rx="21" ry="21" fill="#ffffff" stroke="#000000" stroke-width="6" pointer-events="all"/><path d="M 3519.9 752 Q 3492 752 3492 779.9 L 3492 811 Q 3690 853 3888 811 L 3888 779.9 Q 3888 752 3860.1 752 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 388px; height: 1px; padding-top: 825px; margin-left: 3496px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">new_state = tf.compat.v1.nn.rnn_cell.LSTMStateTuple(c, h) if self.state_is_tuple else tf.concat(1, [c,<br />                                                                                                  h])</div></div></div></foreignObject><text x="3690" y="830" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle">new_state = tf.compat.v1.nn.rnn_cell.LSTMStateTup...</text></switch></g><rect x="3551.5" y="540" width="120" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" stroke-width="5" transform="translate(2,3)" opacity="0.25"/><rect x="3551.5" y="540" width="120" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" stroke-width="5" pointer-events="all"/><path d="M 3564.25 537 Q 3548.5 537 3548.5 552.75 L 3548.5 564 Q 3611.5 582 3674.5 564 L 3674.5 552.75 Q 3674.5 537 3658.75 537 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 570px; margin-left: 3553px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">output</div></div></div></foreignObject><text x="3612" y="575" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle">output</text></switch></g><path d="M 3356.5 705 L 3356.5 753.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3356.5 758.88 L 3353 751.88 L 3356.5 753.63 L 3360 751.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="3296.5" y="665" width="120" height="40" rx="6" ry="6" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="3296.5" y="665" width="120" height="40" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 3303.65 664 Q 3295.5 664 3295.5 672.15 L 3295.5 681 Q 3356.5 693 3417.5 681 L 3417.5 672.15 Q 3417.5 664 3409.35 664 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 685px; margin-left: 3298px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">new_state</div></div></div></foreignObject><text x="3357" y="690" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle">new_state</text></switch></g><path d="M 3444.75 825 L 3488.63 825" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3493.88 825 L 3486.88 828.5 L 3488.63 825 L 3486.88 821.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="3268.25" y="760" width="176.5" height="130" rx="19.5" ry="19.5" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="3268.25" y="760" width="176.5" height="130" rx="19.5" ry="19.5" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 3288.9 759 Q 3267.25 759 3267.25 780.65 L 3267.25 812 Q 3356.5 851 3445.75 812 L 3445.75 780.65 Q 3445.75 759 3424.1 759 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 175px; height: 1px; padding-top: 825px; margin-left: 3269px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>prev_c</div><div>prev_h</div><div>new_c<br /></div><div>new_h</div><div>h,c<br /></div></div></div></div></foreignObject><text x="3357" y="830" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle">prev_c...</text></switch></g><path d="M 2175 570 L 2175 515 L 2190 515 L 2190 435 L 2176.37 435" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2171.12 435 L 2178.12 431.5 L 2176.37 435 L 2178.12 438.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2115" y="570" width="120" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" stroke-width="6" transform="translate(2,3)" opacity="0.25"/><rect x="2115" y="570" width="120" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" stroke-width="6" pointer-events="all"/><path d="M 2127.9 567 Q 2112 567 2112 582.9 L 2112 594 Q 2175 612 2238 594 L 2238 582.9 Q 2238 567 2222.1 567 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 600px; margin-left: 2116px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">input = conv_output</div></div></div></foreignObject><text x="2175" y="605" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle">input = conv_ou...</text></switch></g><rect x="3320" y="2140" width="290" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" stroke-width="6" transform="translate(2,3)" opacity="0.25"/><rect x="3320" y="2140" width="290" height="60" rx="9" ry="9" fill="#e1d5e7" stroke="#9673a6" stroke-width="6" pointer-events="all"/><path d="M 3332.9 2137 Q 3317 2137 3317 2152.9 L 3317 2164 Q 3465 2182 3613 2164 L 3613 2152.9 Q 3613 2137 3597.1 2137 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 288px; height: 1px; padding-top: 2170px; margin-left: 3321px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>mel_outputs = <br /></div><div>decoder_output + projected_residual</div></div></div></div></foreignObject><text x="3465" y="2175" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle">mel_outputs =...</text></switch></g><path d="M 2622.5 2030 L 2872.63 2030" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2877.88 2030 L 2870.88 2033.5 L 2872.63 2030 L 2870.88 2026.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 2510 2000 L 2510 1980 L 2650 1980 L 2650 1910 L 3495.43 1910 L 3495.45 2131.65" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3495.45 2136.9 L 3491.95 2129.9 L 3495.45 2131.65 L 3498.95 2129.9 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2397.5" y="2000" width="225" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" stroke-width="6" transform="translate(2,3)" opacity="0.25"/><rect x="2397.5" y="2000" width="225" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" stroke-width="6" pointer-events="all"/><path d="M 2410.4 1997 Q 2394.5 1997 2394.5 2012.9 L 2394.5 2024 Q 2510 2042 2625.5 2024 L 2625.5 2012.9 Q 2625.5 1997 2609.6 1997 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 223px; height: 1px; padding-top: 2030px; margin-left: 2399px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">decoder_output</div></div></div></foreignObject><text x="2510" y="2035" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle">decoder_output</text></switch></g><path d="M 2510 1970 L 2510 1990 L 2510 1980 L 2510 1993.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2510 1998.88 L 2506.5 1991.88 L 2510 1993.63 L 2513.5 1991.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2395" y="1930" width="230" height="40" rx="6" ry="6" fill="#000000" stroke="#000000" stroke-width="6" transform="translate(2,3)" opacity="0.25"/><rect x="2395" y="1930" width="230" height="40" rx="6" ry="6" fill="#ffffff" stroke="#000000" stroke-width="6" pointer-events="all"/><path d="M 2404.9 1927 Q 2392 1927 2392 1939.9 L 2392 1946 Q 2510 1958 2628 1946 L 2628 1939.9 Q 2628 1927 2615.1 1927 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 228px; height: 1px; padding-top: 1950px; margin-left: 2396px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">frames_prediction</div></div></div></foreignObject><text x="2510" y="1955" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle">frames_prediction</text></switch></g><path d="M 2939 2060 L 2939 2090 L 2730 2090 L 2730 2133.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2730 2138.88 L 2726.5 2131.88 L 2730 2133.63 L 2733.5 2131.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2879" y="2000" width="120" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" stroke-width="6" transform="translate(2,3)" opacity="0.25"/><rect x="2879" y="2000" width="120" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" stroke-width="6" pointer-events="all"/><path d="M 2891.9 1997 Q 2876 1997 2876 2012.9 L 2876 2024 Q 2939 2042 3002 2024 L 3002 2012.9 Q 3002 1997 2986.1 1997 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 2030px; margin-left: 2880px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">Postnet</div></div></div></foreignObject><text x="2939" y="2035" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle">Postnet</text></switch></g><path d="M 2790 2170 L 2838.63 2170" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2843.88 2170 L 2836.88 2173.5 L 2838.63 2170 L 2836.88 2166.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2670" y="2140" width="120" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" stroke-width="6" transform="translate(2,3)" opacity="0.25"/><rect x="2670" y="2140" width="120" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" stroke-width="6" pointer-events="all"/><path d="M 2682.9 2137 Q 2667 2137 2667 2152.9 L 2667 2164 Q 2730 2182 2793 2164 L 2793 2152.9 Q 2793 2137 2777.1 2137 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 2170px; margin-left: 2671px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">residual</div></div></div></foreignObject><text x="2730" y="2175" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle">residual</text></switch></g><path d="M 2950 2200 L 2950 2233.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2950 2238.88 L 2946.5 2231.88 L 2950 2233.63 L 2953.5 2231.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2845" y="2140" width="210" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" stroke-width="6" transform="translate(2,3)" opacity="0.25"/><rect x="2845" y="2140" width="210" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" stroke-width="6" pointer-events="all"/><path d="M 2857.9 2137 Q 2842 2137 2842 2152.9 L 2842 2164 Q 2950 2182 3058 2164 L 3058 2152.9 Q 3058 2137 3042.1 2137 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 208px; height: 1px; padding-top: 2170px; margin-left: 2846px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">FrameProjection</div></div></div></foreignObject><text x="2950" y="2175" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle">FrameProjection</text></switch></g><path d="M 3038 2270 L 3179 2270 L 3179 2170 L 3313.63 2170" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 3318.88 2170 L 3311.88 2173.5 L 3313.63 2170 L 3311.88 2166.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2862" y="2240" width="176" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" stroke-width="6" transform="translate(2,3)" opacity="0.25"/><rect x="2862" y="2240" width="176" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" stroke-width="6" pointer-events="all"/><path d="M 2874.9 2237 Q 2859 2237 2859 2252.9 L 2859 2264 Q 2950 2282 3041 2264 L 3041 2252.9 Q 3041 2237 3025.1 2237 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 174px; height: 1px; padding-top: 2270px; margin-left: 2863px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">projected_residual</div></div></div></foreignObject><text x="2950" y="2275" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle">projected_residual</text></switch></g><path d="M 2330.29 1895 L 2330.29 1950 L 2388.63 1950" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2393.88 1950 L 2386.88 1953.5 L 2388.63 1950 L 2386.88 1946.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2020" y="1680" width="620.63" height="215" rx="32.25" ry="32.25" fill="#000000" stroke="#000000" stroke-width="6" transform="translate(2,3)" opacity="0.25"/><rect x="2020" y="1680" width="620.63" height="215" rx="32.25" ry="32.25" fill="#ffffff" stroke="#000000" stroke-width="6" pointer-events="all"/><path d="M 2056.15 1677 Q 2017 1677 2017 1716.15 L 2017 1766 Q 2330.31 1830.5 2643.63 1766 L 2643.63 1716.15 Q 2643.63 1677 2604.48 1677 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 619px; height: 1px; padding-top: 1788px; margin-left: 2021px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><div>(frames_prediction, stop_token_prediction,_),final_decoder_state, _</div><div> =</div><div>(final_outputs, final_state, final_sequence_lengths)</div><div>=<br /></div><div> dynamic_decode(</div><div>                        CustomDecoder(decoder_cell, self.helper, decoder_init_state,</div><div>max_iters=2000,  ##   决定了最长输出的帧数。)</div><div>这个函数主要的一个思想是一步一步地调用Decoder的step函数，实现最后的一句话的生成</div><div>ref:https://blog.csdn.net/tudaodiaozhale/article/details/90737077<br /></div><div><br /></div></div></div></div></foreignObject><text x="2330" y="1792" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle">(frames_prediction, stop_token_prediction,_),final_decoder_state, _...</text></switch></g><rect x="2522.5" y="0" width="405" height="80" rx="12" ry="12" fill="none" stroke="none" transform="translate(2,3)" opacity="0.25"/><rect x="2522.5" y="0" width="405" height="80" rx="12" ry="12" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 403px; height: 1px; padding-top: 40px; margin-left: 2525px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; max-height: 76px; overflow: hidden; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><ul><li>备注：此图时 RTVC-synthesizer的代码流程图<br /></li><li>-----》黄色箭头 表示代码的展开。<br /></li><li>同一色块表示同步输入或者相等<br /></li></ul></div></div></div></foreignObject><text x="2525" y="45" fill="#000000" font-family="Helvetica" font-size="16px">备注：此图时 RTVC-synthesizer的代码流程图...</text></switch></g><rect x="1150" y="605" width="120" height="60" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="1150" y="605" width="120" height="60" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 1149 604 L 1149 629 Q 1210 647 1271 629 L 1271 604 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 635px; margin-left: 1151px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">data-shape</div></div></div></foreignObject><text x="1210" y="640" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle">data-shape</text></switch></g><rect x="900" y="950" width="590" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="900" y="950" width="590" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 910.15 949 Q 899 949 899 960.15 L 899 974 Q 1195 992 1491 974 L 1491 960.15 Q 1491 949 1479.85 949 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 588px; height: 1px; padding-top: 980px; margin-left: 901px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">tower_inputs : [[batch_size, -1],] =  [[batch_size, 批内的id长度],]</div></div></div></foreignObject><text x="1195" y="985" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle">tower_inputs : [[batch_size, -1],] =  [[batch_size, 批内的id长度],]</text></switch></g><rect x="880" y="1070" width="670" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="880" y="1070" width="670" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 890.15 1069 Q 879 1069 879 1080.15 L 879 1094 Q 1215 1112 1551 1094 L 1551 1080.15 Q 1551 1069 1539.85 1069 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 668px; height: 1px; padding-top: 1100px; margin-left: 881px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "># tower_mel_targets: [[batch_size, -1, mel_channels],]= [[batch_size, 批内的 音频的帧数,mel_channels=80]，] </div></div></div></foreignObject><text x="1215" y="1105" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle"># tower_mel_targets: [[batch_size, -1, mel_channels],]= [[batch_size, 批内的 音频的帧数,mel_channels...</text></switch></g><rect x="870" y="1170" width="650" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="870" y="1170" width="650" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 880.15 1169 Q 869 1169 869 1180.15 L 869 1194 Q 1195 1212 1521 1194 L 1521 1180.15 Q 1521 1169 1509.85 1169 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 648px; height: 1px; padding-top: 1200px; margin-left: 871px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">tower_stop_token_targets ：[[batch_size, -1],] = [[batch_size, 批内的音频的帧数],]</div></div></div></foreignObject><text x="1195" y="1205" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle">tower_stop_token_targets ：[[batch_size, -1],] = [[batch_size, 批内的音频的帧数],]</text></switch></g><rect x="880" y="1270" width="610" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="880" y="1270" width="610" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 890.15 1269 Q 879 1269 879 1280.15 L 879 1294 Q 1185 1312 1491 1294 L 1491 1280.15 Q 1491 1269 1479.85 1269 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 608px; height: 1px; padding-top: 1300px; margin-left: 881px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">embedded_inputs =tower_inputs[i] : [batch_size, -1] = [batch_size, 批内的id长度]</div></div></div></foreignObject><text x="1185" y="1305" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle">embedded_inputs =tower_inputs[i] : [batch_size, -1] = [batch_size, 批内的id长度]</text></switch></g><rect x="950" y="1390" width="520" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="950" y="1390" width="520" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 960.15 1389 Q 949 1389 949 1400.15 L 949 1414 Q 1210 1432 1471 1414 L 1471 1400.15 Q 1471 1389 1459.85 1389 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 518px; height: 1px; padding-top: 1420px; margin-left: 951px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">Encoder Cell ==&gt; [batch_size, encoder_steps, encoder_lstm_units] = [BS,encoder_steps,256]</div></div></div></foreignObject><text x="1210" y="1425" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle">Encoder Cell ==&gt; [batch_size, encoder_steps, encoder_lstm_units]...</text></switch></g><rect x="1000" y="1490" width="430" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="1000" y="1490" width="430" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 1010.15 1489 Q 999 1489 999 1500.15 L 999 1514 Q 1215 1532 1431 1514 L 1431 1500.15 Q 1431 1489 1419.85 1489 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 428px; height: 1px; padding-top: 1520px; margin-left: 1001px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "># tower_input_lengths [[BS,batch内的id长度],]</div></div></div></foreignObject><text x="1215" y="1525" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle"># tower_input_lengths [[BS,batch内的id长度],]</text></switch></g><rect x="1000" y="1560" width="430" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="1000" y="1560" width="430" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><path d="M 1010.15 1559 Q 999 1559 999 1570.15 L 999 1584 Q 1215 1602 1431 1584 L 1431 1570.15 Q 1431 1559 1419.85 1559 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 428px; height: 1px; padding-top: 1590px; margin-left: 1001px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 16px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "># tower_targets_lengths =  [[BS,batch内的mel帧数],]</div></div></div></foreignObject><text x="1215" y="1595" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle"># tower_targets_lengths =  [[BS,batch内的mel帧数],]</text></switch></g><path d="M 860 1210 L 860 1195.7 Q 860 1184 848.3 1184 L 11.7 1184 Q 0 1184 0 1195.7 L 0 1210" fill="none" stroke="#000000" stroke-miterlimit="10" transform="translate(2,3)" opacity="0.25"/><path d="M 860 1210 L 860 1195.7 Q 860 1184 848.3 1184 L 11.7 1184 Q 0 1184 0 1195.7 L 0 1210" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 0 1210 L 0 2576.3 Q 0 2588 11.7 2588 L 848.3 2588 Q 860 2588 860 2576.3 L 860 1210" fill="none" stroke="#000000" stroke-miterlimit="10" transform="translate(2,3)" opacity="0.25"/><path d="M 0 1210 L 0 2576.3 Q 0 2588 11.7 2588 L 848.3 2588 Q 860 2588 860 2576.3 L 860 1210" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 0 1210 L 860 1210" fill="none" stroke="#000000" stroke-miterlimit="10" transform="translate(2,3)" opacity="0.25"/><path d="M 0 1210 L 860 1210" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 12.7 1183 Q -1 1183 -1 1196.7 L -1 1194.4 Q 430 1202.2 861 1194.4 L 861 1196.7 Q 861 1183 847.3 1183 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g fill="#000000" font-family="Helvetica" pointer-events="none" text-anchor="middle" font-size="19px"><text x="429.5" y="1205">Classname</text></g><g fill="#000000" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-4-1215-852-26-0)" font-size="18px"><text x="5.5" y="1233.5">inout:    [BS,T_in]，  BS=batch_size, T_in=输入的id数目， value = char</text></g><g fill="#000000" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-4-1241-852-26-0)" font-size="18px"><text x="5.5" y="1259.5">input_lenght: [BS] , value = 输入序列的长度</text></g><g fill="#000000" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-4-1267-852-26-0)" font-size="18px"><text x="5.5" y="1285.5">embed_targets ：[BS,E], E=speakerembbed-dim=256,</text></g><g fill="#000000" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-4-1293-852-26-0)" font-size="18px"><text x="5.5" y="1311.5">mel_targets : [BS,T_out,M], T_out=输出的音频的帧数， M=num_mels=80，values=mel的谱值</text></g><g fill="#000000" font-family="Helvetica" font-weight="bold" pointer-events="none" clip-path="url(#mx-clip-4-1319-852-26-0)" font-size="18px"><text x="5.5" y="1337.5">tower_XXX : 是 XXX在 多 GPU训练时，将 每个BS分配到 多个GPU上。</text></g><g fill="#000000" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-4-1345-852-26-0)" font-size="18px"><text x="5.5" y="1363.5">+ field: type</text></g><g fill="#000000" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-4-1371-852-26-0)" font-size="18px"><text x="5.5" y="1389.5">+ field: type</text></g><g fill="#000000" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-4-1397-852-402-0)" font-size="14px"><text x="5.5" y="1411.5">            self._placeholders = [</text><text x="5.5" y="1428.5">                tf.compat.v1.placeholder(tf.int32, shape=(None, None), name="inputs"),</text><text x="5.5" y="1445.5">                tf.compat.v1.placeholder(tf.int32, shape=(None, ), name="input_lengths"),</text><text x="5.5" y="1462.5">                tf.compat.v1.placeholder(tf.float32, shape=(None, None, hparams.num_mels), name="mel_targets"),</text><text x="5.5" y="1479.5">                tf.compat.v1.placeholder(tf.float32, shape=(None, None), name="token_targets"),</text><text x="5.5" y="1496.5">                tf.compat.v1.placeholder(tf.int32, shape=(None, ), name="targets_lengths"),</text><text x="5.5" y="1513.5">                tf.compat.v1.placeholder(tf.int32, shape=(hparams.tacotron_num_gpus, None), name="split_infos"),</text><text x="5.5" y="1530.5">                # SV2TTS</text><text x="5.5" y="1547.5">                tf.compat.v1.placeholder(tf.float32, shape=(None, hparams.speaker_embedding_size), name="speaker_embeddings")</text><text x="5.5" y="1564.5">            ]</text><text x="5.5" y="1581.5">            self.inputs, self.input_lengths, self.mel_targets, self.token_targets, \</text><text x="5.5" y="1598.5">                self.targets_lengths, self.split_infos, self.speaker_embeddings = queue.dequeue()</text><text x="5.5" y="1632.5">            self.inputs.set_shape(self._placeholders[0].shape)</text><text x="5.5" y="1649.5">            self.input_lengths.set_shape(self._placeholders[1].shape)</text><text x="5.5" y="1666.5">            self.mel_targets.set_shape(self._placeholders[2].shape)</text><text x="5.5" y="1683.5">            self.token_targets.set_shape(self._placeholders[3].shape)</text><text x="5.5" y="1700.5">            self.targets_lengths.set_shape(self._placeholders[4].shape)</text><text x="5.5" y="1717.5">            self.split_infos.set_shape(self._placeholders[5].shape)</text><text x="5.5" y="1734.5">            self.speaker_embeddings.set_shape(self._placeholders[6].shape)</text></g><g fill="#000000" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-4-1799-852-26-0)" font-size="18px"><text x="5.5" y="1817.5">split_infos.append([input_max_len, mel_target_max_len, token_target_max_len])</text></g><g fill="#000000" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-4-1825-852-232-0)" font-size="18px"><text x="5.5" y="1843.5">_prepare_batch(self, batches, outputs_per_step):</text><text x="5.5" y="1865.5">        # 备注： 输出变量，如 inputs , 行的维度是单个gpu训练的样本个数，列是 GPU个数倍， 总列数=num_GPU*单个样本列数。</text><text x="5.5" y="1887.5">        # inputs : 是 BS/num_GPU行个样本，在列上 num_GPU次。</text><text x="5.5" y="1931.5">        return inputs, input_lengths, mel_targets, token_targets, targets_lengths, \</text><text x="5.5" y="1953.5">               split_infos, embed_targets</text></g><g fill="#000000" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-4-2057-852-134-0)" font-size="18px"><text x="5.5" y="2075.5">_prepare_inputs(self, inputs):</text><text x="5.5" y="2097.5"># 行上进行排列，作为单个 gpu上训练的一组数据。</text><text x="5.5" y="2119.5">        return np.stack([self._pad_input(x, max_len) for x in inputs]), max_len</text></g><g fill="#000000" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-4-2191-852-134-0)" font-size="18px"><text x="5.5" y="2209.5">size_per_device = int(len(batches) / self._hparams.tacotron_num_gpus)</text><text x="5.5" y="2231.5">_batches_per_group = 64</text><text x="5.5" y="2275.5"># batch_size 必须时GPU个数的整数倍。</text></g><g fill="#000000" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-4-2325-852-134-0)" font-size="18px"/><g fill="#000000" font-family="Helvetica" pointer-events="none" clip-path="url(#mx-clip-4-2459-852-134-0)" font-size="18px"/><rect x="3265" y="370" width="400" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="3265" y="370" width="400" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 3275.15 369 Q 3264 369 3264 380.15 L 3264 394 Q 3465 412 3666 394 L 3666 380.15 Q 3666 369 3654.85 369 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 398px; height: 1px; padding-top: 400px; margin-left: 3266px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">tf.compat.v1.nn.rnn_cell.LSTMCell(num_units, state_is_tuple=state_is_tuple, name=name)</div></div></div></foreignObject><text x="3465" y="404" fill="#000000" font-family="Helvetica" font-size="14px" text-anchor="middle">tf.compat.v1.nn.rnn_cell.LSTMCell(num_units, state_is_tup...</text></switch></g><rect x="1310" y="510" width="120" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="1310" y="510" width="120" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 1320.15 509 Q 1309 509 1309 520.15 L 1309 534 Q 1370 552 1431 534 L 1431 520.15 Q 1431 509 1419.85 509 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><path d="M 1745 1465 L 1745 1508.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 1745 1513.88 L 1741.5 1506.88 L 1745 1508.63 L 1748.5 1506.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 1845 1420 L 1910 1420 L 1910 1598 L 1920 1598 L 1920 1760 L 1983.63 1760" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 1988.88 1760 L 1981.88 1763.5 L 1983.63 1760 L 1981.88 1756.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1679px; margin-left: 1919px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">1，2</div></div></div></foreignObject><text x="1919" y="1683" fill="#000000" font-family="Helvetica" font-size="14px" text-anchor="middle">1，2</text></switch></g><path d="M 1645 1420 L 1500 1420 L 1500 1990 L 1598.63 1990" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 1603.88 1990 L 1596.88 1993.5 L 1598.63 1990 L 1596.88 1986.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="1645" y="1375" width="200" height="90" rx="13.5" ry="13.5" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="1645" y="1375" width="200" height="90" rx="13.5" ry="13.5" fill="#d80073" stroke="#a50040" pointer-events="none"/><path d="M 1659.65 1374 Q 1644 1374 1644 1389.65 L 1644 1411 Q 1745 1438 1846 1411 L 1846 1389.65 Q 1846 1374 1830.35 1374 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 198px; height: 1px; padding-top: 1420px; margin-left: 1646px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #ffffff; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">(cell_outputs, stop_token), cell_state</div></div></div></foreignObject><text x="1745" y="1424" fill="#ffffff" font-family="Helvetica" font-size="14px" text-anchor="middle">(cell_outputs, stop_token),...</text></switch></g><path d="M 1595 1595 L 1530 1595 L 1530 1640 L 1400 1640 L 1400 1700 L 1320 1700 L 1320 1713.63" fill="none" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/><path d="M 1320 1718.88 L 1316.5 1711.88 L 1320 1713.63 L 1323.5 1711.88 Z" fill="#d6b656" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/><path d="M 1680 1675 L 1680 1730 L 1680 1823.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 1680 1828.88 L 1676.5 1821.88 L 1680 1823.63 L 1683.5 1821.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1804px; margin-left: 1683px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">2，3，4</div></div></div></foreignObject><text x="1683" y="1808" fill="#000000" font-family="Helvetica" font-size="14px" text-anchor="middle">2，3，4</text></switch></g><rect x="1595" y="1515" width="300" height="160" rx="24" ry="24" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="1595" y="1515" width="300" height="160" rx="24" ry="24" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 1620.15 1514 Q 1594 1514 1594 1540.15 L 1594 1579 Q 1745 1627 1896 1579 L 1896 1540.15 Q 1896 1514 1869.85 1514 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 298px; height: 1px; padding-top: 1595px; margin-left: 1596px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; "><div>(finished, next_inputs, next_state) = self._helper.next_inputs(</div><div>time=time,</div><div>outputs=cell_outputs,[有标签学习，未使用]</div><div><font size="1"><b style="font-size: 19px">state=cell_state,</b></font></div><div>sample_ids=sample_ids,<br /></div><div>stop_token_prediction=stop_token)<br /></div></div></div></div></foreignObject><text x="1745" y="1599" fill="#000000" font-family="Helvetica" font-size="14px" text-anchor="middle">(finished, next_inputs, next_state) = self....</text></switch></g><path d="M 1860 1790 L 1860 1810 L 1755 1810 L 1755 1823.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 1755 1828.88 L 1751.5 1821.88 L 1755 1823.63 L 1758.5 1821.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1813px; margin-left: 1774px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">1</div></div></div></foreignObject><text x="1774" y="1817" fill="#000000" font-family="Helvetica" font-size="14px" text-anchor="middle">1</text></switch></g><rect x="1730" y="1730" width="260" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="1730" y="1730" width="260" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 1740.15 1729 Q 1729 1729 1729 1740.15 L 1729 1754 Q 1860 1772 1991 1754 L 1991 1740.15 Q 1991 1729 1979.85 1729 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 258px; height: 1px; padding-top: 1760px; margin-left: 1731px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">outputs = CustomDecoderOutput(cell_outputs, stop_token, sample_ids)</div></div></div></foreignObject><text x="1860" y="1764" fill="#000000" font-family="Helvetica" font-size="14px" text-anchor="middle">outputs = CustomDecoderOutput(cell_ou...</text></switch></g><path d="M 2050 1660 L 2010 1660 L 2010 1870 L 1940 1870 L 1940 1860 L 1911.37 1860" fill="none" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/><path d="M 1906.12 1860 L 1913.12 1856.5 L 1911.37 1860 L 1913.12 1863.5 Z" fill="#d6b656" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/><rect x="1605" y="1830" width="300" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="1605" y="1830" width="300" height="60" rx="9" ry="9" fill="#e1d5e7" stroke="#9673a6" pointer-events="none"/><path d="M 1615.15 1829 Q 1604 1829 1604 1840.15 L 1604 1854 Q 1755 1872 1906 1854 L 1906 1840.15 Q 1906 1829 1894.85 1829 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 298px; height: 1px; padding-top: 1860px; margin-left: 1606px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">(outputs, next_state, next_inputs, finished)</div></div></div></foreignObject><text x="1755" y="1864" fill="#000000" font-family="Helvetica" font-size="14px" text-anchor="middle">(outputs, next_state, next_inputs, finished)</text></switch></g><rect x="1180" y="1720" width="280" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="1180" y="1720" width="280" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 1190.15 1719 Q 1179 1719 1179 1730.15 L 1179 1744 Q 1320 1762 1461 1744 L 1461 1730.15 Q 1461 1719 1449.85 1719 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 278px; height: 1px; padding-top: 1750px; margin-left: 1181px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; "><div>finished = (time + 1 &gt;= self._lengths)</div><div><b>next_input</b>s=self._targets[:, time, :]<br /></div><div><font size="1"><b style="font-size: 17px">next_state = state</b></font><br /></div></div></div></div></foreignObject><text x="1320" y="1754" fill="#000000" font-family="Helvetica" font-size="14px" text-anchor="middle">finished = (time + 1 &gt;= self._lengths)...</text></switch></g><path d="M 1970 1960 L 1970 1760 L 1983.63 1760" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 1988.88 1760 L 1981.88 1763.5 L 1983.63 1760 L 1981.88 1756.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1790px; margin-left: 1970px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; background-color: #ffffff; white-space: nowrap; ">3</div></div></div></foreignObject><text x="1970" y="1794" fill="#000000" font-family="Helvetica" font-size="14px" text-anchor="middle">3</text></switch></g><rect x="1605" y="1960" width="420" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="1605" y="1960" width="420" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 1615.15 1959 Q 1604 1959 1604 1970.15 L 1604 1984 Q 1815 2002 2026 1984 L 2026 1970.15 Q 2026 1959 2014.85 1959 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 418px; height: 1px; padding-top: 1990px; margin-left: 1606px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">sample_ids = self._helper.sample(time=time, outputs=cell_outputs, state=cell_state)</div></div></div></foreignObject><text x="1815" y="1994" fill="#000000" font-family="Helvetica" font-size="14px" text-anchor="middle">sample_ids = self._helper.sample(time=time, outputs=cell_out...</text></switch></g><path d="M 2150 1610 L 2177.57 1610 L 2177.57 1590 L 2198.63 1590" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2203.88 1590 L 2196.88 1593.5 L 2198.63 1590 L 2196.88 1586.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="1950" y="1560" width="200" height="100" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="1950" y="1560" width="200" height="100" fill="#6a00ff" stroke="#3700cc" pointer-events="none"/><path d="M 1949 1559 L 1949 1600 Q 2050 1630 2151 1600 L 2151 1559 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 198px; height: 1px; padding-top: 1610px; margin-left: 1951px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #ffffff; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; "><div>CustomDecoder()-step(</div><div>time, inputs, state)</div><div>该函数接收当前的输入和隐层状态会生成下一个词</div></div></div></div></foreignObject><text x="2050" y="1614" fill="#ffffff" font-family="Helvetica" font-size="14px" text-anchor="middle">CustomDecoder()-step(...</text></switch></g><path d="M 2355 1620 L 2355 1650 L 2330.29 1650 L 2330.29 1673.63" fill="none" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/><path d="M 2330.29 1678.88 L 2326.79 1671.88 L 2330.29 1673.63 L 2333.79 1671.88 Z" fill="#d6b656" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/><rect x="2205" y="1560" width="300" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2205" y="1560" width="300" height="60" rx="9" ry="9" fill="#e1d5e7" stroke="#9673a6" pointer-events="none"/><path d="M 2215.15 1559 Q 2204 1559 2204 1570.15 L 2204 1584 Q 2355 1602 2506 1584 L 2506 1570.15 Q 2506 1559 2494.85 1559 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 298px; height: 1px; padding-top: 1590px; margin-left: 2206px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">(outputs, <font style="font-size: 16px"><b>next_state</b></font>, <b>next_inputs</b>, finished)</div></div></div></foreignObject><text x="2355" y="1594" fill="#000000" font-family="Helvetica" font-size="14px" text-anchor="middle">(outputs, next_state, next_inputs, finished)</text></switch></g><path d="M 2340.71 3750 L 2340.71 3770 L 2342 3770 L 2342 3773.63" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 2342 3778.88 L 2338.5 3771.88 L 2342 3773.63 L 2345.5 3771.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="2034.47" y="3630" width="612.5" height="120" rx="18" ry="18" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2034.47" y="3630" width="612.5" height="120" rx="18" ry="18" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 2053.62 3629 Q 2033.47 3629 2033.47 3649.15 L 2033.47 3678 Q 2340.72 3714 2647.97 3678 L 2647.97 3649.15 Q 2647.97 3629 2627.82 3629 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 611px; height: 1px; padding-top: 3690px; margin-left: 2035px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; "><div style="font-size: 17px">initial_finished, initial_inputs, initial_state = decoder.initialize()</div><div style="font-size: 17px">一个是initial_finished，一般是[batch_size]的大小False值，表明当前解码步骤尚未结束（未生成到最后一个词<br style="font-size: 17px" /></div></div></div></div></foreignObject><text x="2341" y="3695" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">initial_finished, initial_inputs, initial_state = decoder.initialize()...</text></switch></g><path d="M 2340.72 3580 L 2340.72 3623.63" fill="none" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/><path d="M 2340.72 3628.88 L 2337.22 3621.88 L 2340.72 3623.63 L 2344.22 3621.88 Z" fill="#d6b656" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/><path d="M 2400.72 3550 L 2678.63 3550" fill="none" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/><path d="M 2683.88 3550 L 2676.88 3553.5 L 2678.63 3550 L 2676.88 3546.5 Z" fill="#d6b656" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/><rect x="2280.72" y="3520" width="120" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2280.72" y="3520" width="120" height="60" rx="9" ry="9" fill="#ffe6cc" stroke="#d79b00" pointer-events="none"/><path d="M 2290.87 3519 Q 2279.72 3519 2279.72 3530.15 L 2279.72 3544 Q 2340.72 3562 2401.72 3544 L 2401.72 3530.15 Q 2401.72 3519 2390.57 3519 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 3550px; margin-left: 2282px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">decoder</div></div></div></foreignObject><text x="2341" y="3555" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">decoder</text></switch></g><path d="M 2342 3850 L 2342 3875 L 2341.29 3875 L 2341.31 3893.63" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 2341.31 3898.88 L 2337.81 3891.89 L 2341.31 3893.63 L 2344.81 3891.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="2102" y="3780" width="480" height="70" rx="10.5" ry="10.5" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2102" y="3780" width="480" height="70" rx="10.5" ry="10.5" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 2113.65 3779 Q 2101 3779 2101 3791.65 L 2101 3808 Q 2342 3829 2583 3808 L 2583 3791.65 Q 2583 3779 2570.35 3779 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 478px; height: 1px; padding-top: 3815px; margin-left: 2103px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">创建一个每个元素为[batch_size, output_size]大小的数组。如果指定了maximum_iterations，数组大小为maximum_iterations，否则为动态大小</div></div></div></foreignObject><text x="2342" y="3820" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">创建一个每个元素为[batch_size, output_size]大小的数组。如果指定了maximum_iterations，数组大小为maximum_itera...</text></switch></g><path d="M 2341.29 4260 L 2341.29 4285 L 2341.29 4303.63" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 2341.29 4308.88 L 2337.79 4301.88 L 2341.29 4303.63 L 2344.79 4301.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2646.97 3930 L 2760 3930 L 2760 3788.86 L 2860.51 3788.94" fill="none" stroke="#d79b00" stroke-miterlimit="10" pointer-events="none"/><path d="M 2865.76 3788.94 L 2858.76 3792.43 L 2860.51 3788.94 L 2858.76 3785.43 Z" fill="#d79b00" stroke="#d79b00" stroke-miterlimit="10" pointer-events="none"/><path d="M 2646.97 4080 L 2670 4080 L 2670 4120 L 2783.63 4120" fill="none" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/><path d="M 2788.88 4120 L 2781.88 4123.5 L 2783.63 4120 L 2781.88 4116.5 Z" fill="#d6b656" stroke="#d6b656" stroke-miterlimit="10" pointer-events="none"/><rect x="2035.66" y="3900" width="611.31" height="360" rx="54" ry="54" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2035.66" y="3900" width="611.31" height="360" rx="54" ry="54" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 2090.81 3899 Q 2034.66 3899 2034.66 3955.15 L 2034.66 4044 Q 2341.31 4152 2647.97 4044 L 2647.97 3955.15 Q 2647.97 3899 2591.82 3899 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 609px; height: 1px; padding-top: 4080px; margin-left: 2037px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; "><div style="font-size: 17px"><br style="font-size: 17px" /></div><div style="font-size: 17px">res = control_flow执行while循环，并得到结果result。</div><div style="font-size: 17px">注意这里的result是一个数组，对应着loop_vars的loop完的结果。</div><div style="font-size: 17px">所以loop_vars有几个元素，result有几个元素。_ops.while_loop(</div>        <font style="font-size: 17px"><b style="font-size: 17px">condition,</b></font><br style="font-size: 17px" />        <font style="font-size: 17px"><b style="font-size: 17px">body,</b></font><br style="font-size: 17px" />        loop_vars=(<br style="font-size: 17px" />            initial_time,<br style="font-size: 17px" />            initial_outputs_ta,<br style="font-size: 17px" />            initial_state,<br style="font-size: 17px" />            initial_inputs,<br style="font-size: 17px" />            initial_finished,<br style="font-size: 17px" />            initial_sequence_lengths,<br style="font-size: 17px" />        ),<br style="font-size: 17px" />        parallel_iterations=parallel_iterations,<br style="font-size: 17px" />        maximum_iterations=maximum_iterations,<br style="font-size: 17px" />        swap_memory=swap_memory)</div></div></div></foreignObject><text x="2341" y="4085" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">res = control_flow执行while循环，并得到结果result。...</text></switch></g><path d="M 2341.29 4450 L 2341.29 4490 L 2342 4490 L 2342 4523.63" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 2342 4528.88 L 2338.5 4521.88 L 2342 4523.63 L 2345.5 4521.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="2049.47" y="4310" width="583.69" height="140" rx="21" ry="21" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2049.47" y="4310" width="583.69" height="140" rx="21" ry="21" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 2071.62 4309 Q 2048.47 4309 2048.47 4332.15 L 2048.47 4366 Q 2341.32 4408 2634.16 4366 L 2634.16 4332.15 Q 2634.16 4309 2611.01 4309 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 582px; height: 1px; padding-top: 4380px; margin-left: 2050px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">    final_outputs_ta = res[1]<br style="font-size: 17px" />    final_state = res[2]<br style="font-size: 17px" />    final_sequence_lengths = res[5]<br style="font-size: 17px" /><br style="font-size: 17px" />    final_outputs = nest.map_structure(lambda ta: ta.stack(), final_outputs_ta)</div></div></div></foreignObject><text x="2341" y="4385" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">final_outputs_ta = res[1]...</text></switch></g><rect x="2192" y="4530" width="300" height="60" rx="9" ry="9" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2192" y="4530" width="300" height="60" rx="9" ry="9" fill="#ffe6cc" stroke="#d79b00" pointer-events="none"/><path d="M 2202.15 4529 Q 2191 4529 2191 4540.15 L 2191 4554 Q 2342 4572 2493 4554 L 2493 4540.15 Q 2493 4529 2481.85 4529 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 298px; height: 1px; padding-top: 4560px; margin-left: 2193px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">[batch_size, seq_length, output_size]</div></div></div></foreignObject><text x="2342" y="4565" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">[batch_size, seq_length, output_siz...</text></switch></g><rect x="2870" y="3730" width="520" height="140" rx="21" ry="21" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2870" y="3730" width="520" height="140" rx="21" ry="21" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 2892.15 3729 Q 2869 3729 2869 3752.15 L 2869 3786 Q 3130 3828 3391 3786 L 3391 3752.15 Q 3391 3729 3367.85 3729 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 518px; height: 1px; padding-top: 3800px; margin-left: 2871px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">def condition(unused_time, unused_outputs_ta, unused_state, unused_inputs,<br style="font-size: 17px" />                  finished, unused_sequence_lengths):<br style="font-size: 17px" />      return math_ops.logical_not(math_ops.reduce_all(finished))</div></div></div></foreignObject><text x="3130" y="3805" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">def condition(unused_time, unused_outputs_ta, unused_state, u...</text></switch></g><path d="M 3157.5 4230 L 3157.5 4273.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 3157.5 4278.88 L 3154 4271.88 L 3157.5 4273.63 L 3161 4271.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="2790" y="4010" width="735" height="220" rx="33" ry="33" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2790" y="4010" width="735" height="220" rx="33" ry="33" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 2824.15 4009 Q 2789 4009 2789 4044.15 L 2789 4098 Q 3157.5 4164 3526 4098 L 3526 4044.15 Q 3526 4009 3490.85 4009 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 733px; height: 1px; padding-top: 4120px; margin-left: 2791px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; "><div style="font-size: 17px">def body(time, outputs_ta, state, inputs, finished, sequence_lengths):</div><div style="font-size: 17px"><br style="font-size: 17px" /></div><div style="font-size: 17px"><code class="has-numbering" style="font-size: 17px">      Returns:</code></div><div style="font-size: 17px"><code class="has-numbering" style="font-size: 17px"></code><code class="has-numbering" style="font-size: 17px">(time + 1,</code></div><div style="font-size: 17px"><code class="has-numbering" style="font-size: 17px"></code><code class="has-numbering" style="font-size: 17px">outputs_ta,</code></div><div style="font-size: 18px"><code class="has-numbering" style="font-size: 17px"></code><font style="font-size: 18px"><b><code class="has-numbering">next_state,</code></b></font></div><div style="font-size: 18px"><font style="font-size: 18px"><code class="has-numbering"></code><b><code class="has-numbering">next_inputs,</code></b></font></div><div style="font-size: 17px"><code class="has-numbering" style="font-size: 17px"></code><code class="has-numbering" style="font-size: 17px">next_finished,</code></div><div style="font-size: 17px"><code class="has-numbering" style="font-size: 17px"></code><code class="has-numbering" style="font-size: 17px">next_sequence_lengths)</code></div></div></div></div></foreignObject><text x="3158" y="4125" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">def body(time, outputs_ta, state, inputs, finished, sequence_lengths):...</text></switch></g><rect x="2781.25" y="4280" width="752.5" height="160" rx="24" ry="24" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2781.25" y="4280" width="752.5" height="160" rx="24" ry="24" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 2806.4 4279 Q 2780.25 4279 2780.25 4305.15 L 2780.25 4344 Q 3157.5 4392 3534.75 4344 L 3534.75 4305.15 Q 3534.75 4279 3508.6 4279 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 751px; height: 1px; padding-top: 4360px; margin-left: 2782px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">next_outputs, <i><b>decoder_state</b></i>, <i><b>next_inputs</b></i>,<br style="font-size: 17px" /><div style="font-size: 17px">       decoder_finished) = decoder.step(time, <b>inputs, state</b>)    #通过time，inputs, state得到下一个词</div><div style="font-size: 17px"><br style="font-size: 17px" /></div> # 如果某一时刻已经finished，那么最后的state为finished时的state，否则就为当前decoder得到的state</div></div></div></foreignObject><text x="3158" y="4365" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">next_outputs, decoder_state, next_inputs,...</text></switch></g><rect x="2685" y="3435" width="850" height="230" rx="34.5" ry="34.5" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="2685" y="3435" width="850" height="230" rx="34.5" ry="34.5" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 2720.65 3434 Q 2684 3434 2684 3470.65 L 2684 3527 Q 3110 3596 3536 3527 L 3536 3470.65 Q 3536 3434 3499.35 3434 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 848px; height: 1px; padding-top: 3550px; margin-left: 2686px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 17px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">Seq2Seq模型训练：<br />Encoder：input_sequences ----&gt; (RNN) ----&gt; C(Cell State)<br />Decoder：C + 结合时刻i的target ----&gt; (RNN) ----&gt; 预测时刻i+1的target<br />重点：训练过程decoder部分的输入是target<br />预测过程区别：decoder的输入是上一时刻的输出<br /><br />作者：fada_away<br />链接：https://www.jianshu.com/p/25f0b0cab45f<br />来源：简书<br />著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</div></div></div></foreignObject><text x="3110" y="3555" fill="#000000" font-family="Helvetica" font-size="17px" text-anchor="middle">Seq2Seq模型训练：...</text></switch></g><path d="M 1995 3565 L 2274.35 3565" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 2279.6 3565 L 2272.6 3568.5 L 2274.35 3565 L 2272.6 3561.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="1795" y="3520" width="200" height="90" rx="13.5" ry="13.5" fill="#000000" stroke="#000000" transform="translate(2,3)" opacity="0.25"/><rect x="1795" y="3520" width="200" height="90" rx="13.5" ry="13.5" fill="#d80073" stroke="#a50040" pointer-events="none"/><path d="M 1809.65 3519 Q 1794 3519 1794 3534.65 L 1794 3556 Q 1895 3583 1996 3556 L 1996 3534.65 Q 1996 3519 1980.35 3519 Z" fill="url(#mx-gradient-ffffff-0.9-ffffff-0.1-s-0)" stroke="none" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 198px; height: 1px; padding-top: 3565px; margin-left: 1796px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 14px; font-family: Helvetica; color: #ffffff; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">(cell_outputs, stop_token), cell_state</div></div></div></foreignObject><text x="1895" y="3569" fill="#ffffff" font-family="Helvetica" font-size="14px" text-anchor="middle">(cell_outputs, stop_token),...</text></switch></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://desk.draw.io/support/solutions/articles/16000042487" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Viewer does not support full SVG 1.1</text></a></switch></svg>